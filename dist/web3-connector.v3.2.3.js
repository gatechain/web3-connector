/*! For license information please see web3-connector.v3.2.3.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.web3Connector=e(require("react")):t.web3Connector=e(t.React)}(self,(t=>(()=>{var e,r,n={4594:(t,e,r)=>{"use strict";r.r(e),r.d(e,{getAddress:()=>d,getContractAddress:()=>m,getCreate2Address:()=>v,getIcapAddress:()=>g,isAddress:()=>p});var n=r(3286),i=r(5154),s=r(8197),o=r(1843);const a=new(r(711).Yd)("address/5.7.0");function c(t){(0,n.A7)(t,20)||a.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const i=(0,n.lE)((0,s.w)(r));for(let t=0;t<40;t+=2)i[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&i[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const u={};for(let t=0;t<10;t++)u[String(t)]=String(t);for(let t=0;t<26;t++)u[String.fromCharCode(65+t)]=String(10+t);const h=Math.floor((l=9007199254740991,Math.log10?Math.log10(l):Math.log(l)/Math.LN10));var l;function f(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>u[t])).join("");for(;e.length>=h;){let t=e.substring(0,h);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function d(t){let e=null;if("string"!=typeof t&&a.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=c(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&a.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==f(t)&&a.throwArgumentError("bad icap checksum","address",t),e=(0,i.g$)(t.substring(4));e.length<40;)e="0"+e;e=c("0x"+e)}else a.throwArgumentError("invalid address","address",t);return e}function p(t){try{return d(t),!0}catch(t){}return!1}function g(t){let e=(0,i.t2)(d(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+f("XE00"+e)+e}function m(t){let e=null;try{e=d(t.from)}catch(e){a.throwArgumentError("missing from address","transaction",t)}const r=(0,n.G1)((0,n.lE)(i.O$.from(t.nonce).toHexString()));return d((0,n.p3)((0,s.w)((0,o.c)([e,r])),12))}function v(t,e,r){return 32!==(0,n.E1)(e)&&a.throwArgumentError("salt must be 32 bytes","salt",e),32!==(0,n.E1)(r)&&a.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),d((0,n.p3)((0,s.w)((0,n.zo)(["0xff",d(t),e,r])),12))}},5154:(t,e,r)=>{"use strict";r.d(e,{O$:()=>f,t2:()=>y,g$:()=>v});var n=r(3550),i=r.n(n),s=r(3286),o=r(711),a=i().BN;const c=new o.Yd("bignumber/5.7.0"),u={},h=9007199254740991;let l=!1;class f{constructor(t,e){t!==u&&c.throwError("cannot call constructor directly; use BigNumber.from",o.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return p(g(this).fromTwos(t))}toTwos(t){return p(g(this).toTwos(t))}abs(){return"-"===this._hex[0]?f.from(this._hex.substring(1)):this}add(t){return p(g(this).add(g(t)))}sub(t){return p(g(this).sub(g(t)))}div(t){return f.from(t).isZero()&&m("division-by-zero","div"),p(g(this).div(g(t)))}mul(t){return p(g(this).mul(g(t)))}mod(t){const e=g(t);return e.isNeg()&&m("division-by-zero","mod"),p(g(this).umod(e))}pow(t){const e=g(t);return e.isNeg()&&m("negative-power","pow"),p(g(this).pow(e))}and(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","and"),p(g(this).and(e))}or(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","or"),p(g(this).or(e))}xor(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","xor"),p(g(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&m("negative-width","mask"),p(g(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&m("negative-width","shl"),p(g(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&m("negative-width","shr"),p(g(this).shrn(t))}eq(t){return g(this).eq(g(t))}lt(t){return g(this).lt(g(t))}lte(t){return g(this).lte(g(t))}gt(t){return g(this).gt(g(t))}gte(t){return g(this).gte(g(t))}isNegative(){return"-"===this._hex[0]}isZero(){return g(this).isZero()}toNumber(){try{return g(this).toNumber()}catch(t){m("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return c.throwError("this platform does not support BigInt",o.Yd.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?l||(l=!0,c.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?c.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",o.Yd.errors.UNEXPECTED_ARGUMENT,{}):c.throwError("BigNumber.toString does not accept parameters",o.Yd.errors.UNEXPECTED_ARGUMENT,{})),g(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof f)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new f(u,d(t)):t.match(/^-?[0-9]+$/)?new f(u,d(new a(t))):c.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&m("underflow","BigNumber.from",t),(t>=h||t<=-h)&&m("overflow","BigNumber.from",t),f.from(String(t));const e=t;if("bigint"==typeof e)return f.from(e.toString());if((0,s._t)(e))return f.from((0,s.Dv)(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return f.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&((0,s.A7)(t)||"-"===t[0]&&(0,s.A7)(t.substring(1))))return f.from(t)}return c.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function d(t){if("string"!=typeof t)return d(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&c.throwArgumentError("invalid hex","value",t),"0x00"===(t=d(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function p(t){return f.from(d(t))}function g(t){const e=f.from(t).toHexString();return"-"===e[0]?new a("-"+e.substring(3),16):new a(e.substring(2),16)}function m(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),c.throwError(t,o.Yd.errors.NUMERIC_FAULT,n)}function v(t){return new a(t,36).toString(16)}function y(t){return new a(t,16).toString(36)}},3286:(t,e,r)=>{"use strict";r.d(e,{lE:()=>u,zo:()=>h,xs:()=>v,E1:()=>g,p3:()=>m,$P:()=>y,$m:()=>w,Dv:()=>p,_t:()=>c,Zq:()=>o,A7:()=>f,N:()=>b,G1:()=>l});const n=new(r(711).Yd)("bytes/5.7.0");function i(t){return!!t.toHexString}function s(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return s(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function o(t){return f(t)&&!(t.length%2)||c(t)}function a(t){return"number"==typeof t&&t==t&&t%1==0}function c(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!a(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!a(r)||r<0||r>=256)return!1}return!0}function u(t,e){if(e||(e={}),"number"==typeof t){n.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),s(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t)&&(t=t.toHexString()),f(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0"+r:"right"===e.hexPad?r+="0":n.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let t=0;t<r.length;t+=2)i.push(parseInt(r.substring(t,t+2),16));return s(new Uint8Array(i))}return c(t)?s(new Uint8Array(t)):n.throwArgumentError("invalid arrayify value","value",t)}function h(t){const e=t.map((t=>u(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),s(n)}function l(t){let e=u(t);if(0===e.length)return e;let r=0;for(;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function f(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const d="0123456789abcdef";function p(t,e){if(e||(e={}),"number"==typeof t){n.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e=d[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t))return t.toHexString();if(f(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":n.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(c(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=d[(240&n)>>4]+d[15&n]}return e}return n.throwArgumentError("invalid hexlify value","value",t)}function g(t){if("string"!=typeof t)t=p(t);else if(!f(t)||t.length%2)return null;return(t.length-2)/2}function m(t,e,r){return"string"!=typeof t?t=p(t):(!f(t)||t.length%2)&&n.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function v(t){let e="0x";return t.forEach((t=>{e+=p(t).substring(2)})),e}function y(t){const e=function(t){"string"!=typeof t&&(t=p(t)),f(t)||n.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}(p(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function w(t,e){for("string"!=typeof t?t=p(t):f(t)||n.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&n.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function b(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(o(t)){let r=u(t);64===r.length?(e.v=27+(r[32]>>7),r[32]&=127,e.r=p(r.slice(0,32)),e.s=p(r.slice(32,64))):65===r.length?(e.r=p(r.slice(0,32)),e.s=p(r.slice(32,64)),e.v=r[64]):n.throwArgumentError("invalid signature string","signature",t),e.v<27&&(0===e.v||1===e.v?e.v+=27:n.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=p(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=function(t,e){(t=u(t)).length>e&&n.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),s(r)}(u(e._vs),32);e._vs=p(r);const i=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=i:e.recoveryParam!==i&&n.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const o=p(r);null==e.s?e.s=o:e.s!==o&&n.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?n.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const r=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==r&&n.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&f(e.r)?e.r=w(e.r,32):n.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&f(e.s)?e.s=w(e.s,32):n.throwArgumentError("signature missing or invalid s","signature",t);const r=u(e.s);r[0]>=128&&n.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const i=p(r);e._vs&&(f(e._vs)||n.throwArgumentError("signature invalid _vs","signature",t),e._vs=w(e._vs,32)),null==e._vs?e._vs=i:e._vs!==i&&n.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}},8197:(t,e,r)=>{"use strict";r.d(e,{w:()=>o});var n=r(1094),i=r.n(n),s=r(3286);function o(t){return"0x"+i().keccak_256((0,s.lE)(t))}},711:(t,e,r)=>{"use strict";r.d(e,{Yd:()=>f});let n=!1,i=!1;const s={debug:1,default:2,info:2,warning:3,error:4,off:5};let o=s.default,a=null;const c=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var u,h;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(u||(u={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"}(h||(h={}));const l="0123456789abcdef";class f{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==s[r]&&this.throwArgumentError("invalid log level name","logLevel",t),o>s[r]||console.log.apply(console,e)}debug(...t){this._log(f.levels.DEBUG,t)}info(...t){this._log(f.levels.INFO,t)}warn(...t){this._log(f.levels.WARNING,t)}makeError(t,e,r){if(i)return this.makeError("censored error",e,{});e||(e=f.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=l[e[t]>>4],r+=l[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push(`code=${e}`),n.push(`version=${this.version}`);const s=t;let o="";switch(e){case h.NUMERIC_FAULT:{o="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":o+="-"+e;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case h.CALL_EXCEPTION:case h.INSUFFICIENT_FUNDS:case h.MISSING_NEW:case h.NONCE_EXPIRED:case h.REPLACEMENT_UNDERPRICED:case h.TRANSACTION_REPLACED:case h.UNPREDICTABLE_GAS_LIMIT:o=e}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const a=new Error(t);return a.reason=s,a.code=e,Object.keys(r).forEach((function(t){a[t]=r[t]})),a}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,f.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),c&&this.throwError("platform missing String.prototype.normalize",f.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:c})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,f.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,f.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",f.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",f.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",f.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return a||(a=new f("logger/5.7.0")),a}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),n){if(!t)return;this.globalLogger().throwError("error censorship permanent",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}i=!!t,n=!!e}static setLogLevel(t){const e=s[t.toLowerCase()];null!=e?o=e:f.globalLogger().warn("invalid log level - "+t)}static from(t){return new f(t)}}f.errors=h,f.levels=u},2803:(t,e,r)=>{"use strict";r.r(e),r.d(e,{AlchemyProvider:()=>Jr,AlchemyWebSocketProvider:()=>Yr,AnkrProvider:()=>Zr,BaseProvider:()=>nr,CloudflareProvider:()=>en,EtherscanProvider:()=>hn,FallbackProvider:()=>In,Formatter:()=>ke,InfuraProvider:()=>kn,InfuraWebSocketProvider:()=>Nn,IpcProvider:()=>Sn,JsonRpcBatchProvider:()=>Rn,JsonRpcProvider:()=>jr,JsonRpcSigner:()=>Tr,NodesmithProvider:()=>Cn,PocketProvider:()=>Ln,Provider:()=>v,Resolver:()=>tr,StaticJsonRpcProvider:()=>Kr,UrlJsonRpcProvider:()=>Gr,Web3Provider:()=>Bn,WebSocketProvider:()=>Fr,getDefaultProvider:()=>zn,getNetwork:()=>S,isCommunityResourcable:()=>Re,isCommunityResource:()=>xe,showThrottleMessage:()=>Me});var n=r(5154),i=r(711);const s=new i.Yd("properties/5.7.0");function o(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function a(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function c(t){return e=this,r=void 0,i=function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})},new((n=void 0)||(n=Promise))((function(t,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,a)}c((i=i.apply(e,r||[])).next())}));var e,r,n,i}function u(t){const e={};for(const r in t)e[r]=t[r];return e}const h={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function l(t){if(null==t||h[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch(t){continue}if(!l(n))return!1}return!0}return s.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function f(t){if(l(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>d(t))));if("object"==typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&o(e,r,d(n))}return e}return s.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function d(t){return f(t)}class p{constructor(t){for(const e in t)this[e]=d(t[e])}}const g=new i.Yd("abstract-provider/5.7.0");class m extends p{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class v{constructor(){g.checkAbstract(new.target,v),o(this,"_isProvider",!0)}getFeeData(){return t=this,e=void 0,i=function*(){const{block:t,gasPrice:e}=yield c({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,i=null,s=null;return t&&t.baseFeePerGas&&(r=t.baseFeePerGas,s=n.O$.from("1500000000"),i=t.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:e}},new((r=void 0)||(r=Promise))((function(n,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}));var t,e,r,i}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}const y=new i.Yd("networks/5.7.1");function w(t){const e=function(e,r){null==r&&(r={});const n=[];if(e.InfuraProvider&&"-"!==r.infura)try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}if(e.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(t){}if(e.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}if(e.PocketProvider&&"-"!==r.pocket){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new e.PocketProvider(t,r.pocket);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(t){}}if(e.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new e.CloudflareProvider(t))}catch(t){}if(e.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],s=new e.AnkrProvider(t,r.ankr);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(t){}if(0===n.length)return null;if(e.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===t&&(i=2),new e.FallbackProvider(n,i)}return n[0]};return e.renetwork=function(t){return w(t)},e}function b(t,e){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return b(t,e)},r}const _={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:w("homestead")},E={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:w("ropsten")},A={chainId:63,name:"classicMordor",_defaultProvider:b("https://www.ethercluster.com/mordor","classicMordor")},I={unspecified:{chainId:0,name:"unspecified"},homestead:_,mainnet:_,morden:{chainId:2,name:"morden"},ropsten:E,testnet:E,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:w("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:w("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:w("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:w("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:b("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:A,classicTestnet:A,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:b("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:w("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:w("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function S(t){if(null==t)return null;if("number"==typeof t){for(const e in I){const r=I[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){const e=I[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=I[t.name];if(!e)return"number"!=typeof t.chainId&&y.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&y.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;var n;return null==r&&e._defaultProvider&&(r=(n=e._defaultProvider)&&"function"==typeof n.renetwork?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}var P=r(3286);function O(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return(0,P.lE)(e)}function N(t){t=(0,P.lE)(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}class k{constructor(t){o(this,"alphabet",t),o(this,"base",t.length),o(this,"_alphabetMap",{}),o(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=(0,P.lE)(t);if(0===e.length)return"";let r=[0];for(let t=0;t<e.length;++t){let n=e[t];for(let t=0;t<r.length;++t)n+=r[t]<<8,r[t]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let t=0;0===e[t]&&t<e.length-1;++t)n+=this._leader;for(let t=r.length-1;t>=0;--t)n+=this.alphabet[r[t]];return n}decode(t){if("string"!=typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return(0,P.lE)(new Uint8Array(e.reverse()))}}new k("abcdefghijklmnopqrstuvwxyz234567");const R=new k("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),x=new i.Yd("strings/5.7.0");var C,M;function T(t,e,r,n,i){if(t===M.BAD_PREFIX||t===M.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return t===M.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(C||(C={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(M||(M={}));const L=Object.freeze({error:function(t,e,r,n,i){return x.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:T,replace:function(t,e,r,n,i){return t===M.OVERLONG?(n.push(i),0):(n.push(65533),T(t,e,r))}});function U(t,e){null==e&&(e=L.error),t=(0,P.lE)(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7==0){r.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){n+=e(128==(192&i)?M.UNEXPECTED_CONTINUE:M.BAD_PREFIX,n-1,t,r);continue}s=3,o=65535}if(n-1+s>=t.length){n+=e(M.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=t[n];if(128!=(192&i)){n+=e(M.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=e(M.OUT_OF_RANGE,n-1-s,t,r,a):a>=55296&&a<=57343?n+=e(M.UTF16_SURROGATE,n-1-s,t,r,a):a<=o?n+=e(M.OVERLONG,n-1-s,t,r,a):r.push(a))}return r}function j(t,e=C.current){e!=C.current&&(x.checkNormalize(),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const i=t.charCodeAt(e);if(e>=t.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return(0,P.lE)(r)}function D(t,e){return U(t,e).map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}var B=r(8197);const q="hash/5.7.0";function z(t,e){null==e&&(e=1);const r=[],n=r.forEach,i=function(t,e){n.call(t,(function(t){e>0&&Array.isArray(t)?i(t,e-1):r.push(t)}))};return i(t,e),r}function F(t){return 1&t?~t>>1:t>>1}function H(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function K(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=F(e());return r}function G(t,e){let r=H(t(),t),n=t(),i=H(n,t),s=function(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}(n,t);for(let t=0;t<n;t++)for(let e=0;e<s[t];e++)r.push(i[t]+e);return e?r.map((t=>e[t])):r}function W(t,e,r){let n=Array(t).fill(void 0).map((()=>[]));for(let i=0;i<e;i++)K(t,r).forEach(((t,e)=>n[e].push(t)));return n}function $(t,e){let r=1+e(),n=e(),i=function(t){let e=[];for(;;){let r=t();if(0==r)break;e.push(r)}return e}(e);return z(W(i.length,1+t,e).map(((t,e)=>{const s=t[0],o=t.slice(1);return Array(i[e]).fill(void 0).map(((t,e)=>{let i=e*n;return[s+e*r,o.map((t=>t+i))]}))})))}function Y(t,e){return W(1+e(),1+t,e).map((t=>[t[0],t.slice(1)]))}const J=function(t){let e=0;return()=>t[e++]}(function(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let t=1;t<n;t++)s.push(i+=r());let o=r(),a=e;e+=o;let c=0,u=0;function h(){return 0==c&&(u=u<<8|t[e++],c=8),u>>--c&1}const l=Math.pow(2,31),f=l>>>1,d=f>>1,p=l-1;let g=0;for(let t=0;t<31;t++)g=g<<1|h();let m=[],v=0,y=l;for(;;){let t=Math.floor(((g-v+1)*i-1)/y),e=0,r=n;for(;r-e>1;){let n=e+r>>>1;t<s[n]?r=n:e=n}if(0==e)break;m.push(e);let o=v+Math.floor(y*s[e]/i),a=v+Math.floor(y*s[e+1]/i)-1;for(;0==((o^a)&f);)g=g<<1&p|h(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&d;)g=g&f|g<<1&p>>>1|h(),o=o<<1^f,a=(a^f)<<1|f|1;v=o,y=1+a-o}let w=n-4;return m.map((e=>{switch(e-w){case 3:return w+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return w+256+(t[a++]<<8|t[a++]);case 1:return w+t[a++];default:return e-1}}))}(O("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))),V=new Set(G(J)),Q=new Set(G(J)),X=function(t){let e=[];for(;;){let r=t();if(0==r)break;e.push($(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(Y(r,t))}return function(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}(z(e))}(J),Z=function(t){let e=G(t).sort(((t,e)=>t-e));return function r(){let n=[];for(;;){let i=G(t,e);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort(((t,e)=>e.set.size-t.set.size));let i=t(),s=i%3;i=i/3|0;let o=!!(1&i);return i>>=1,{branches:n,valid:s,fe0f:o,save:1==i,check:2==i}}()}(J),tt=45,et=95;function rt(t){return function(t,e=C.current){return U(j(t,e))}(t)}function nt(t){return t.filter((t=>65039!=t))}function it(t){for(let e of t.split(".")){let t=rt(e);try{for(let e=t.lastIndexOf(et)-1;e>=0;e--)if(t[e]!==et)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every((t=>t<128))&&t[2]===tt&&t[3]===tt)throw new Error("invalid label extension")}catch(t){throw new Error(`Invalid label "${e}": ${t.message}`)}}return t}function st(t,e){var r;let n,i,s=Z,o=[],a=t.length;for(e&&(e.length=0);a;){let c=t[--a];if(s=null===(r=s.branches.find((t=>t.set.has(c))))||void 0===r?void 0:r.node,!s)break;if(s.save)i=c;else if(s.check&&c===i)break;o.push(c),s.fe0f&&(o.push(65039),a>0&&65039==t[a-1]&&a--),s.valid&&(n=o.slice(),2==s.valid&&n.splice(1,1),e&&e.push(...t.slice(a).reverse()),t.length=a)}return n}const ot=new i.Yd(q),at=new Uint8Array(32);function ct(t){if(0===t.length)throw new Error("invalid ENS name; empty component");return t}function ut(t){const e=j(function(t){return it(function(t,e){let r=rt(t).reverse(),n=[];for(;r.length;){let t=st(r);if(t){n.push(...e(t));continue}let i=r.pop();if(V.has(i)){n.push(i);continue}if(Q.has(i))continue;let s=X[i];if(!s)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...s)}return it(String.fromCodePoint(...n).normalize("NFC"))}(t,nt))}(t)),r=[];if(0===t.length)return r;let n=0;for(let t=0;t<e.length;t++)46===e[t]&&(r.push(ct(e.slice(n,t))),n=t+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(ct(e.slice(n))),r}function ht(t){"string"!=typeof t&&ot.throwArgumentError("invalid ENS name; not a string","name",t);let e=at;const r=ut(t);for(;r.length;)e=(0,B.w)((0,P.zo)([e,(0,B.w)(r.pop())]));return(0,P.Dv)(e)}at.fill(0);var lt=r(3715),ft=r.n(lt);function dt(t){return"0x"+ft().sha256().update((0,P.lE)(t)).digest("hex")}new i.Yd("sha2/5.7.0");var pt=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};function gt(t,e){return pt(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=e.fetchOptions){const t=e.fetchOptions;t.mode&&(r.mode=t.mode),t.cache&&(r.cache=t.cache),t.credentials&&(r.credentials=t.credentials),t.redirect&&(r.redirect=t.redirect),t.referrer&&(r.referrer=t.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{s[t.toLowerCase()]=n.headers.get(t)})),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:(0,P.lE)(new Uint8Array(i))}}))}const mt=new i.Yd("web/5.7.1");function vt(t){return new Promise((e=>{setTimeout(e,t)}))}function yt(t,e){if(null==t)return null;if("string"==typeof t)return t;if((0,P.Zq)(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return D(t)}catch(t){}return(0,P.Dv)(t)}return t}function wt(t,e,r){let n=null;if(null!=e){n=j(e);const r="string"==typeof t?{url:t}:u(t);r.headers?0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length||(r.headers=u(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},t=r}return function(t,e,r){const n="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;mt.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const s="object"==typeof t?t.throttleCallback:null,o="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;mt.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const a="object"==typeof t&&!!t.errorPassThrough,c={};let h=null;const l={method:"GET"};let f=!1,d=12e4;if("string"==typeof t)h=t;else if("object"==typeof t){if(null!=t&&null!=t.url||mt.throwArgumentError("missing URL","connection.url",t),h=t.url,"number"==typeof t.timeout&&t.timeout>0&&(d=t.timeout),t.headers)for(const e in t.headers)c[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(f=!0);if(l.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==h.substring(0,6)&&!0!==t.allowInsecureAuthentication&&mt.throwError("basic authentication requires a secure https url",i.Yd.errors.INVALID_ARGUMENT,{argument:"url",url:h,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;c.authorization={key:"Authorization",value:"Basic "+N(j(e))}}null!=t.skipFetchSetup&&(l.skipFetchSetup=!!t.skipFetchSetup),null!=t.fetchOptions&&(l.fetchOptions=u(t.fetchOptions))}const p=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=h?h.match(p):null;if(g)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?O(g[3]):(m=g[3],j(m.replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16))))))};let e=t.body;return r&&(e=r(t.body,t)),Promise.resolve(e)}catch(t){mt.throwError("processing response error",i.Yd.errors.SERVER_ERROR,{body:yt(g[1],g[2]),error:t,requestBody:null,requestMethod:"GET",url:h})}var m;e&&(l.method="POST",l.body=e,null==c["content-type"]&&(c["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==c["content-length"]&&(c["content-length"]={key:"Content-Length",value:String(e.length)}));const v={};Object.keys(c).forEach((t=>{const e=c[t];v[e.key]=e.value})),l.headers=v;const y=function(){let t=null;return{promise:new Promise((function(e,r){d&&(t=setTimeout((()=>{null!=t&&(t=null,r(mt.makeError("timeout",i.Yd.errors.TIMEOUT,{requestBody:yt(l.body,v["content-type"]),requestMethod:l.method,timeout:d,url:h})))}),d))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),w=function(){return t=this,e=void 0,u=function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield gt(h,l),t<n)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===l.method&&t.match(/^https:/)){h=e.headers.location;continue}}else if(429===e.statusCode){let r=!0;if(s&&(r=yield s(t,h)),r){let r=0;const n=e.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,t))),yield vt(r);continue}}}catch(t){e=t.response,null==e&&(y.cancel(),mt.throwError("missing response",i.Yd.errors.SERVER_ERROR,{requestBody:yt(l.body,v["content-type"]),requestMethod:l.method,serverError:t,url:h}))}let c=e.body;if(f&&304===e.statusCode?c=null:!a&&(e.statusCode<200||e.statusCode>=300)&&(y.cancel(),mt.throwError("bad response",i.Yd.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:yt(c,e.headers?e.headers["content-type"]:null),requestBody:yt(l.body,v["content-type"]),requestMethod:l.method,url:h})),r)try{const t=yield r(c,e);return y.cancel(),t}catch(r){if(r.throttleRetry&&t<n){let e=!0;if(s&&(e=yield s(t,h)),e){const e=o*parseInt(String(Math.random()*Math.pow(2,t)));yield vt(e);continue}}y.cancel(),mt.throwError("processing response error",i.Yd.errors.SERVER_ERROR,{body:yt(c,e.headers?e.headers["content-type"]:null),error:r,requestBody:yt(l.body,v["content-type"]),requestMethod:l.method,url:h})}return y.cancel(),c}return mt.throwError("failed response",i.Yd.errors.SERVER_ERROR,{requestBody:yt(l.body,v["content-type"]),requestMethod:l.method,url:h})},new((c=void 0)||(c=Promise))((function(r,n){function i(t){try{o(u.next(t))}catch(t){n(t)}}function s(t){try{o(u.throw(t))}catch(t){n(t)}}function o(t){var e;t.done?r(t.value):(e=t.value,e instanceof c?e:new c((function(t){t(e)}))).then(i,s)}o((u=u.apply(t,e||[])).next())}));var t,e,c,u}();return Promise.race([y.promise,w])}(t,n,((t,e)=>{let n=null;if(null!=t)try{n=JSON.parse(D(t))}catch(e){mt.throwError("invalid JSON",i.Yd.errors.SERVER_ERROR,{body:t,error:e})}return r&&(n=r(n,e)),n}))}function bt(t,e){return e||(e={}),null==(e=u(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{o()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let c=0;!function i(){return t().then((function(t){if(void 0!==t)o()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!s){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(i,t)}return null}),(function(t){o()&&n(t)}))}()}))}var _t=r(2882),Et=r.n(_t);const At="providers/5.7.2";var It=r(4594);const St=n.O$.from(0);var Pt=r(1843),Ot=r(3550),Nt=r.n(Ot);function kt(t,e,r){return r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},t(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var Rt=xt;function xt(t,e){if(!t)throw new Error(e||"Assertion failed")}xt.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Ct=kt((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16));else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),Mt=kt((function(t,e){var r=e;r.assert=Rt,r.toArray=Ct.toArray,r.zero2=Ct.zero2,r.toHex=Ct.toHex,r.encode=Ct.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,s=t.clone(),o=0;o<n.length;o++){var a,c=s.andln(i-1);s.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,s=0;t.cmpn(-i)>0||e.cmpn(-s)>0;){var o,a,c=t.andln(3)+i&3,u=e.andln(3)+s&3;3===c&&(c=-1),3===u&&(u=-1),o=0==(1&c)?0:3!=(n=t.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(o),a=0==(1&u)?0:3!=(n=e.andln(7)+s&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new(Nt())(t,"hex","le")}})),Tt=Mt.getNAF,Lt=Mt.getJSF,Ut=Mt.assert;function jt(t,e){this.type=t,this.p=new(Nt())(e.p,16),this.red=e.prime?Nt().red(e.prime):Nt().mont(this.p),this.zero=new(Nt())(0).toRed(this.red),this.one=new(Nt())(1).toRed(this.red),this.two=new(Nt())(2).toRed(this.red),this.n=e.n&&new(Nt())(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Dt=jt;function Bt(t,e){this.curve=t,this.type=e,this.precomputed=null}jt.prototype.point=function(){throw new Error("Not implemented")},jt.prototype.validate=function(){throw new Error("Not implemented")},jt.prototype._fixedNafMul=function(t,e){Ut(t.precomputed);var r=t._getDoubles(),n=Tt(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var c=s+r.step-1;c>=s;c--)o=(o<<1)+n[c];a.push(o)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=i;l>0;l--){for(s=0;s<a.length;s++)(o=a[s])===l?h=h.mixedAdd(r.points[s]):o===-l&&(h=h.mixedAdd(r.points[s].neg()));u=u.add(h)}return u.toP()},jt.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=Tt(e,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var u=s[a];Ut(0!==u),o="affine"===t.type?u>0?o.mixedAdd(i[u-1>>1]):o.mixedAdd(i[-u-1>>1].neg()):u>0?o.add(i[u-1>>1]):o.add(i[-u-1>>1].neg())}return"affine"===t.type?o.toP():o},jt.prototype._wnafMulAdd=function(t,e,r,n,i){var s,o,a,c=this._wnafT1,u=this._wnafT2,h=this._wnafT3,l=0;for(s=0;s<n;s++){var f=(a=e[s])._getNAFPoints(t);c[s]=f.wnd,u[s]=f.points}for(s=n-1;s>=1;s-=2){var d=s-1,p=s;if(1===c[d]&&1===c[p]){var g=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(g[1]=e[d].add(e[p]),g[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(g[1]=e[d].toJ().mixedAdd(e[p]),g[2]=e[d].add(e[p].neg())):(g[1]=e[d].toJ().mixedAdd(e[p]),g[2]=e[d].toJ().mixedAdd(e[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=Lt(r[d],r[p]);for(l=Math.max(v[0].length,l),h[d]=new Array(l),h[p]=new Array(l),o=0;o<l;o++){var y=0|v[0][o],w=0|v[1][o];h[d][o]=m[3*(y+1)+(w+1)],h[p][o]=0,u[d]=g}}else h[d]=Tt(r[d],c[d],this._bitLength),h[p]=Tt(r[p],c[p],this._bitLength),l=Math.max(h[d].length,l),l=Math.max(h[p].length,l)}var b=this.jpoint(null,null,null),_=this._wnafT4;for(s=l;s>=0;s--){for(var E=0;s>=0;){var A=!0;for(o=0;o<n;o++)_[o]=0|h[o][s],0!==_[o]&&(A=!1);if(!A)break;E++,s--}if(s>=0&&E++,b=b.dblp(E),s<0)break;for(o=0;o<n;o++){var I=_[o];0!==I&&(I>0?a=u[o][I-1>>1]:I<0&&(a=u[o][-I-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(s=0;s<n;s++)u[s]=null;return i?b:b.toP()},jt.BasePoint=Bt,Bt.prototype.eq=function(){throw new Error("Not implemented")},Bt.prototype.validate=function(){return this.curve.validate(this)},jt.prototype.decodePoint=function(t,e){t=Mt.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?Ut(t[t.length-1]%2==0):7===t[0]&&Ut(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},Bt.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Bt.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},Bt.prototype.encode=function(t,e){return Mt.encode(this._encode(e),t)},Bt.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Bt.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},Bt.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var s=0;s<t;s++)n=n.dbl();r.push(n)}return{step:t,points:r}},Bt.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},Bt.prototype._getBeta=function(){return null},Bt.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var qt=kt((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),zt=Mt.assert;function Ft(t){Dt.call(this,"short",t),this.a=new(Nt())(t.a,16).toRed(this.red),this.b=new(Nt())(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}qt(Ft,Dt);var Ht=Ft;function Kt(t,e,r,n){Dt.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(Nt())(e,16),this.y=new(Nt())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Gt(t,e,r,n){Dt.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(Nt())(0)):(this.x=new(Nt())(e,16),this.y=new(Nt())(r,16),this.z=new(Nt())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ft.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new(Nt())(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new(Nt())(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],zt(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new(Nt())(t.a,16),b:new(Nt())(t.b,16)}})):this._getEndoBasis(r)}}},Ft.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:Nt().mont(t),r=new(Nt())(2).toRed(e).redInvm(),n=r.redNeg(),i=new(Nt())(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Ft.prototype._getEndoBasis=function(t){for(var e,r,n,i,s,o,a,c,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=t,f=this.n.clone(),d=new(Nt())(1),p=new(Nt())(0),g=new(Nt())(0),m=new(Nt())(1),v=0;0!==l.cmpn(0);){var y=f.div(l);c=f.sub(y.mul(l)),u=g.sub(y.mul(d));var w=m.sub(y.mul(p));if(!n&&c.cmp(h)<0)e=a.neg(),r=d,n=c.neg(),i=u;else if(n&&2==++v)break;a=c,f=l,l=c,g=d,d=u,m=p,p=w}s=c.neg(),o=u;var b=n.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(b)>=0&&(s=e,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},Ft.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),u=s.mul(n.b);return{k1:t.sub(o).sub(a),k2:c.add(u).neg()}},Ft.prototype.pointFromX=function(t,e){(t=new(Nt())(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},Ft.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},Ft.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),h=0;h<2*s;h++)n[h]=null,i[h]=null;return u},qt(Kt,Dt.BasePoint),Ft.prototype.point=function(t,e,r){return new Kt(this,t,e,r)},Ft.prototype.pointFromJSON=function(t,e){return Kt.fromJSON(this,t,e)},Kt.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},Kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Kt.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var s=e[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Kt.prototype.isInfinity=function(){return this.inf},Kt.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Kt.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Kt.prototype.getX=function(){return this.x.fromRed()},Kt.prototype.getY=function(){return this.y.fromRed()},Kt.prototype.mul=function(t){return t=new(Nt())(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Kt.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Kt.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Kt.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Kt.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},Kt.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},qt(Gt,Dt.BasePoint),Ft.prototype.jpoint=function(t,e,r){return new Gt(this,t,e,r)},Gt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},Gt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Gt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),f=c.redSqr().redIAdd(h).redISub(l).redISub(l),d=c.redMul(l.redISub(f)).redISub(s.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},Gt.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,s=t.y.redMul(e).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),h=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(l,f,d)},Gt.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(e=0;e<t;e++){var h=s.redSqr(),l=u.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),p=s.redMul(l),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),v=d.redMul(m);v=v.redIAdd(v).redISub(f);var y=u.redMul(a);e+1<t&&(c=c.redMul(f)),s=g,a=y,u=v}return this.curve.jpoint(s,u.redMul(i),a)},Gt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Gt.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=c,e=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),t=g.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},Gt.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);t=c;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var m=l.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),e=d.redMul(p.redISub(t)).redISub(m)}return this.curve.jpoint(t,e,r)},Gt.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=e.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(i)),c=e.redAdd(e),u=(c=c.redIAdd(c)).redMul(o),h=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(h),f=o.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,p)},Gt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),s=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),h=e.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},Gt.prototype.mul=function(t,e){return t=new(Nt())(t,e),this.curve._wnafMul(this,t)},Gt.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},Gt.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Gt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Gt.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Wt=kt((function(t,e){var r=e;r.base=Dt,r.short=Ht,r.mont=null,r.edwards=null})),$t=kt((function(t,e){var r,n=e,i=Mt.assert;function s(t){"short"===t.type?this.curve=new Wt.short(t):"edwards"===t.type?this.curve=new Wt.edwards(t):this.curve=new Wt.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new s(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ft().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ft().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ft().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ft().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ft().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ft().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ft().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ft().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Yt(t){if(!(this instanceof Yt))return new Yt(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ct.toArray(t.entropy,t.entropyEnc||"hex"),r=Ct.toArray(t.nonce,t.nonceEnc||"hex"),n=Ct.toArray(t.pers,t.persEnc||"hex");Rt(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Jt=Yt;Yt.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Yt.prototype._hmac=function(){return new(ft().hmac)(this.hash,this.K)},Yt.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},Yt.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=Ct.toArray(t,e),r=Ct.toArray(r,n),Rt(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},Yt.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=Ct.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this._reseed++,Ct.encode(s,e)};var Vt=Mt.assert;function Qt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Xt=Qt;Qt.fromPublic=function(t,e,r){return e instanceof Qt?e:new Qt(t,{pub:e,pubEnc:r})},Qt.fromPrivate=function(t,e,r){return e instanceof Qt?e:new Qt(t,{priv:e,privEnc:r})},Qt.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Qt.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Qt.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Qt.prototype._importPrivate=function(t,e){this.priv=new(Nt())(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Qt.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?Vt(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Vt(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Qt.prototype.derive=function(t){return t.validate()||Vt(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Qt.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Qt.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Qt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Zt=Mt.assert;function te(t,e){if(t instanceof te)return t;this._importDER(t,e)||(Zt(t.r&&t.s,"Signature without r or s"),this.r=new(Nt())(t.r,16),this.s=new(Nt())(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var ee=te;function re(){this.place=0}function ne(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return!(i<=127)&&(e.place=o,i)}function ie(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function se(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}te.prototype._importDER=function(t,e){t=Mt.toArray(t,e);var r=new re;if(48!==t[r.place++])return!1;var n=ne(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=ne(t,r);if(!1===i)return!1;var s=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var o=ne(t,r);if(!1===o)return!1;if(t.length!==o+r.place)return!1;var a=t.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(Nt())(s),this.s=new(Nt())(a),this.recoveryParam=null,!0},te.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=ie(e),r=ie(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];se(n,e.length),(n=n.concat(e)).push(2),se(n,r.length);var i=n.concat(r),s=[48];return se(s,i.length),s=s.concat(i),Mt.encode(s,t)};var oe=function(){throw new Error("unsupported")},ae=Mt.assert;function ce(t){if(!(this instanceof ce))return new ce(t);"string"==typeof t&&(ae(Object.prototype.hasOwnProperty.call($t,t),"Unknown curve "+t),t=$t[t]),t instanceof $t.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ue=ce;ce.prototype.keyPair=function(t){return new Xt(this,t)},ce.prototype.keyFromPrivate=function(t,e){return Xt.fromPrivate(this,t,e)},ce.prototype.keyFromPublic=function(t,e){return Xt.fromPublic(this,t,e)},ce.prototype.genKeyPair=function(t){t||(t={});for(var e=new Jt({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||oe(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(Nt())(2));;){var i=new(Nt())(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},ce.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},ce.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new(Nt())(t,16));for(var i=this.n.byteLength(),s=e.getPrivate().toArray("be",i),o=t.toArray("be",i),a=new Jt({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(Nt())(1)),u=0;;u++){var h=n.k?n.k(u):new(Nt())(a.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(c)>=0)){var l=this.g.mul(h);if(!l.isInfinity()){var f=l.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=h.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(l.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new ee({r:d,s:p,recoveryParam:g})}}}}}},ce.prototype.verify=function(t,e,r,n){t=this._truncateToN(new(Nt())(t,16)),r=this.keyFromPublic(r,n);var i=(e=new ee(e,"hex")).r,s=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},ce.prototype.recoverPubKey=function(t,e,r,n){ae((3&r)===r,"The recovery param is more than two bits"),e=new ee(e,n);var i=this.n,s=new(Nt())(t),o=e.r,a=e.s,c=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var h=e.r.invm(i),l=i.sub(s).mul(h).umod(i),f=a.mul(h).umod(i);return this.g.mulAdd(l,o,f)},ce.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new ee(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(t){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var he=kt((function(t,e){var r=e;r.version="6.5.4",r.utils=Mt,r.rand=function(){throw new Error("unsupported")},r.curve=Wt,r.curves=$t,r.ec=ue,r.eddsa=null})).ec;const le=new i.Yd("signing-key/5.7.0");let fe=null;function de(){return fe||(fe=new he("secp256k1")),fe}class pe{constructor(t){o(this,"curve","secp256k1"),o(this,"privateKey",(0,P.Dv)(t)),32!==(0,P.E1)(this.privateKey)&&le.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const e=de().keyFromPrivate((0,P.lE)(this.privateKey));o(this,"publicKey","0x"+e.getPublic(!1,"hex")),o(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),o(this,"_isSigningKey",!0)}_addPoint(t){const e=de().keyFromPublic((0,P.lE)(this.publicKey)),r=de().keyFromPublic((0,P.lE)(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=de().keyFromPrivate((0,P.lE)(this.privateKey)),r=(0,P.lE)(t);32!==r.length&&le.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return(0,P.N)({recoveryParam:n.recoveryParam,r:(0,P.$m)("0x"+n.r.toString(16),32),s:(0,P.$m)("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=de().keyFromPrivate((0,P.lE)(this.privateKey)),r=de().keyFromPublic((0,P.lE)(ge(t)));return(0,P.$m)("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function ge(t,e){const r=(0,P.lE)(t);if(32===r.length){const t=new pe(r);return e?"0x"+de().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?(0,P.Dv)(r):"0x"+de().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+de().keyFromPublic(r).getPublic(!0,"hex"):(0,P.Dv)(r):le.throwArgumentError("invalid public or private key","key","[REDACTED]")}const me=new i.Yd("transactions/5.7.0");var ve;function ye(t){return"0x"===t?null:(0,It.getAddress)(t)}function we(t){return"0x"===t?St:n.O$.from(t)}function be(t,e){return function(t){const e=ge(t);return(0,It.getAddress)((0,P.p3)((0,B.w)((0,P.p3)(e,1)),12))}(function(t,e){const r=(0,P.N)(e),n={r:(0,P.lE)(r.r),s:(0,P.lE)(r.s)};return"0x"+de().recoverPubKey((0,P.lE)(t),n,r.recoveryParam).encode("hex",!1)}((0,P.lE)(t),e))}function _e(t,e){const r=(0,P.G1)(n.O$.from(t).toHexString());return r.length>32&&me.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Ee(t,e){return{address:(0,It.getAddress)(t),storageKeys:(e||[]).map(((e,r)=>(32!==(0,P.E1)(e)&&me.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e),e.toLowerCase())))}}function Ae(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&me.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),Ee(t[0],t[1])):Ee(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return Ee(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function Ie(t){return Ae(t).map((t=>[t.address,t.storageKeys]))}function Se(t,e){if(null!=t.gasPrice){const e=n.O$.from(t.gasPrice),r=n.O$.from(t.maxFeePerGas||0);e.eq(r)||me.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[_e(t.chainId||0,"chainId"),_e(t.nonce||0,"nonce"),_e(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_e(t.maxFeePerGas||0,"maxFeePerGas"),_e(t.gasLimit||0,"gasLimit"),null!=t.to?(0,It.getAddress)(t.to):"0x",_e(t.value||0,"value"),t.data||"0x",Ie(t.accessList||[])];if(e){const t=(0,P.N)(e);r.push(_e(t.recoveryParam,"recoveryParam")),r.push((0,P.G1)(t.r)),r.push((0,P.G1)(t.s))}return(0,P.xs)(["0x02",Pt.c(r)])}function Pe(t,e){const r=[_e(t.chainId||0,"chainId"),_e(t.nonce||0,"nonce"),_e(t.gasPrice||0,"gasPrice"),_e(t.gasLimit||0,"gasLimit"),null!=t.to?(0,It.getAddress)(t.to):"0x",_e(t.value||0,"value"),t.data||"0x",Ie(t.accessList||[])];if(e){const t=(0,P.N)(e);r.push(_e(t.recoveryParam,"recoveryParam")),r.push((0,P.G1)(t.r)),r.push((0,P.G1)(t.s))}return(0,P.xs)(["0x01",Pt.c(r)])}function Oe(t,e,r){try{const r=we(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(t){me.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=(0,P.$m)(e[1],32),t.s=(0,P.$m)(e[2],32);try{const e=(0,B.w)(r(t));t.from=be(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){}}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(ve||(ve={}));const Ne=new i.Yd(At);class ke{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return t.transaction={hash:s,type:c,accessList:ke.allowNull(this.accessList.bind(this),null),blockHash:ke.allowNull(s,null),blockNumber:ke.allowNull(a,null),transactionIndex:ke.allowNull(a,null),confirmations:ke.allowNull(a,null),from:e,gasPrice:ke.allowNull(r),maxPriorityFeePerGas:ke.allowNull(r),maxFeePerGas:ke.allowNull(r),gasLimit:r,to:ke.allowNull(e,null),value:r,nonce:a,data:i,r:ke.allowNull(this.uint256),s:ke.allowNull(this.uint256),v:ke.allowNull(a),creates:ke.allowNull(e,null),raw:ke.allowNull(i)},t.transactionRequest={from:ke.allowNull(e),nonce:ke.allowNull(a),gasLimit:ke.allowNull(r),gasPrice:ke.allowNull(r),maxPriorityFeePerGas:ke.allowNull(r),maxFeePerGas:ke.allowNull(r),to:ke.allowNull(e),value:ke.allowNull(r),data:ke.allowNull((t=>this.data(t,!0))),type:ke.allowNull(a),accessList:ke.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:e,topics:ke.arrayOf(s),data:i,logIndex:a,blockHash:s},t.receipt={to:ke.allowNull(this.address,null),from:ke.allowNull(this.address,null),contractAddress:ke.allowNull(e,null),transactionIndex:a,root:ke.allowNull(o),gasUsed:r,logsBloom:ke.allowNull(i),blockHash:s,transactionHash:s,logs:ke.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:ke.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:ke.allowNull(r),status:ke.allowNull(a),type:c},t.block={hash:ke.allowNull(s),parentHash:s,number:a,timestamp:a,nonce:ke.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:ke.allowNull(e),extraData:i,transactions:ke.allowNull(ke.arrayOf(s)),baseFeePerGas:ke.allowNull(r)},t.blockWithTransactions=u(t.block),t.blockWithTransactions.transactions=ke.allowNull(ke.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:ke.allowNull(n,void 0),toBlock:ke.allowNull(n,void 0),blockHash:ke.allowNull(s,void 0),address:ke.allowNull(e,void 0),topics:ke.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:ke.allowNull(a),blockHash:ke.allowNull(s),transactionIndex:a,removed:ke.allowNull(this.boolean.bind(this)),address:e,data:ke.allowFalsish(i,"0x"),topics:ke.arrayOf(s),transactionHash:s,logIndex:a},t}accessList(t){return Ae(t||[])}number(t){return"0x"===t?0:n.O$.from(t).toNumber()}type(t){return"0x"===t||null==t?0:n.O$.from(t).toNumber()}bigNumber(t){return n.O$.from(t)}boolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),(0,P.A7)(t))?t.toLowerCase():Ne.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+t);return r}address(t){return(0,It.getAddress)(t)}callAddress(t){if(!(0,P.A7)(t,32))return null;const e=(0,It.getAddress)((0,P.p3)(t,12));return"0x0000000000000000000000000000000000000000"===e?null:e}contractAddress(t){return(0,It.getContractAddress)(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if("number"==typeof t||(0,P.A7)(t))return(0,P.$P)(t);throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);return 32!==(0,P.E1)(r)?Ne.throwArgumentError("invalid hash","value",t):r}difficulty(t){if(null==t)return null;const e=n.O$.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!(0,P.A7)(t))throw new Error("invalid uint256");return(0,P.$m)(t,32)}_block(t,e){null!=t.author&&null==t.miner&&(t.miner=t.author);const r=null!=t._difficulty?t._difficulty:t.difficulty,i=ke.check(e,t);return i._difficulty=null==r?null:n.O$.from(r),i}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return ke.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&n.O$.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);const e=ke.check(this.formats.transaction,t);if(null!=t.chainId){let r=t.chainId;(0,P.A7)(r)&&(r=n.O$.from(r).toNumber()),e.chainId=r}else{let r=t.networkId;null==r&&null==e.v&&(r=t.chainId),(0,P.A7)(r)&&(r=n.O$.from(r).toNumber()),"number"!=typeof r&&null!=e.v&&(r=(e.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),e.chainId=r}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return function(t){const e=(0,P.lE)(t);if(e[0]>127)return function(t){const e=Pt.J(t);9!==e.length&&6!==e.length&&me.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:we(e[0]).toNumber(),gasPrice:we(e[1]),gasLimit:we(e[2]),to:ye(e[3]),value:we(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=n.O$.from(e[6]).toNumber()}catch(t){return r}if(r.r=(0,P.$m)(e[7],32),r.s=(0,P.$m)(e[8],32),n.O$.from(r.r).isZero()&&n.O$.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);0!==r.chainId&&(i.push((0,P.Dv)(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const s=(0,B.w)(Pt.c(i));try{r.from=be(s,{r:(0,P.Dv)(r.r),s:(0,P.Dv)(r.s),recoveryParam:n})}catch(t){}r.hash=(0,B.w)(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){const e=Pt.J(t.slice(1));8!==e.length&&11!==e.length&&me.throwArgumentError("invalid component count for transaction type: 1","payload",(0,P.Dv)(t));const r={type:1,chainId:we(e[0]).toNumber(),nonce:we(e[1]).toNumber(),gasPrice:we(e[2]),gasLimit:we(e[3]),to:ye(e[4]),value:we(e[5]),data:e[6],accessList:Ae(e[7])};return 8===e.length||(r.hash=(0,B.w)(t),Oe(r,e.slice(8),Pe)),r}(e);case 2:return function(t){const e=Pt.J(t.slice(1));9!==e.length&&12!==e.length&&me.throwArgumentError("invalid component count for transaction type: 2","payload",(0,P.Dv)(t));const r=we(e[2]),n=we(e[3]),i={type:2,chainId:we(e[0]).toNumber(),nonce:we(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:we(e[4]),to:ye(e[5]),value:we(e[6]),data:e[7],accessList:Ae(e[8])};return 9===e.length||(i.hash=(0,B.w)(t),Oe(i,e.slice(9),Se)),i}(e)}return me.throwError(`unsupported transaction type: ${e[0]}`,i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}(t)}receiptLog(t){return ke.check(this.formats.receiptLog,t)}receipt(t){const e=ke.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=n.O$.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&Ne.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):Ne.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&Ne.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return ke.check(this.formats.filter,t)}filterLog(t){return ke.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const n in t)try{const i=t[n](e[n]);void 0!==i&&(r[n]=i)}catch(t){throw t.checkKey=n,t.checkValue=e[n],t}return r}static allowNull(t,e){return function(r){return null==r?e:t(r)}}static allowFalsish(t,e){return function(r){return r?t(r):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const r=[];return e.forEach((function(e){r.push(t(e))})),r}}}function Re(t){return t&&"function"==typeof t.isCommunityResource}function xe(t){return Re(t)&&t.isCommunityResource()}let Ce=!1;function Me(){Ce||(Ce=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Te=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const Le=new i.Yd(At);function Ue(t){return null==t?"null":(32!==(0,P.E1)(t)&&Le.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function je(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[Ue(t)]=!0}));const r=Object.keys(e);return r.sort(),r.join("|")}return Ue(t)})).join("&")}function De(t){if("string"==typeof t){if(t=t.toLowerCase(),32===(0,P.E1)(t))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+je(t);if(m.isForkEvent(t))throw Le.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+je(t.topics||[])}throw new Error("invalid event - "+t)}function Be(){return(new Date).getTime()}function qe(t){return new Promise((e=>{setTimeout(e,t)}))}const ze=["block","network","pending","poll"];class Fe{constructor(t,e,r){o(this,"tag",t),o(this,"listener",e),o(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],r=""===(n=t[2])?[]:n.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}));var n;const i={};return r.length>0&&(i.topics=r),e&&"*"!==e&&(i.address=e),i}pollable(){return this.tag.indexOf(":")>=0||ze.indexOf(this.tag)>=0}}const He={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Ke(t){return(0,P.$m)(n.O$.from(t).toHexString(),32)}function Ge(t){return R.encode((0,P.zo)([t,(0,P.p3)(dt(dt(t)),0,4)]))}const We=new RegExp("^(ipfs)://(.*)$","i"),$e=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),We,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Ye(t,e){try{return D(Je(t,e))}catch(t){}return null}function Je(t,e){if("0x"===t)return null;const r=n.O$.from((0,P.p3)(t,e,e+32)).toNumber(),i=n.O$.from((0,P.p3)(t,r,r+32)).toNumber();return(0,P.p3)(t,r+32,r+32+i)}function Ve(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Le.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function Qe(t){const e=(0,P.lE)(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function Xe(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}function Ze(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=(0,P.lE)(t[n]);e[n]=Qe(r),e.push(Qe(i.length)),e.push(Xe(i)),r+=32+32*Math.ceil(i.length/32)}return(0,P.xs)(e)}class tr{constructor(t,e,r,n){o(this,"provider",t),o(this,"name",r),o(this,"address",t.formatter.address(e)),o(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((t=>n.O$.from(t).eq(1))).catch((t=>{if(t.code===i.Yd.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,t}))),this._supportsEip2544}_fetch(t,e){return Te(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:!0,data:(0,P.xs)([t,ht(this.name),e||"0x"])};let n=!1;var s;(yield this.supportsWildcard())&&(n=!0,r.data=(0,P.xs)(["0x9061b923",Ze([(s=this.name,(0,P.Dv)((0,P.zo)(ut(s).map((t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e}))))+"00"),r.data])]));try{let t=yield this.provider.call(r);return(0,P.lE)(t).length%32==4&&Le.throwError("resolver threw error",i.Yd.errors.CALL_EXCEPTION,{transaction:r,data:t}),n&&(t=Je(t,0)),t}catch(t){if(t.code===i.Yd.errors.CALL_EXCEPTION)return null;throw t}}))}_fetchBytes(t,e){return Te(this,void 0,void 0,(function*(){const r=yield this._fetch(t,e);return null!=r?Je(r,0):null}))}_getAddress(t,e){const r=He[String(t)];if(null==r&&Le.throwError(`unsupported coin type: ${t}`,i.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===r.ilk)return this.provider.formatter.address(e);const n=(0,P.lE)(e);if(null!=r.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return Ge((0,P.zo)([[r.p2pkh],"0x"+t[2]]))}}if(null!=r.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return Ge((0,P.zo)([[r.p2sh],"0x"+t[2]]))}}if(null!=r.prefix){const t=n[1];let e=n[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&n.length===2+t&&t>=1&&t<=75){const t=Et().toWords(n.slice(2));return t.unshift(e),Et().encode(r.prefix,t)}}return null}getAddress(t){return Te(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t=yield this._fetch("0x3b3b57de");return"0x"===t||"0x0000000000000000000000000000000000000000000000000000000000000000"===t?null:this.provider.formatter.callAddress(t)}catch(t){if(t.code===i.Yd.errors.CALL_EXCEPTION)return null;throw t}const e=yield this._fetchBytes("0xf1cb7e06",Ke(t));if(null==e||"0x"===e)return null;const r=this._getAddress(t,e);return null==r&&Le.throwError("invalid or unsupported coin data",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),r}))}getAvatar(){return Te(this,void 0,void 0,(function*(){const t=[{type:"name",content:this.name}];try{const e=yield this.getText("avatar");if(null==e)return null;for(let r=0;r<$e.length;r++){const i=e.match($e[r]);if(null==i)continue;const s=i[1].toLowerCase();switch(s){case"https":return t.push({type:"url",content:e}),{linkage:t,url:e};case"data":return t.push({type:"data",content:e}),{linkage:t,url:e};case"ipfs":return t.push({type:"ipfs",content:e}),{linkage:t,url:Ve(e)};case"erc721":case"erc1155":{const r="erc721"===s?"0xc87b56dd":"0x0e89341c";t.push({type:s,content:e});const o=this._resolvedAddress||(yield this.getAddress()),a=(i[2]||"").split("/");if(2!==a.length)return null;const c=yield this.provider.formatter.address(a[0]),u=(0,P.$m)(n.O$.from(a[1]).toHexString(),32);if("erc721"===s){const e=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:(0,P.xs)(["0x6352211e",u])}));if(o!==e)return null;t.push({type:"owner",content:e})}else if("erc1155"===s){const e=n.O$.from(yield this.provider.call({to:c,data:(0,P.xs)(["0x00fdd58e",(0,P.$m)(o,32),u])}));if(e.isZero())return null;t.push({type:"balance",content:e.toString()})}const h={to:this.provider.formatter.address(a[0]),data:(0,P.xs)([r,u])};let l=Ye(yield this.provider.call(h),0);if(null==l)return null;t.push({type:"metadata-url-base",content:l}),"erc1155"===s&&(l=l.replace("{id}",u.substring(2)),t.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=Ve(l)),t.push({type:"metadata-url",content:l});const f=yield wt(l);if(!f)return null;t.push({type:"metadata",content:JSON.stringify(f)});let d=f.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(We))return null;t.push({type:"url-ipfs",content:d}),d=Ve(d)}return t.push({type:"url",content:d}),{linkage:t,url:d}}}}}catch(t){}return null}))}getContentHash(){return Te(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+R.encode("0x"+e[1])}const r=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const t=parseInt(r[3],16);if(r[4].length===2*t)return"ipns://"+R.encode("0x"+r[1])}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const s=t.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&68===s[1].length){const t={"=":"","+":"-","/":"_"};return"sia://"+N("0x"+s[1]).replace(/[=+\/]/g,(e=>t[e]))}return Le.throwError("invalid or unsupported content hash data",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return Te(this,void 0,void 0,(function*(){let e=j(t);e=(0,P.zo)([Ke(64),Ke(e.length),e]),e.length%32!=0&&(e=(0,P.zo)([e,(0,P.$m)("0x",32-t.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",(0,P.Dv)(e));return null==r||"0x"===r?null:D(r)}))}}let er=null,rr=1;class nr extends v{constructor(t){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),o(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=a(new.target,"getNetwork")(t);e?(o(this,"_network",e),this.emit("network",e,null)):Le.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Te(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(t){}null==t&&(t=yield this.detectNetwork()),t||Le.throwError("no network detected",i.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:o(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return bt((()=>this._ready().then((t=>t),(t=>{if(t.code!==i.Yd.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==er&&(er=new ke),er}static getNetwork(t){return S(null==t?"homestead":t)}ccipReadFetch(t,e,r){return Te(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===r.length)return null;const n=t.to.toLowerCase(),s=e.toLowerCase(),o=[];for(let t=0;t<r.length;t++){const e=r[t],a=e.replace("{sender}",n).replace("{data}",s),c=e.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:n}),u=yield wt({url:a,errorPassThrough:!0},c,((t,e)=>(t.status=e.statusCode,t)));if(u.data)return u.data;const h=u.message||"unknown error";if(u.status>=400&&u.status<500)return Le.throwError(`response not found during CCIP fetch: ${h}`,i.Yd.errors.SERVER_ERROR,{url:e,errorMessage:h});o.push(h)}return Le.throwError(`error encountered during CCIP fetch: ${o.map((t=>JSON.stringify(t))).join(", ")}`,i.Yd.errors.SERVER_ERROR,{urls:r,errorMessages:o})}))}_getInternalBlockNumber(t){return Te(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const e=this._internalBlockNumber;try{const r=yield e;if(Be()-r.respTime<=t)return r.blockNumber;break}catch(t){if(this._internalBlockNumber===e)break}}const e=Be(),r=c({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:i})=>{if(i)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),i;const s=Be();return(t=n.O$.from(t).toNumber())<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:s}}));return this._internalBlockNumber=r,r.catch((t=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return Te(this,void 0,void 0,(function*(){const t=rr++,e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){return void this.emit("error",t)}if(this._setFastBlockNumber(r),this.emit("poll",t,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Le.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Le.makeError("network block skew detected",i.Yd.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let t=this._emitted.block+1;t<=r;t++)this.emit("block",t);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&r-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+r]=t.blockNumber,this.emit(r,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":if(!t._inflight){t._inflight=!0,-2===t._lastBlockNumber&&(t._lastBlockNumber=r-1);const n=t.filter;n.fromBlock=t._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const s=this.getLogs(n).then((e=>{t._inflight=!1,0!==e.length&&e.forEach((e=>{e.blockNumber>t._lastBlockNumber&&(t._lastBlockNumber=e.blockNumber),this._emitted["b:"+e.blockHash]=e.blockNumber,this._emitted["t:"+e.transactionHash]=e.blockNumber,this.emit(n,e)}))})).catch((e=>{this.emit("error",e),t._inflight=!1}));e.push(s)}}})),this._lastBlockNumber=r,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Te(this,void 0,void 0,(function*(){return Le.throwError("provider does not support network detection",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Te(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield qe(0),this._network;const r=Le.makeError("underlying network changed",i.Yd.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",r),r}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=Be();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=Be(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,r){return Te(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return Te(this,void 0,void 0,(function*(){const s=yield this.getTransactionReceipt(t);return(s?s.confirmations:0)>=e?s:new Promise(((s,o)=>{const a=[];let c=!1;const u=function(){return!!c||(c=!0,a.forEach((t=>{t()})),!1)},h=t=>{t.confirmations<e||u()||s(t)};if(this.on(t,h),a.push((()=>{this.removeListener(t,h)})),n){let r=n.startBlock,s=null;const h=a=>Te(this,void 0,void 0,(function*(){c||(yield qe(1e3),this.getTransactionCount(n.from).then((l=>Te(this,void 0,void 0,(function*(){if(!c){if(l<=n.nonce)r=a;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}for(null==s&&(s=r-3,s<n.startBlock&&(s=n.startBlock));s<=a;){if(c)return;const r=yield this.getBlockWithTransactions(s);for(let s=0;s<r.transactions.length;s++){const a=r.transactions[s];if(a.hash===t)return;if(a.from===n.from&&a.nonce===n.nonce){if(c)return;const r=yield this.waitForTransaction(a.hash,e);if(u())return;let s="replaced";return a.data===n.data&&a.to===n.to&&a.value.eq(n.value)?s="repriced":"0x"===a.data&&a.from===a.to&&a.value.isZero()&&(s="cancelled"),void o(Le.makeError("transaction was replaced",i.Yd.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:this._wrapTransaction(a),hash:t,receipt:r}))}}s++}}c||this.once("block",h)}}))),(t=>{c||this.once("block",h)})))}));if(c)return;this.once("block",h),a.push((()=>{this.removeListener("block",h)}))}if("number"==typeof r&&r>0){const t=setTimeout((()=>{u()||o(Le.makeError("timeout exceeded",i.Yd.errors.TIMEOUT,{timeout:r}))}),r);t.unref&&t.unref(),a.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return Te(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return n.O$.from(t)}catch(e){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield c({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),s=yield this.perform("getBalance",r);try{return n.O$.from(s)}catch(t){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"getBalance",params:r,result:s,error:t})}}))}getTransactionCount(t,e){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield c({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),s=yield this.perform("getTransactionCount",r);try{return n.O$.from(s).toNumber()}catch(t){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:s,error:t})}}))}getCode(t,e){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield c({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getCode",r);try{return(0,P.Dv)(n)}catch(t){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:t})}}))}getStorageAt(t,e,r){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield c({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>(0,P.$P)(t)))}),s=yield this.perform("getStorageAt",n);try{return(0,P.Dv)(s)}catch(t){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:s,error:t})}}))}_wrapTransaction(t,e,r){if(null!=e&&32!==(0,P.E1)(e))throw new Error("invalid response - sendTransaction");const n=t;return null!=e&&t.hash!==e&&Le.throwError("Transaction hash mismatch from Provider.sendTransaction.",i.Yd.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),n.wait=(e,n)=>Te(this,void 0,void 0,(function*(){let s;null==e&&(e=1),null==n&&(n=0),0!==e&&null!=r&&(s={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r});const o=yield this._waitForTransaction(t.hash,e,n,s);return null==o&&0===e?null:(this._emitted["t:"+t.hash]=o.blockNumber,0===o.status&&Le.throwError("transaction failed",i.Yd.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:o}),o)})),n}sendTransaction(t){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>(0,P.Dv)(t))),r=this.formatter.transaction(t);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(t){throw t.transaction=r,t.transactionHash=r.hash,t}}))}_getTransactionRequest(t){return Te(this,void 0,void 0,(function*(){const e=yield t,r={};return["from","to"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?n.O$.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(r.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?(0,P.Dv)(t):null)))})),this.formatter.transactionRequest(yield c(r))}))}_getFilter(t){return Te(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((r=>{null!=t[r]&&(e[r]=t[r])})),["fromBlock","toBlock"].forEach((r=>{null!=t[r]&&(e[r]=this._getBlockTag(t[r]))})),this.formatter.filter(yield c(e))}))}_call(t,e,r){return Te(this,void 0,void 0,(function*(){r>=10&&Le.throwError("CCIP read exceeded maximum redirections",i.Yd.errors.SERVER_ERROR,{redirects:r,transaction:t});const s=t.to,o=yield this.perform("call",{transaction:t,blockTag:e});if(r>=0&&"latest"===e&&null!=s&&"0x556f1830"===o.substring(0,10)&&(0,P.E1)(o)%32==4)try{const a=(0,P.p3)(o,4),c=(0,P.p3)(a,0,32);n.O$.from(c).eq(s)||Le.throwError("CCIP Read sender did not match",i.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:o});const u=[],h=n.O$.from((0,P.p3)(a,32,64)).toNumber(),l=n.O$.from((0,P.p3)(a,h,h+32)).toNumber(),f=(0,P.p3)(a,h+32);for(let e=0;e<l;e++){const r=Ye(f,32*e);null==r&&Le.throwError("CCIP Read contained corrupt URL string",i.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:o}),u.push(r)}const d=Je(a,64);n.O$.from((0,P.p3)(a,100,128)).isZero()||Le.throwError("CCIP Read callback selector included junk",i.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:o});const p=(0,P.p3)(a,96,100),g=Je(a,128),m=yield this.ccipReadFetch(t,d,u);null==m&&Le.throwError("CCIP Read disabled or provided no URLs",i.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:o});const v={to:s,data:(0,P.xs)([p,Ze([m,g])])};return this._call(v,e,r+1)}catch(t){if(t.code===i.Yd.errors.SERVER_ERROR)throw t}try{return(0,P.Dv)(o)}catch(r){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:e},result:o,error:r})}}))}call(t,e){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield c({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(t){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield c({transaction:this._getTransactionRequest(t)}),r=yield this.perform("estimateGas",e);try{return n.O$.from(r)}catch(t){return Le.throwError("bad result from backend",i.Yd.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:t})}}))}_getAddress(t){return Te(this,void 0,void 0,(function*(){"string"!=typeof(t=yield t)&&Le.throwArgumentError("invalid address or ENS name","name",t);const e=yield this.resolveName(t);return null==e&&Le.throwError("ENS name not configured",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return Te(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let r=-128;const n={includeTransactions:!!e};if((0,P.A7)(t,32))n.blockHash=t;else try{n.blockTag=yield this._getBlockTag(t),(0,P.A7)(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(e){Le.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return bt((()=>Te(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(null==t)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(e){let e=null;for(let r=0;r<t.transactions.length;r++){const n=t.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}}const r=this.formatter.blockWithTransactions(t);return r.transactions=r.transactions.map((t=>this._wrapTransaction(t))),r}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return Te(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return bt((()=>Te(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return Te(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return bt((()=>Te(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(t){return Te(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield c({filter:this._getFilter(t)}),r=yield this.perform("getLogs",e);return r.forEach((t=>{null==t.removed&&(t.removed=!1)})),ke.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return Te(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return Te(this,void 0,void 0,(function*(){if("number"==typeof(t=yield t)&&t<0){t%1&&Le.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return Te(this,void 0,void 0,(function*(){let e=t;for(;;){if(""===e||"."===e)return null;if("eth"!==t&&"eth"===e)return null;const r=yield this._getResolver(e,"getResolver");if(null!=r){const n=new tr(this,r,t);return e===t||(yield n.supportsWildcard())?n:null}e=e.split(".").slice(1).join(".")}}))}_getResolver(t,e){return Te(this,void 0,void 0,(function*(){null==e&&(e="ENS");const r=yield this.getNetwork();r.ensAddress||Le.throwError("network does not support ENS",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:e,network:r.name});try{const e=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+ht(t).substring(2)});return this.formatter.callAddress(e)}catch(t){}return null}))}resolveName(t){return Te(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if((0,P.A7)(t))throw e}"string"!=typeof t&&Le.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return Te(this,void 0,void 0,(function*(){t=yield t;const e=(t=this.formatter.address(t)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(e,"lookupAddress");if(null==r)return null;const n=Ye(yield this.call({to:r,data:"0x691f3431"+ht(e).substring(2)}),0);return(yield this.resolveName(n))!=t?null:n}))}getAvatar(t){return Te(this,void 0,void 0,(function*(){let e=null;if((0,P.A7)(t)){const r=this.formatter.address(t).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;e=new tr(this,n,r);try{const t=yield e.getAvatar();if(t)return t.url}catch(t){if(t.code!==i.Yd.errors.CALL_EXCEPTION)throw t}try{const t=Ye(yield this.call({to:n,data:"0x691f3431"+ht(r).substring(2)}),0);e=yield this.getResolver(t)}catch(t){if(t.code!==i.Yd.errors.CALL_EXCEPTION)throw t;return null}}else if(e=yield this.getResolver(t),!e)return null;const r=yield e.getAvatar();return null==r?null:r.url}))}perform(t,e){return Le.throwError(t+" not implemented",i.Yd.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new Fe(De(t),e,r);return this._events.push(n),this._startEvent(n),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let r=!1,n=[],i=De(t);return this._events=this._events.filter((t=>t.tag!==i||(setTimeout((()=>{t.listener.apply(this,e)}),0),r=!0,!t.once||(n.push(t),!1)))),n.forEach((t=>{this._stopEvent(t)})),r}listenerCount(t){if(!t)return this._events.length;let e=De(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=De(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const r=[];let n=!1,i=De(t);return this._events=this._events.filter((t=>t.tag!==i||t.listener!=e||!!n||(n=!0,r.push(t),!1))),r.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const r=De(t);this._events=this._events.filter((t=>t.tag!==r||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var ir=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const sr=new i.Yd("abstract-signer/5.7.0"),or=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],ar=[i.Yd.errors.INSUFFICIENT_FUNDS,i.Yd.errors.NONCE_EXPIRED,i.Yd.errors.REPLACEMENT_UNDERPRICED];class cr{constructor(){sr.checkAbstract(new.target,cr),o(this,"_isSigner",!0)}getBalance(t){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return ir(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield c(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return ir(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield c(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return ir(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return ir(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return ir(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t)-1===or.indexOf(e)&&sr.throwArgumentError("invalid transaction key: "+e,"transaction",t);const e=u(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&sr.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return ir(this,void 0,void 0,(function*(){const e=yield c(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>ir(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&sr.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||sr.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):sr.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&sr.throwError("network does not support EIP-1559",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):sr.throwError("failed to get consistent fee data",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(ar.indexOf(t.code)>=0)throw t;return sr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&sr.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield c(e)}))}_checkProvider(t){this.provider||sr.throwError("missing provider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}function ur(t){return(0,B.w)(j(t))}const hr=new i.Yd(q),lr=new Uint8Array(32);lr.fill(0);const fr=n.O$.from(-1),dr=n.O$.from(0),pr=n.O$.from(1),gr=n.O$.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),mr=(0,P.$m)(pr.toHexString(),32),vr=(0,P.$m)(dr.toHexString(),32),yr={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},wr=["name","version","chainId","verifyingContract","salt"];function br(t){return function(e){return"string"!=typeof e&&hr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const _r={name:br("name"),version:br("version"),chainId:function(t){try{return n.O$.from(t).toString()}catch(t){}return hr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return(0,It.getAddress)(t).toLowerCase()}catch(t){}return hr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=(0,P.lE)(t);if(32!==e.length)throw new Error("bad length");return(0,P.Dv)(e)}catch(t){}return hr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Er(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],i=parseInt(e[2]||"256");(i%8!=0||i>256||e[2]&&e[2]!==String(i))&&hr.throwArgumentError("invalid numeric width","type",t);const s=gr.mask(r?i-1:i),o=r?s.add(pr).mul(fr):dr;return function(e){const r=n.O$.from(e);return(r.lt(o)||r.gt(s))&&hr.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),(0,P.$m)(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&hr.throwArgumentError("invalid bytes width","type",t),function(e){return(0,P.lE)(e).length!==r&&hr.throwArgumentError(`invalid length for ${t}`,"value",e),function(t){const e=(0,P.lE)(t),r=e.length%32;return r?(0,P.xs)([e,lr.slice(r)]):(0,P.Dv)(e)}(e)}}}switch(t){case"address":return function(t){return(0,P.$m)((0,It.getAddress)(t),32)};case"bool":return function(t){return t?mr:vr};case"bytes":return function(t){return(0,B.w)(t)};case"string":return function(t){return ur(t)}}return null}function Ar(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Ir{constructor(t){o(this,"types",Object.freeze(d(t))),o(this,"_encoderCache",{}),o(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const n in t){const i={};t[n].forEach((s=>{i[s.name]&&hr.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",t),i[s.name]=!0;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&hr.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t),Er(o)||(r[o]||hr.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t),r[o].push(n),e[n][o]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));0===i.length?hr.throwArgumentError("missing primary type","types",t):i.length>1&&hr.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),o(this,"primaryType",i[0]),function i(s,o){o[s]&&hr.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t),o[s]=!0,Object.keys(e[s]).forEach((t=>{r[t]&&(i(t,o),Object.keys(o).forEach((e=>{n[e][t]=!0})))})),delete o[s]}(this.primaryType,{});for(const e in n){const r=Object.keys(n[e]);r.sort(),this._types[e]=Ar(e,t[e])+r.map((e=>Ar(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=Er(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(B.w)),(0,B.w)((0,P.xs)(i))}}const r=this.types[t];if(r){const e=ur(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this._types[r]?(0,B.w)(n):n}));return n.unshift(e),(0,P.xs)(n)}}return hr.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||hr.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return(0,B.w)(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(Er(t))return r(t,e);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t)),{}):hr.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Ir(t)}static getPrimaryType(t){return Ir.from(t).primaryType}static hashStruct(t,e,r){return Ir.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=yr[r];n||hr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>wr.indexOf(t.name)-wr.indexOf(e.name))),Ir.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return(0,P.xs)(["0x1901",Ir.hashDomain(t),Ir.from(e).hash(r)])}static hash(t,e,r){return(0,B.w)(Ir.encode(t,e,r))}static resolveNames(t,e,r,n){return i=this,s=void 0,a=function*(){t=u(t);const i={};t.verifyingContract&&!(0,P.A7)(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const s=Ir.from(e);s.visit(r,((t,e)=>("address"!==t||(0,P.A7)(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=s.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}},new((o=void 0)||(o=Promise))((function(t,e){function r(t){try{c(a.next(t))}catch(t){e(t)}}function n(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(r,n)}c((a=a.apply(i,s||[])).next())}));var i,s,o,a}static getPayload(t,e,r){Ir.hashDomain(t);const i={},s=[];wr.forEach((e=>{const r=t[e];null!=r&&(i[e]=_r[e](r),s.push({name:e,type:yr[e]}))}));const o=Ir.from(e),a=u(e);return a.EIP712Domain?hr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return(0,P.Dv)((0,P.lE)(e));if(t.match(/^u?int/))return n.O$.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&hr.throwArgumentError("invalid string","value",e),e}return hr.throwArgumentError("unsupported type","type",t)}))}}}var Sr=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const Pr=new i.Yd(At),Or=["call","estimateGas"];function Nr(t,e){if(null==t)return null;if("string"==typeof t.message&&t.message.match("reverted")){const r=(0,P.A7)(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if("object"==typeof t){for(const r in t){const n=Nr(t[r],e);if(n)return n}return null}if("string"==typeof t)try{return Nr(JSON.parse(t),e)}catch(t){}return null}function kr(t,e,r){const n=r.transaction||r.signedTransaction;if("call"===t){const t=Nr(e,!0);if(t)return t.data;Pr.throwError("missing revert data in call exception; Transaction reverted without a reason string",i.Yd.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if("estimateGas"===t){let r=Nr(e.body,!1);null==r&&(r=Nr(e,!1)),r&&Pr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:t,transaction:n,error:e})}let s=e.message;throw e.code===i.Yd.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?s=e.error.message:"string"==typeof e.body?s=e.body:"string"==typeof e.responseText&&(s=e.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Pr.throwError("insufficient funds for intrinsic transaction cost",i.Yd.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),s.match(/nonce (is )?too low/i)&&Pr.throwError("nonce has already been used",i.Yd.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Pr.throwError("replacement fee too low",i.Yd.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),s.match(/only replay-protected/i)&&Pr.throwError("legacy pre-eip-155 transactions not supported",i.Yd.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),Or.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Pr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function Rr(t){return new Promise((function(e){setTimeout(e,t)}))}function xr(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Cr(t){return t?t.toLowerCase():t}const Mr={};class Tr extends cr{constructor(t,e,r){if(super(),t!==Mr)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");o(this,"provider",e),null==r&&(r=0),"string"==typeof r?(o(this,"_address",this.provider.formatter.address(r)),o(this,"_index",null)):"number"==typeof r?(o(this,"_index",r),o(this,"_address",null)):Pr.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(t){return Pr.throwError("cannot alter JSON-RPC Signer connection",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Lr(Mr,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&Pr.throwError("unknown account #"+this._index,i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=u(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const r=u(t);r.from=e,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>Sr(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&Pr.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),c({tx:c(t),sender:e}).then((({tx:e,sender:r})=>{null!=e.from?e.from.toLowerCase()!==r&&Pr.throwArgumentError("from address mismatch","transaction",t):e.from=r;const n=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>("string"==typeof t.message&&t.message.match(/user denied/i)&&Pr.throwError("user rejected transaction",i.Yd.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:e}),kr("sendTransaction",t,n))))}))}signTransaction(t){return Pr.throwError("signing transactions is unsupported",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return Sr(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(t);try{return yield bt((()=>Sr(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(null!==t)return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(t){throw t.transactionHash=r,t}}))}signMessage(t){return Sr(this,void 0,void 0,(function*(){const e="string"==typeof t?j(t):t,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[(0,P.Dv)(e),r.toLowerCase()])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&Pr.throwError("user rejected signing",i.Yd.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:t}),e}}))}_legacySignMessage(t){return Sr(this,void 0,void 0,(function*(){const e="string"==typeof t?j(t):t,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),(0,P.Dv)(e)])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&Pr.throwError("user rejected signing",i.Yd.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:t}),e}}))}_signTypedData(t,e,r){return Sr(this,void 0,void 0,(function*(){const n=yield Ir.resolveNames(t,e,r,(t=>this.provider.resolveName(t))),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Ir.getPayload(n.domain,e,n.value))])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Pr.throwError("user rejected signing",i.Yd.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:n.domain,types:e,value:n.value}}),t}}))}unlock(t){return Sr(this,void 0,void 0,(function*(){const e=this.provider,r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class Lr extends Tr{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const Ur={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class jr extends nr{constructor(t,e){let r=e;null==r&&(r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(r),t||(t=a(this.constructor,"defaultUrl")()),o(this,"connection","string"==typeof t?Object.freeze({url:t}):Object.freeze(u(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Sr(this,void 0,void 0,(function*(){yield Rr(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(null!=t){const e=a(this.constructor,"getNetwork");try{return e(n.O$.from(t).toNumber())}catch(e){return Pr.throwError("could not detect network",i.Yd.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return Pr.throwError("could not detect network",i.Yd.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new Tr(Mr,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:d(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const i=wt(this.connection,JSON.stringify(r),xr).then((t=>(this.emit("debug",{action:"response",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:r,provider:this}),t}));return n&&(this._cache[t]=i,setTimeout((()=>{this._cache[t]=null}),0)),i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Cr(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Cr(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Cr(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Cr(e.address),(0,P.$m)(e.position,32),e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[a(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[a(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Cr(e.filter.address)),["eth_getLogs",[e.filter]]}return null}perform(t,e){return Sr(this,void 0,void 0,(function*(){if("call"===t||"estimateGas"===t){const t=e.transaction;if(t&&null!=t.type&&n.O$.from(t.type).isZero()&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((e=u(e)).transaction=u(t),delete e.transaction.type)}}const r=this.prepareRequest(t,e);null==r&&Pr.throwError(t+" not implemented",i.Yd.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(r[0],r[1])}catch(r){return kr(t,r,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){return function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;let n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return Rr(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((t=>{}))}(),r})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const r=u(Ur);if(e)for(const t in e)e[t]&&(r[t]=!0);var i,o;o=r,(i=t)&&"object"==typeof i||s.throwArgumentError("invalid object","object",i),Object.keys(i).forEach((t=>{o[t]||s.throwArgumentError("invalid object key - "+t,"transaction:"+t,i)}));const a={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const r=(0,P.$P)(n.O$.from(t[e]));"gasLimit"===e&&(e="gas"),a[e]=r})),["from","to","data"].forEach((function(e){null!=t[e]&&(a[e]=(0,P.Dv)(t[e]))})),t.accessList&&(a.accessList=Ae(t.accessList)),a}}let Dr=null;try{if(Dr=WebSocket,null==Dr)throw new Error("inject please")}catch(t){const e=new i.Yd(At);Dr=function(){e.throwError("WebSockets not supported in this environment",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Br=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const qr=new i.Yd(At);let zr=1;class Fr extends jr{constructor(t,e){"any"===e&&qr.throwError("WebSocketProvider does not support 'any' network yet",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof t?t:"_websocket",e),this._pollingInterval=-1,this._wsReady=!1,o(this,"_websocket","string"==typeof t?new Dr(this.connection.url):t),o(this,"_requests",{}),o(this,"_subs",{}),o(this,"_subIds",{}),o(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((t=>{this.websocket.send(this._requests[t].payload)}))},this.websocket.onmessage=t=>{const e=t.data,r=JSON.parse(e);if(null!=r.id){const t=String(r.id),n=this._requests[t];if(delete this._requests[t],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let t=null;r.error?(t=new Error(r.error.message||"unknown error"),o(t,"code",r.error.code||null),o(t,"response",e)):t=new Error("unknown error"),n.callback(t,void 0),this.emit("debug",{action:"response",error:t,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const t=this._subs[r.params.subscription];t&&t.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval((()=>{this.emit("poll")}),1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){qr.throwError("cannot reset events block on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){qr.throwError("cannot set polling interval on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Br(this,void 0,void 0,(function*(){return null}))}set polling(t){t&&qr.throwError("cannot set polling on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=zr++;return new Promise(((n,i)=>{const s=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(s),provider:this}),this._requests[String(r)]={callback:function(t,e){return t?i(t):n(e)},payload:s},this._wsReady&&this.websocket.send(s)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return Br(this,void 0,void 0,(function*(){let n=this._subIds[t];null==n&&(n=Promise.all(e).then((t=>this.send("eth_subscribe",t))),this._subIds[t]=n);const i=yield n;this._subs[i]={tag:t,processFunc:r}}))}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],(t=>{const e=n.O$.from(t.number).toNumber();this._emitted.block=e,this.emit("block",e)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(t=>{this.emit("pending",t)}));break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],(e=>{null==e.removed&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))}));break;case"tx":{const e=t=>{const e=t.hash;this.getTransactionReceipt(e).then((t=>{t&&this.emit(e,t)}))};e(t),this._subscribe("tx",["newHeads"],(t=>{this._events.filter((t=>"tx"===t.type)).forEach(e)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t)}}_stopEvent(t){let e=t.tag;if("tx"===t.type){if(this._events.filter((t=>"tx"===t.type)).length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];r&&(delete this._subIds[e],r.then((t=>{this._subs[t]&&(delete this._subs[t],this.send("eth_unsubscribe",[t]))})))}destroy(){return Br(this,void 0,void 0,(function*(){this.websocket.readyState===Dr.CONNECTING&&(yield new Promise((t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}}))),this.websocket.close(1e3)}))}}const Hr=new i.Yd(At);class Kr extends jr{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return e=this,r=void 0,s=function*(){let e=this.network;return null==e&&(e=yield t.detectNetwork.call(this),e||Hr.throwError("no network detected",i.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&(o(this,"_network",e),this.emit("network",e,null))),e},new((n=void 0)||(n=Promise))((function(t,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,a)}c((s=s.apply(e,r||[])).next())}));var e,r,n,s}}class Gr extends Kr{constructor(t,e){Hr.checkAbstract(new.target,Gr),t=a(new.target,"getNetwork")(t),e=a(new.target,"getApiKey")(e),super(a(new.target,"getUrl")(t,e),t),"string"==typeof e?o(this,"apiKey",e):null!=e&&Object.keys(e).forEach((t=>{o(this,t,e[t])}))}_startPending(){Hr.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return Hr.throwError("API provider does not support signing",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return Hr.throwError("not implemented; sub-classes must override getUrl",i.Yd.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Wr=new i.Yd(At),$r="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Yr extends Fr{constructor(t,e){const r=new Jr(t,e);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),o(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===$r}}class Jr extends Gr{static getWebSocketProvider(t,e){return new Yr(t,e)}static getApiKey(t){return null==t?$r:(t&&"string"!=typeof t&&Wr.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:Wr.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(t,r)=>(e===$r&&Me(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===$r}}const Vr=new i.Yd(At),Qr="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Xr(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Vr.throwArgumentError("unsupported network","name",t)}class Zr extends Gr{isCommunityResource(){return this.apiKey===Qr}static getApiKey(t){return null==t?Qr:t}static getUrl(t,e){null==e&&(e=Qr);const r={allowGzip:!0,url:"https://"+Xr(t.name)+e,throttleCallback:(t,r)=>(e.apiKey===Qr&&Me(),Promise.resolve(!0))};return null!=e.projectSecret&&(r.user="",r.password=e.projectSecret),r}}const tn=new i.Yd(At);class en extends Gr{static getApiKey(t){return null!=t&&tn.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;return"homestead"===t.name?r="https://cloudflare-eth.com/":tn.throwArgumentError("unsupported network","network",arguments[0]),r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return n=this,i=void 0,o=function*(){return"getBlockNumber"===t?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)},new((s=void 0)||(s=Promise))((function(t,e){function r(t){try{c(o.next(t))}catch(t){e(t)}}function a(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s((function(t){t(n)}))).then(r,a)}c((o=o.apply(n,i||[])).next())}));var n,i,s,o}}var rn=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const nn=new i.Yd(At);function sn(t){const e={};for(let r in t){if(null==t[r])continue;let n=t[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?(0,P.$P)((0,P.Dv)(n)):"accessList"===r?"["+Ae(n).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join('","')}"]}`)).join(",")+"]":(0,P.Dv)(n),e[r]=n)}return e}function on(t){if(0==t.status&&("No records found"===t.message||"No transactions found"===t.message))return t.result;if(1!=t.status||"string"!=typeof t.message||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function an(t){if(t&&0==t.status&&"NOTOK"==t.message&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if("2.0"!=t.jsonrpc){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function cn(t){if("pending"===t)throw new Error("pending not supported");return"latest"===t?t:parseInt(t.substring(2),16)}function un(t,e,r){if("call"===t&&e.code===i.Yd.errors.SERVER_ERROR){const t=e.error;if(t&&(t.message.match(/reverted/i)||t.message.match(/VM execution error/i))){let r=t.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),(0,P.A7)(r))return r;nn.throwError("missing revert data in call exception",i.Yd.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===i.Yd.errors.SERVER_ERROR&&(e.error&&"string"==typeof e.error.message?n=e.error.message:"string"==typeof e.body?n=e.body:"string"==typeof e.responseText&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&nn.throwError("insufficient funds for intrinsic transaction cost",i.Yd.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&nn.throwError("nonce has already been used",i.Yd.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&nn.throwError("replacement fee too low",i.Yd.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&nn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class hn extends nr{constructor(t,e){super(t),o(this,"baseUrl",this.getBaseUrl()),o(this,"apiKey",e||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return nn.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce(((t,r)=>{const n=e[r];return null!=n&&(t+=`&${r}=${n}`),t}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return rn(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(t,e),i=r?this.getPostData(t,e):null,s="proxy"===t?an:on;this.emit("debug",{action:"request",request:n,provider:this});const o={url:n,throttleSlotInterval:1e3,throttleCallback:(t,e)=>(this.isCommunityResource()&&Me(),Promise.resolve(!0))};let a=null;i&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&"));const c=yield wt(o,a,s||an);return this.emit("debug",{action:"response",request:n,response:d(c),provider:this}),c}))}detectNetwork(){return rn(this,void 0,void 0,(function*(){return this.network}))}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return rn(this,void 0,void 0,(function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch((t=>un("sendTransaction",t,e.signedTransaction)));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if("latest"!==e.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const t=sn(e.transaction);t.module="proxy",t.action="eth_call";try{return yield this.fetch("proxy",t,!0)}catch(t){return un("call",t,e.transaction)}}case"estimateGas":{const t=sn(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return yield this.fetch("proxy",t,!0)}catch(t){return un("estimateGas",t,e.transaction)}}case"getLogs":{const t={action:"getLogs"};if(e.filter.fromBlock&&(t.fromBlock=cn(e.filter.fromBlock)),e.filter.toBlock&&(t.toBlock=cn(e.filter.toBlock)),e.filter.address&&(t.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&nn.throwError("unsupported topic count",i.Yd.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),1===e.filter.topics.length)){const r=e.filter.topics[0];"string"==typeof r&&66===r.length||nn.throwError("unsupported topic format",i.Yd.errors.UNSUPPORTED_OPERATION,{topic0:r}),t.topic0=r}const r=yield this.fetch("logs",t);let n={};for(let t=0;t<r.length;t++){const e=r[t];if(null==e.blockHash){if(null==n[e.blockNumber]){const t=yield this.getBlock(e.blockNumber);t&&(n[e.blockNumber]=t.hash)}e.blockHash=n[e.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)}))}getHistory(t,e,r){return rn(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(t),startblock:null==e?0:e,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map((t=>{["contractAddress","to"].forEach((function(e){""==t[e]&&delete t[e]})),null==t.creates&&null!=t.contractAddress&&(t.creates=t.contractAddress);const e=this.formatter.transactionResponse(t);return t.timeStamp&&(e.timestamp=parseInt(t.timeStamp)),e}))}))}isCommunityResource(){return null==this.apiKey}}var ln=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const fn=new i.Yd(At);function dn(){return(new Date).getTime()}function pn(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(null==n)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||null==e.ensAddress&&null==n.ensAddress)||fn.throwArgumentError("provider mismatch","networks",t):e=n}return e}function gn(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return null!=e&&Math.abs(n-i)>e?null:(n+i)/2}function mn(t){if(null===t)return"null";if("number"==typeof t||"boolean"==typeof t)return JSON.stringify(t);if("string"==typeof t)return t;if(n.O$.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map((t=>mn(t))));if("object"==typeof t){const e=Object.keys(t);return e.sort(),"{"+e.map((e=>{let r=t[e];return r="function"==typeof r?"[function]":mn(r),JSON.stringify(e)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let vn=1;function yn(t){let e=null,r=null,n=new Promise((n=>{e=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(e,t)}));return{cancel:e,getPromise:function(){return n},wait:t=>(n=n.then(t),n)}}const wn=[i.Yd.errors.CALL_EXCEPTION,i.Yd.errors.INSUFFICIENT_FUNDS,i.Yd.errors.NONCE_EXPIRED,i.Yd.errors.REPLACEMENT_UNDERPRICED,i.Yd.errors.UNPREDICTABLE_GAS_LIMIT],bn=["address","args","errorArgs","errorSignature","method","transaction"];function _n(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function En(t,e){return ln(this,void 0,void 0,(function*(){const r=t.provider;return null!=r.blockNumber&&r.blockNumber>=e||-1===e?r:bt((()=>new Promise(((n,i)=>{setTimeout((function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)}),0)}))),{oncePoll:r})}))}function An(t,e,r,n){return ln(this,void 0,void 0,(function*(){let s=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return s[r]();case"getEtherPrice":if(s.getEtherPrice)return s.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&(0,P.A7)(n.blockTag)&&(s=yield En(t,e)),s[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&(0,P.A7)(n.blockTag)&&(s=yield En(t,e)),s.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&(0,P.A7)(n.blockTag)&&(s=yield En(t,e)),s[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&(0,P.A7)(n.blockTag)&&(s=yield En(t,e)),"call"===r&&n.blockTag?s[r](n.transaction,n.blockTag):s[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return s[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&(0,P.A7)(r.fromBlock)||r.toBlock&&(0,P.A7)(r.toBlock))&&(s=yield En(t,e)),s.getLogs(r)}}return fn.throwError("unknown method error",i.Yd.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class In extends nr{constructor(t,e){0===t.length&&fn.throwArgumentError("missing providers","providers",t);const r=t.map(((t,e)=>{if(v.isProvider(t)){const e=xe(t)?2e3:750,r=1;return Object.freeze({provider:t,weight:1,stallTimeout:e,priority:r})}const r=u(t);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=xe(t)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&fn.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${e}].weight`,n),Object.freeze(r)})),n=r.reduce(((t,e)=>t+e.weight),0);null==e?e=n/2:e>n&&fn.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let i=pn(r.map((t=>t.provider.network)));null==i&&(i=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then(t,e)}),0)}))),super(i),o(this,"providerConfigs",Object.freeze(r)),o(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return ln(this,void 0,void 0,(function*(){return pn(yield Promise.all(this.providerConfigs.map((t=>t.provider.getNetwork()))))}))}perform(t,e){return ln(this,void 0,void 0,(function*(){if("sendTransaction"===t){const t=yield Promise.all(this.providerConfigs.map((t=>t.provider.sendTransaction(e.signedTransaction).then((t=>t.hash),(t=>t)))));for(let e=0;e<t.length;e++){const r=t[e];if("string"==typeof r)return r}throw t[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==t&&(yield this.getBlockNumber());const r=function(t,e,r){let n=mn;switch(e){case"getBlockNumber":return function(e){const r=e.map((t=>t.result));let n=gn(e.map((t=>t.result)),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=t._highestBlockNumber&&(t._highestBlockNumber=n),t._highestBlockNumber};case"getGasPrice":return function(t){const e=t.map((t=>t.result));return e.sort(),e[Math.floor(e.length/2)]};case"getEtherPrice":return function(t){return gn(t.map((t=>t.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(t){return null==t?null:((t=u(t)).confirmations=-1,mn(t))};break;case"getBlock":n=r.includeTransactions?function(t){return null==t?null:((t=u(t)).transactions=t.transactions.map((t=>((t=u(t)).confirmations=-1,t))),mn(t))}:function(t){return null==t?null:mn(t)};break;default:throw new Error("unknown method: "+e)}return function(t,e){return function(r){const n={};r.forEach((e=>{const r=t(e.result);n[r]||(n[r]={count:0,result:e.result}),n[r].count++}));const i=Object.keys(n);for(let t=0;t<i.length;t++){const r=n[i[t]];if(r.count>=e)return r.result}}}(n,t.quorum)}(this,t,e),n=function(t){for(let e=(t=t.slice()).length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}(this.providerConfigs.map(u));n.sort(((t,e)=>t.priority-e.priority));const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const i=dn();let c=n.filter((t=>t.runner&&i-t.start<t.stallTimeout)).reduce(((t,e)=>t+e.weight),0);for(;c<this.quorum&&o<n.length;){const r=n[o++],i=vn++;r.start=dn(),r.staller=yn(r.stallTimeout),r.staller.wait((()=>{r.staller=null})),r.runner=An(r,s,t,e).then((n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:i,backend:_n(r,dn()),request:{method:t,params:d(e)},provider:this})}),(n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:i,backend:_n(r,dn()),request:{method:t,params:d(e)},provider:this})})),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:i,backend:_n(r,null),request:{method:t,params:d(e)},provider:this}),c+=r.weight}const u=[];n.forEach((t=>{!t.done&&t.runner&&(u.push(t.runner),t.staller&&u.push(t.staller.getPromise()))})),u.length&&(yield Promise.race(u));const h=n.filter((t=>t.done&&null==t.error));if(h.length>=this.quorum){const t=r(h);if(void 0!==t)return n.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0})),t;a||(yield yn(100).getPromise()),a=!1}const l=n.reduce(((t,e)=>{if(!e.done||null==e.error)return t;const r=e.error.code;return wn.indexOf(r)>=0&&(t[r]||(t[r]={error:e.error,weight:0}),t[r].weight+=e.weight),t}),{});if(Object.keys(l).forEach((t=>{const e=l[t];if(e.weight<this.quorum)return;n.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0}));const r=e.error,i={};bn.forEach((t=>{null!=r[t]&&(i[t]=r[t])})),fn.throwError(r.reason||r.message,t,i)})),0===n.filter((t=>!t.done)).length)break}return n.forEach((t=>{t.staller&&t.staller.cancel(),t.cancelled=!0})),fn.throwError("failed to meet quorum",i.Yd.errors.SERVER_ERROR,{method:t,params:e,results:n.map((t=>_n(t))),provider:this})}))}}const Sn=null,Pn=new i.Yd(At),On="84842078b09946638c03157f83405213";class Nn extends Fr{constructor(t,e){const r=new kn(t,e),n=r.connection;n.password&&Pn.throwError("INFURA WebSocket project secrets unsupported",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),t),o(this,"apiKey",r.projectId),o(this,"projectId",r.projectId),o(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===On}}class kn extends Gr{static getWebSocketProvider(t,e){return new Nn(t,e)}static getApiKey(t){const e={apiKey:On,projectId:On,projectSecret:null};return null==t||("string"==typeof t?e.projectId=t:null!=t.projectSecret?(Pn.assertArgument("string"==typeof t.projectId,"projectSecret requires a projectId","projectId",t.projectId),Pn.assertArgument("string"==typeof t.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Pn.throwError("unsupported network",i.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(t,r)=>(e.projectId===On&&Me(),Promise.resolve(!0))};return null!=e.projectSecret&&(n.user="",n.password=e.projectSecret),n}isCommunityResource(){return this.projectId===On}}class Rn extends jr{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise(((t,e)=>{n.resolve=t,n.reject=e}));return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const t=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const e=t.map((t=>t.request));return this.emit("debug",{action:"requestBatch",request:d(e),provider:this}),wt(this.connection,JSON.stringify(e)).then((r=>{this.emit("debug",{action:"response",request:e,response:r,provider:this}),t.forEach(((t,e)=>{const n=r[e];if(n.error){const e=new Error(n.error.message);e.code=n.error.code,e.data=n.error.data,t.reject(e)}else t.resolve(n.result)}))}),(r=>{this.emit("debug",{action:"response",error:r,request:e,provider:this}),t.forEach((t=>{t.reject(r)}))}))}),10)),i}}const xn=new i.Yd(At);class Cn extends Gr{static getApiKey(t){return t&&"string"!=typeof t&&xn.throwArgumentError("invalid apiKey","apiKey",t),t||"ETHERS_JS_SHARED"}static getUrl(t,e){xn.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:xn.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const Mn=new i.Yd(At),Tn="62e1ad51b37b8e00394bda3b";class Ln extends Gr{static getApiKey(t){const e={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==t?e.applicationId=Tn:"string"==typeof t?e.applicationId=t:null!=t.applicationSecretKey?(e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey):t.applicationId?e.applicationId=t.applicationId:Mn.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:Mn.throwError("unsupported network",i.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const n={headers:{},url:`https://${r}/v1/lb/${e.applicationId}`};return null!=e.applicationSecretKey&&(n.user="",n.password=e.applicationSecretKey),n}isCommunityResource(){return this.applicationId===Tn}}const Un=new i.Yd(At);let jn=1;function Dn(t,e){const r="Web3LegacyFetcher";return function(t,n){const i={method:t,params:n,id:jn++,jsonrpc:"2.0"};return new Promise(((t,n)=>{this.emit("debug",{action:"request",fetcher:r,request:d(i),provider:this}),e(i,((e,s)=>{if(e)return this.emit("debug",{action:"response",fetcher:r,error:e,request:i,provider:this}),n(e);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this}),s.error){const t=new Error(s.error.message);return t.code=s.error.code,t.data=s.error.data,n(t)}t(s.result)}))}))}}class Bn extends jr{constructor(t,e){null==t&&Un.throwArgumentError("missing provider","provider",t);let r=null,n=null,i=null;"function"==typeof t?(r="unknown:",n=t):(r=t.host||t.path||"",!r&&t.isMetaMask&&(r="metamask"),i=t,t.request?(""===r&&(r="eip-1193:"),n=function(t){return function(e,r){null==r&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:d(n),provider:this}),t.request(n).then((t=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:t,provider:this}),t}))}}(t)):t.sendAsync?n=Dn(0,t.sendAsync.bind(t)):t.send?n=Dn(0,t.send.bind(t)):Un.throwArgumentError("unsupported provider","provider",t),r||(r="unknown:")),super(r,e),o(this,"jsonRpcFetchFunc",n),o(this,"provider",i)}send(t,e){return this.jsonRpcFetchFunc(t,e)}}const qn=new i.Yd(At);function zn(t,e){if(null==t&&(t="homestead"),"string"==typeof t){const e=t.match(/^(ws|http)s?:/i);if(e)switch(e[1].toLowerCase()){case"http":case"https":return new jr(t);case"ws":case"wss":return new Fr(t);default:qn.throwArgumentError("unsupported URL scheme","network",t)}}const r=S(t);return r&&r._defaultProvider||qn.throwError("unsupported getDefaultProvider network",i.Yd.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:In,AlchemyProvider:Jr,AnkrProvider:Zr,CloudflareProvider:en,EtherscanProvider:hn,InfuraProvider:kn,JsonRpcProvider:jr,NodesmithProvider:Cn,PocketProvider:Ln,Web3Provider:Bn,IpcProvider:Sn},e)}},1843:(t,e,r)=>{"use strict";r.d(e,{J:()=>f,c:()=>u});var n=r(3286),i=r(711);const s=new i.Yd("rlp/5.7.0");function o(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function a(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function c(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(c(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=o(e.length);return r.unshift(247+r.length),r.concat(e)}(0,n.Zq)(t)||s.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call((0,n.lE)(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=o(e.length);return r.unshift(183+r.length),r.concat(e)}function u(t){return(0,n.Dv)(c(t))}function h(t,e,r,n){const o=[];for(;r<e+1+n;){const a=l(t,r);o.push(a.result),(r+=a.consumed)>e+1+n&&s.throwError("child data too short",i.Yd.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:o}}function l(t,e){if(0===t.length&&s.throwError("data too short",i.Yd.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&s.throwError("data short segment too short",i.Yd.errors.BUFFER_OVERRUN,{});const n=a(t,e+1,r);return e+1+r+n>t.length&&s.throwError("data long segment too short",i.Yd.errors.BUFFER_OVERRUN,{}),h(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{}),h(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{});const o=a(t,e+1,r);return e+1+r+o>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{}),{consumed:1+r+o,result:(0,n.Dv)(t.slice(e+1+r,e+1+r+o))}}if(t[e]>=128){const r=t[e]-128;return e+1+r>t.length&&s.throwError("data too short",i.Yd.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:(0,n.Dv)(t.slice(e+1,e+1+r))}}return{consumed:1,result:(0,n.Dv)(t[e])}}function f(t){const e=(0,n.lE)(t),r=l(e,0);return r.consumed!==e.length&&s.throwArgumentError("invalid rlp data","data",t),r.result}},2003:t=>{"use strict";t.exports=function({mustBeMetaMask:t=!1,silent:e=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((i=>{function s(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",s);const{ethereum:r}=window;if(!r||t&&!r.isMetaMask){const n=t&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!e&&console.error("@metamask/detect-provider:",n),i(null)}else i(r)}window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout((()=>{s()}),r))}))}},8099:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7117);function i(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function s(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function o(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function a(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function h(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function l(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function f(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),h(t/4294967296>>>0,e,r),h(t>>>0,e,r+4),e}function d(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),l(t>>>0,e,r),l(t/4294967296>>>0,e,r+4),e}e.readInt16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16},e.readUint16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0},e.readInt16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16},e.readUint16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0},e.writeUint16BE=i,e.writeInt16BE=i,e.writeUint16LE=s,e.writeInt16LE=s,e.readInt32BE=o,e.readUint32BE=a,e.readInt32LE=c,e.readUint32LE=u,e.writeUint32BE=h,e.writeInt32BE=h,e.writeUint32LE=l,e.writeInt32LE=l,e.readInt64BE=function(t,e){void 0===e&&(e=0);var r=o(t,e),n=o(t,e+4);return 4294967296*r+n-4294967296*(n>>31)},e.readUint64BE=function(t,e){return void 0===e&&(e=0),4294967296*a(t,e)+a(t,e+4)},e.readInt64LE=function(t,e){void 0===e&&(e=0);var r=c(t,e);return 4294967296*c(t,e+4)+r-4294967296*(r>>31)},e.readUint64LE=function(t,e){void 0===e&&(e=0);var r=u(t,e);return 4294967296*u(t,e+4)+r},e.writeUint64BE=f,e.writeInt64BE=f,e.writeUint64LE=d,e.writeInt64LE=d,e.readUintBE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n},e.readUintLE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n},e.writeUintBE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,o=t/8+i-1;o>=i;o--)r[o]=e/s&255,s*=256;return r},e.writeUintLE=function(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+t/8;o++)r[o]=e/s&255,s*=256;return r},e.readFloat32BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e)},e.readFloat32LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},e.readFloat64BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e)},e.readFloat64LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},e.writeFloat32BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t),e},e.writeFloat32LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),e},e.writeFloat64BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t),e},e.writeFloat64LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),e}},5439:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8099),i=r(7309),s=20;function o(t,e,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],v=e[3]<<24|e[2]<<16|e[1]<<8|e[0],y=e[7]<<24|e[6]<<16|e[5]<<8|e[4],w=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],_=i,E=o,A=a,I=c,S=u,P=h,O=l,N=f,k=d,R=p,x=g,C=m,M=v,T=y,L=w,U=b,j=0;j<s;j+=2)S=(S^=k=k+(M=(M^=_=_+S|0)>>>16|M<<16)|0)>>>20|S<<12,P=(P^=R=R+(T=(T^=E=E+P|0)>>>16|T<<16)|0)>>>20|P<<12,O=(O^=x=x+(L=(L^=A=A+O|0)>>>16|L<<16)|0)>>>20|O<<12,N=(N^=C=C+(U=(U^=I=I+N|0)>>>16|U<<16)|0)>>>20|N<<12,O=(O^=x=x+(L=(L^=A=A+O|0)>>>24|L<<8)|0)>>>25|O<<7,N=(N^=C=C+(U=(U^=I=I+N|0)>>>24|U<<8)|0)>>>25|N<<7,P=(P^=R=R+(T=(T^=E=E+P|0)>>>24|T<<8)|0)>>>25|P<<7,S=(S^=k=k+(M=(M^=_=_+S|0)>>>24|M<<8)|0)>>>25|S<<7,P=(P^=x=x+(U=(U^=_=_+P|0)>>>16|U<<16)|0)>>>20|P<<12,O=(O^=C=C+(M=(M^=E=E+O|0)>>>16|M<<16)|0)>>>20|O<<12,N=(N^=k=k+(T=(T^=A=A+N|0)>>>16|T<<16)|0)>>>20|N<<12,S=(S^=R=R+(L=(L^=I=I+S|0)>>>16|L<<16)|0)>>>20|S<<12,N=(N^=k=k+(T=(T^=A=A+N|0)>>>24|T<<8)|0)>>>25|N<<7,S=(S^=R=R+(L=(L^=I=I+S|0)>>>24|L<<8)|0)>>>25|S<<7,O=(O^=C=C+(M=(M^=E=E+O|0)>>>24|M<<8)|0)>>>25|O<<7,P=(P^=x=x+(U=(U^=_=_+P|0)>>>24|U<<8)|0)>>>25|P<<7;n.writeUint32LE(_+i|0,t,0),n.writeUint32LE(E+o|0,t,4),n.writeUint32LE(A+a|0,t,8),n.writeUint32LE(I+c|0,t,12),n.writeUint32LE(S+u|0,t,16),n.writeUint32LE(P+h|0,t,20),n.writeUint32LE(O+l|0,t,24),n.writeUint32LE(N+f|0,t,28),n.writeUint32LE(k+d|0,t,32),n.writeUint32LE(R+p|0,t,36),n.writeUint32LE(x+g|0,t,40),n.writeUint32LE(C+m|0,t,44),n.writeUint32LE(M+v|0,t,48),n.writeUint32LE(T+y|0,t,52),n.writeUint32LE(L+w|0,t,56),n.writeUint32LE(U+b|0,t,60)}function a(t,e,r,n,s){if(void 0===s&&(s=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,u;if(0===s){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=(a=new Uint8Array(16)).length-e.length,a.set(e,u)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,u=s}for(var h=new Uint8Array(64),l=0;l<r.length;l+=64){o(h,a,t);for(var f=l;f<l+64&&f<r.length;f++)n[f]=r[f]^h[f-l];c(a,0,u)}return i.wipe(h),0===s&&i.wipe(a),n}function c(t,e,r){for(var n=1;r--;)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=a,e.stream=function(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),a(t,e,r,r,n)}},5501:(t,e,r)=>{"use strict";var n=r(5439),i=r(3027),s=r(7309),o=r(8099),a=r(4153);e.Cv=32,e.WH=12,e.pg=16;var c=new Uint8Array(16),u=function(){function t(t){if(this.nonceLength=e.WH,this.tagLength=e.pg,t.length!==e.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,u=e.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,o,e,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,e.subarray(0,e.length-this.tagLength),r),!a.equal(u,e.subarray(e.length-this.tagLength,e.length)))return null;var h,l=e.length-this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");h=i}else h=new Uint8Array(l);return n.streamXOR(this._key,o,e.subarray(0,e.length-this.tagLength),h,4),s.wipe(o),h},t.prototype.clean=function(){return s.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&o.writeUint64LE(n.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var h=a.digest(),l=0;l<h.length;l++)t[l]=h[l];a.clean(),s.wipe(h),s.wipe(u)},t}();e.OK=u},4153:(t,e)=>{"use strict";function r(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Object.defineProperty(e,"__esModule",{value:!0}),e.select=function(t,e,r){return~(t-1)&e|t-1&r},e.lessOrEqual=function(t,e){return(0|t)-(0|e)-1>>>31&1},e.compare=r,e.equal=function(t,e){return 0!==t.length&&0!==e.length&&0!==r(t,e)}},1050:(t,e,r)=>{"use strict";e.Xx=e._w=e.aP=e.KS=e.jQ=void 0;r(1416);const n=r(3350);r(7309);function i(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.jQ=64,e.KS=64,e.aP=32,new Uint8Array(32)[0]=9;const s=i(),o=i([1]),a=(i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(t,e){for(let r=0;r<16;r++)t[r]=0|e[r]}function l(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function f(t,e,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(t[r]^e[r]);t[r]^=i,e[r]^=i}}function d(t,e){const r=i(),n=i();for(let t=0;t<16;t++)n[t]=e[t];l(n),l(n),l(n);for(let t=0;t<2;t++){r[0]=n[0]-65517;for(let t=1;t<15;t++)r[t]=n[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,f(n,r,1-t)}for(let e=0;e<16;e++)t[2*e]=255&n[e],t[2*e+1]=n[e]>>8}function p(t){const e=new Uint8Array(32);return d(e,t),1&e[0]}function g(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function m(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function v(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0,p=0,g=0,m=0,v=0,y=0,w=0,b=0,_=0,E=0,A=0,I=0,S=0,P=0,O=0,N=0,k=0,R=0,x=0,C=0,M=0,T=0,L=0,U=r[0],j=r[1],D=r[2],B=r[3],q=r[4],z=r[5],F=r[6],H=r[7],K=r[8],G=r[9],W=r[10],$=r[11],Y=r[12],J=r[13],V=r[14],Q=r[15];n=e[0],s+=n*U,o+=n*j,a+=n*D,c+=n*B,u+=n*q,h+=n*z,l+=n*F,f+=n*H,d+=n*K,p+=n*G,g+=n*W,m+=n*$,v+=n*Y,y+=n*J,w+=n*V,b+=n*Q,n=e[1],o+=n*U,a+=n*j,c+=n*D,u+=n*B,h+=n*q,l+=n*z,f+=n*F,d+=n*H,p+=n*K,g+=n*G,m+=n*W,v+=n*$,y+=n*Y,w+=n*J,b+=n*V,_+=n*Q,n=e[2],a+=n*U,c+=n*j,u+=n*D,h+=n*B,l+=n*q,f+=n*z,d+=n*F,p+=n*H,g+=n*K,m+=n*G,v+=n*W,y+=n*$,w+=n*Y,b+=n*J,_+=n*V,E+=n*Q,n=e[3],c+=n*U,u+=n*j,h+=n*D,l+=n*B,f+=n*q,d+=n*z,p+=n*F,g+=n*H,m+=n*K,v+=n*G,y+=n*W,w+=n*$,b+=n*Y,_+=n*J,E+=n*V,A+=n*Q,n=e[4],u+=n*U,h+=n*j,l+=n*D,f+=n*B,d+=n*q,p+=n*z,g+=n*F,m+=n*H,v+=n*K,y+=n*G,w+=n*W,b+=n*$,_+=n*Y,E+=n*J,A+=n*V,I+=n*Q,n=e[5],h+=n*U,l+=n*j,f+=n*D,d+=n*B,p+=n*q,g+=n*z,m+=n*F,v+=n*H,y+=n*K,w+=n*G,b+=n*W,_+=n*$,E+=n*Y,A+=n*J,I+=n*V,S+=n*Q,n=e[6],l+=n*U,f+=n*j,d+=n*D,p+=n*B,g+=n*q,m+=n*z,v+=n*F,y+=n*H,w+=n*K,b+=n*G,_+=n*W,E+=n*$,A+=n*Y,I+=n*J,S+=n*V,P+=n*Q,n=e[7],f+=n*U,d+=n*j,p+=n*D,g+=n*B,m+=n*q,v+=n*z,y+=n*F,w+=n*H,b+=n*K,_+=n*G,E+=n*W,A+=n*$,I+=n*Y,S+=n*J,P+=n*V,O+=n*Q,n=e[8],d+=n*U,p+=n*j,g+=n*D,m+=n*B,v+=n*q,y+=n*z,w+=n*F,b+=n*H,_+=n*K,E+=n*G,A+=n*W,I+=n*$,S+=n*Y,P+=n*J,O+=n*V,N+=n*Q,n=e[9],p+=n*U,g+=n*j,m+=n*D,v+=n*B,y+=n*q,w+=n*z,b+=n*F,_+=n*H,E+=n*K,A+=n*G,I+=n*W,S+=n*$,P+=n*Y,O+=n*J,N+=n*V,k+=n*Q,n=e[10],g+=n*U,m+=n*j,v+=n*D,y+=n*B,w+=n*q,b+=n*z,_+=n*F,E+=n*H,A+=n*K,I+=n*G,S+=n*W,P+=n*$,O+=n*Y,N+=n*J,k+=n*V,R+=n*Q,n=e[11],m+=n*U,v+=n*j,y+=n*D,w+=n*B,b+=n*q,_+=n*z,E+=n*F,A+=n*H,I+=n*K,S+=n*G,P+=n*W,O+=n*$,N+=n*Y,k+=n*J,R+=n*V,x+=n*Q,n=e[12],v+=n*U,y+=n*j,w+=n*D,b+=n*B,_+=n*q,E+=n*z,A+=n*F,I+=n*H,S+=n*K,P+=n*G,O+=n*W,N+=n*$,k+=n*Y,R+=n*J,x+=n*V,C+=n*Q,n=e[13],y+=n*U,w+=n*j,b+=n*D,_+=n*B,E+=n*q,A+=n*z,I+=n*F,S+=n*H,P+=n*K,O+=n*G,N+=n*W,k+=n*$,R+=n*Y,x+=n*J,C+=n*V,M+=n*Q,n=e[14],w+=n*U,b+=n*j,_+=n*D,E+=n*B,A+=n*q,I+=n*z,S+=n*F,P+=n*H,O+=n*K,N+=n*G,k+=n*W,R+=n*$,x+=n*Y,C+=n*J,M+=n*V,T+=n*Q,n=e[15],b+=n*U,_+=n*j,E+=n*D,A+=n*B,I+=n*q,S+=n*z,P+=n*F,O+=n*H,N+=n*K,k+=n*G,R+=n*W,x+=n*$,C+=n*Y,M+=n*J,T+=n*V,L+=n*Q,s+=38*_,o+=38*E,a+=38*A,c+=38*I,u+=38*S,h+=38*P,l+=38*O,f+=38*N,d+=38*k,p+=38*R,g+=38*x,m+=38*C,v+=38*M,y+=38*T,w+=38*L,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=p,t[10]=g,t[11]=m,t[12]=v,t[13]=y,t[14]=w,t[15]=b}function y(t,e){v(t,e,e)}function w(t,e){const r=i(),n=i(),s=i(),o=i(),c=i(),u=i(),h=i(),l=i(),f=i();m(r,t[1],t[0]),m(f,e[1],e[0]),v(r,r,f),g(n,t[0],t[1]),g(f,e[0],e[1]),v(n,n,f),v(s,t[3],e[3]),v(s,s,a),v(o,t[2],e[2]),g(o,o,o),m(c,n,r),m(u,o,s),g(h,o,s),g(l,n,r),v(t[0],c,u),v(t[1],l,h),v(t[2],h,u),v(t[3],c,l)}function b(t,e,r){for(let n=0;n<4;n++)f(t[n],e[n],r)}function _(t,e){const r=i(),n=i(),s=i();(function(t,e){const r=i();let n;for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)y(r,r),2!==n&&4!==n&&v(r,r,e);for(n=0;n<16;n++)t[n]=r[n]})(s,e[2]),v(r,e[0],s),v(n,e[1],s),d(t,n),t[31]^=p(r)<<7}function E(t,e){const r=[i(),i(),i(),i()];h(r[0],c),h(r[1],u),h(r[2],o),v(r[3],c,u),function(t,e,r){h(t[0],s),h(t[1],o),h(t[2],o),h(t[3],s);for(let n=255;n>=0;--n){const i=r[n/8|0]>>(7&n)&1;b(t,e,i),w(e,t),w(t,t),b(t,e,i)}}(t,r,e)}e._w=function(t){if(t.length!==e.aP)throw new Error(`ed25519: seed must be ${e.aP} bytes`);const r=(0,n.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;const s=new Uint8Array(32),o=[i(),i(),i(),i()];E(o,r),_(s,o);const a=new Uint8Array(64);return a.set(t),a.set(s,32),{publicKey:s,secretKey:a}};const A=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function I(t,e){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*A[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*A[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*A[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function S(t){const e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let e=0;e<64;e++)t[e]=0;I(t,e)}e.Xx=function(t,e){const r=new Float64Array(64),s=[i(),i(),i(),i()],o=(0,n.hash)(t.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const c=new n.SHA512;c.update(a.subarray(32)),c.update(e);const u=c.digest();c.clean(),S(u),E(s,u),_(a,s),c.reset(),c.update(a.subarray(0,32)),c.update(t.subarray(32)),c.update(e);const h=c.digest();S(h);for(let t=0;t<32;t++)r[t]=u[t];for(let t=0;t<32;t++)for(let e=0;e<32;e++)r[t+e]+=h[t]*o[e];return I(a.subarray(32),r),a}},9984:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=function(t){return void 0!==t.saveState&&void 0!==t.restoreState&&void 0!==t.cleanSavedState}},512:(t,e,r)=>{"use strict";var n=r(5629),i=r(7309),s=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var s=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.t=s},5629:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9984),i=r(4153),s=r(7309),o=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;for(this._inner.update(r),i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();e.HMAC=o,e.hmac=function(t,e,r){var n=new o(t,e);n.update(r);var i=n.digest();return n.clean(),i},e.equal=i.equal},7117:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0},e.add=function(t,e){return t+e|0},e.sub=function(t,e){return t-e|0},e.rotl=function(t,e){return t<<e|t>>>32-e},e.rotr=function(t,e){return t<<32-e|t>>>e},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},3027:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4153),i=r(7309);e.DIGEST_LENGTH=16;var s=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=t[8]|t[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=t[14]|t[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){for(var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],h=this._h[6],l=this._h[7],f=this._h[8],d=this._h[9],p=this._r[0],g=this._r[1],m=this._r[2],v=this._r[3],y=this._r[4],w=this._r[5],b=this._r[6],_=this._r[7],E=this._r[8],A=this._r[9];r>=16;){var I=t[e+0]|t[e+1]<<8;i+=8191&I;var S=t[e+2]|t[e+3]<<8;s+=8191&(I>>>13|S<<3);var P=t[e+4]|t[e+5]<<8;o+=8191&(S>>>10|P<<6);var O=t[e+6]|t[e+7]<<8;a+=8191&(P>>>7|O<<9);var N=t[e+8]|t[e+9]<<8;c+=8191&(O>>>4|N<<12),u+=N>>>1&8191;var k=t[e+10]|t[e+11]<<8;h+=8191&(N>>>14|k<<2);var R=t[e+12]|t[e+13]<<8;l+=8191&(k>>>11|R<<5);var x=t[e+14]|t[e+15]<<8,C=0,M=C;M+=i*p,M+=s*(5*A),M+=o*(5*E),M+=a*(5*_),C=(M+=c*(5*b))>>>13,M&=8191,M+=u*(5*w),M+=h*(5*y),M+=l*(5*v),M+=(f+=8191&(R>>>8|x<<8))*(5*m);var T=C+=(M+=(d+=x>>>5|n)*(5*g))>>>13;T+=i*g,T+=s*p,T+=o*(5*A),T+=a*(5*E),C=(T+=c*(5*_))>>>13,T&=8191,T+=u*(5*b),T+=h*(5*w),T+=l*(5*y),T+=f*(5*v),C+=(T+=d*(5*m))>>>13,T&=8191;var L=C;L+=i*m,L+=s*g,L+=o*p,L+=a*(5*A),C=(L+=c*(5*E))>>>13,L&=8191,L+=u*(5*_),L+=h*(5*b),L+=l*(5*w),L+=f*(5*y);var U=C+=(L+=d*(5*v))>>>13;U+=i*v,U+=s*m,U+=o*g,U+=a*p,C=(U+=c*(5*A))>>>13,U&=8191,U+=u*(5*E),U+=h*(5*_),U+=l*(5*b),U+=f*(5*w);var j=C+=(U+=d*(5*y))>>>13;j+=i*y,j+=s*v,j+=o*m,j+=a*g,C=(j+=c*p)>>>13,j&=8191,j+=u*(5*A),j+=h*(5*E),j+=l*(5*_),j+=f*(5*b);var D=C+=(j+=d*(5*w))>>>13;D+=i*w,D+=s*y,D+=o*v,D+=a*m,C=(D+=c*g)>>>13,D&=8191,D+=u*p,D+=h*(5*A),D+=l*(5*E),D+=f*(5*_);var B=C+=(D+=d*(5*b))>>>13;B+=i*b,B+=s*w,B+=o*y,B+=a*v,C=(B+=c*m)>>>13,B&=8191,B+=u*g,B+=h*p,B+=l*(5*A),B+=f*(5*E);var q=C+=(B+=d*(5*_))>>>13;q+=i*_,q+=s*b,q+=o*w,q+=a*y,C=(q+=c*v)>>>13,q&=8191,q+=u*m,q+=h*g,q+=l*p,q+=f*(5*A);var z=C+=(q+=d*(5*E))>>>13;z+=i*E,z+=s*_,z+=o*b,z+=a*w,C=(z+=c*y)>>>13,z&=8191,z+=u*v,z+=h*m,z+=l*g,z+=f*p;var F=C+=(z+=d*(5*A))>>>13;F+=i*A,F+=s*E,F+=o*_,F+=a*b,C=(F+=c*w)>>>13,F&=8191,F+=u*y,F+=h*v,F+=l*m,F+=f*g,i=M=8191&(C=(C=((C+=(F+=d*p)>>>13)<<2)+C|0)+(M&=8191)|0),s=T+=C>>>=13,o=L&=8191,a=U&=8191,c=j&=8191,u=D&=8191,h=B&=8191,l=q&=8191,f=z&=8191,d=F&=8191,e+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=h,this._h[7]=l,this._h[8]=f,this._h[9]=d},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){(e=16-this._leftover)>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=s,e.oneTimeAuth=function(t,e){var r=new s(t);r.update(e);var n=r.digest();return r.clean(),n},e.equal=function(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}},1416:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const n=r(6008),i=r(8099),s=r(7309);function o(t,r=e.defaultRandomSource){return r.randomBytes(t)}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=o,e.randomUint32=function(t=e.defaultRandomSource){const r=o(4,t),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(t,r=a,n=e.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,u=256-256%c;for(;t>0;){const e=o(Math.ceil(256*t/u),n);for(let n=0;n<e.length&&t>0;n++){const s=e[n];s<u&&(i+=r.charAt(s%c),t--)}(0,s.wipe)(e)}return i}e.randomString=c,e.randomStringForEntropy=function(t,r=a,n=e.defaultRandomSource){return c(Math.ceil(t/(Math.log(r.length)/Math.LN2)),r,n)}},5455:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0,e.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const e=new Uint8Array(t);for(let t=0;t<e.length;t+=65536)this._crypto.getRandomValues(e.subarray(t,t+Math.min(e.length-t,65536)));return e}}},8871:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;const n=r(7309);e.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const t=r(5883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(t);for(let t=0;t<r.length;t++)r[t]=e[t];return(0,n.wipe)(e),r}}},6008:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;const n=r(5455),i=r(8871);e.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}},3294:(t,e,r)=>{"use strict";var n=r(8099),i=r(7309);e.k=32,e.cn=64;var s=function(){function t(){this.digestLength=e.k,this.blockSize=e.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&e>0;)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);e>0;)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],t,4*c);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,s){for(;s>=64;){for(var a=e[0],c=e[1],u=e[2],h=e[3],l=e[4],f=e[5],d=e[6],p=e[7],g=0;g<16;g++){var m=i+4*g;t[g]=n.readUint32BE(r,m)}for(g=16;g<64;g++){var v=t[g-2],y=(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10,w=((v=t[g-15])>>>7|v<<25)^(v>>>18|v<<14)^v>>>3;t[g]=(y+t[g-7]|0)+(w+t[g-16]|0)}for(g=0;g<64;g++)y=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&d)|0)+(p+(o[g]+t[g]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0,p=d,d=f,f=l,l=h+y|0,h=u,u=c,c=a,a=y+w|0;e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=h,e[4]+=l,e[5]+=f,e[6]+=d,e[7]+=p,i+=64,s-=64}return i}e.vp=function(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}},3350:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8099),i=r(7309);e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var s=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},t.prototype.update=function(t,r){if(void 0===r&&(r=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=t[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=t[n++],r--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,s=e<<3,o=e%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/8;c++)n.writeUint32BE(this._stateHi[c],t,8*c),n.writeUint32BE(this._stateLo[c],t,8*c+4);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.stateHi),i.wipe(t.stateLo),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(t,e,r,i,s,a,c){for(var u,h,l,f,d,p,g,m,v=r[0],y=r[1],w=r[2],b=r[3],_=r[4],E=r[5],A=r[6],I=r[7],S=i[0],P=i[1],O=i[2],N=i[3],k=i[4],R=i[5],x=i[6],C=i[7];c>=128;){for(var M=0;M<16;M++){var T=8*M+a;t[M]=n.readUint32BE(s,T),e[M]=n.readUint32BE(s,T+4)}for(M=0;M<80;M++){var L,U,j=v,D=y,B=w,q=b,z=_,F=E,H=A,K=S,G=P,W=O,$=N,Y=k,J=R,V=x;if(d=65535&(h=C),p=h>>>16,g=65535&(u=I),m=u>>>16,d+=65535&(h=(k>>>14|_<<18)^(k>>>18|_<<14)^(_>>>9|k<<23)),p+=h>>>16,g+=65535&(u=(_>>>14|k<<18)^(_>>>18|k<<14)^(k>>>9|_<<23)),m+=u>>>16,d+=65535&(h=k&R^~k&x),p+=h>>>16,g+=65535&(u=_&E^~_&A),m+=u>>>16,u=o[2*M],d+=65535&(h=o[2*M+1]),p+=h>>>16,g+=65535&u,m+=u>>>16,u=t[M%16],p+=(h=e[M%16])>>>16,g+=65535&u,m+=u>>>16,g+=(p+=(d+=65535&h)>>>16)>>>16,d=65535&(h=f=65535&d|p<<16),p=h>>>16,g=65535&(u=l=65535&g|(m+=g>>>16)<<16),m=u>>>16,d+=65535&(h=(S>>>28|v<<4)^(v>>>2|S<<30)^(v>>>7|S<<25)),p+=h>>>16,g+=65535&(u=(v>>>28|S<<4)^(S>>>2|v<<30)^(S>>>7|v<<25)),m+=u>>>16,p+=(h=S&P^S&O^P&O)>>>16,g+=65535&(u=v&y^v&w^y&w),m+=u>>>16,L=65535&(g+=(p+=(d+=65535&h)>>>16)>>>16)|(m+=g>>>16)<<16,U=65535&d|p<<16,d=65535&(h=$),p=h>>>16,g=65535&(u=q),m=u>>>16,p+=(h=f)>>>16,g+=65535&(u=l),m+=u>>>16,y=j,w=D,b=B,_=q=65535&(g+=(p+=(d+=65535&h)>>>16)>>>16)|(m+=g>>>16)<<16,E=z,A=F,I=H,v=L,P=K,O=G,N=W,k=$=65535&d|p<<16,R=Y,x=J,C=V,S=U,M%16==15)for(T=0;T<16;T++)u=t[T],d=65535&(h=e[T]),p=h>>>16,g=65535&u,m=u>>>16,u=t[(T+9)%16],d+=65535&(h=e[(T+9)%16]),p+=h>>>16,g+=65535&u,m+=u>>>16,l=t[(T+1)%16],d+=65535&(h=((f=e[(T+1)%16])>>>1|l<<31)^(f>>>8|l<<24)^(f>>>7|l<<25)),p+=h>>>16,g+=65535&(u=(l>>>1|f<<31)^(l>>>8|f<<24)^l>>>7),m+=u>>>16,l=t[(T+14)%16],p+=(h=((f=e[(T+14)%16])>>>19|l<<13)^(l>>>29|f<<3)^(f>>>6|l<<26))>>>16,g+=65535&(u=(l>>>19|f<<13)^(f>>>29|l<<3)^l>>>6),m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,t[T]=65535&g|m<<16,e[T]=65535&d|p<<16}d=65535&(h=S),p=h>>>16,g=65535&(u=v),m=u>>>16,u=r[0],p+=(h=i[0])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[0]=v=65535&g|m<<16,i[0]=S=65535&d|p<<16,d=65535&(h=P),p=h>>>16,g=65535&(u=y),m=u>>>16,u=r[1],p+=(h=i[1])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[1]=y=65535&g|m<<16,i[1]=P=65535&d|p<<16,d=65535&(h=O),p=h>>>16,g=65535&(u=w),m=u>>>16,u=r[2],p+=(h=i[2])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[2]=w=65535&g|m<<16,i[2]=O=65535&d|p<<16,d=65535&(h=N),p=h>>>16,g=65535&(u=b),m=u>>>16,u=r[3],p+=(h=i[3])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[3]=b=65535&g|m<<16,i[3]=N=65535&d|p<<16,d=65535&(h=k),p=h>>>16,g=65535&(u=_),m=u>>>16,u=r[4],p+=(h=i[4])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[4]=_=65535&g|m<<16,i[4]=k=65535&d|p<<16,d=65535&(h=R),p=h>>>16,g=65535&(u=E),m=u>>>16,u=r[5],p+=(h=i[5])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[5]=E=65535&g|m<<16,i[5]=R=65535&d|p<<16,d=65535&(h=x),p=h>>>16,g=65535&(u=A),m=u>>>16,u=r[6],p+=(h=i[6])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[6]=A=65535&g|m<<16,i[6]=x=65535&d|p<<16,d=65535&(h=C),p=h>>>16,g=65535&(u=I),m=u>>>16,u=r[7],p+=(h=i[7])>>>16,g+=65535&u,m+=u>>>16,m+=(g+=(p+=(d+=65535&h)>>>16)>>>16)>>>16,r[7]=I=65535&g|m<<16,i[7]=C=65535&d|p<<16,a+=128,c-=128}return a}e.hash=function(t){var e=new s;e.update(t);var r=e.digest();return e.clean(),r}},7309:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(t){for(var e=0;e<t.length;e++)t[e]=0;return t}},7664:(t,e,r)=>{"use strict";e.gi=e.Au=e.KS=e.kz=void 0;const n=r(1416),i=r(7309);function s(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.kz=32,e.KS=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function u(t,e,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(t[r]^e[r]);t[r]^=i,e[r]^=i}}function h(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function l(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function f(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0,p=0,g=0,m=0,v=0,y=0,w=0,b=0,_=0,E=0,A=0,I=0,S=0,P=0,O=0,N=0,k=0,R=0,x=0,C=0,M=0,T=0,L=0,U=r[0],j=r[1],D=r[2],B=r[3],q=r[4],z=r[5],F=r[6],H=r[7],K=r[8],G=r[9],W=r[10],$=r[11],Y=r[12],J=r[13],V=r[14],Q=r[15];n=e[0],s+=n*U,o+=n*j,a+=n*D,c+=n*B,u+=n*q,h+=n*z,l+=n*F,f+=n*H,d+=n*K,p+=n*G,g+=n*W,m+=n*$,v+=n*Y,y+=n*J,w+=n*V,b+=n*Q,n=e[1],o+=n*U,a+=n*j,c+=n*D,u+=n*B,h+=n*q,l+=n*z,f+=n*F,d+=n*H,p+=n*K,g+=n*G,m+=n*W,v+=n*$,y+=n*Y,w+=n*J,b+=n*V,_+=n*Q,n=e[2],a+=n*U,c+=n*j,u+=n*D,h+=n*B,l+=n*q,f+=n*z,d+=n*F,p+=n*H,g+=n*K,m+=n*G,v+=n*W,y+=n*$,w+=n*Y,b+=n*J,_+=n*V,E+=n*Q,n=e[3],c+=n*U,u+=n*j,h+=n*D,l+=n*B,f+=n*q,d+=n*z,p+=n*F,g+=n*H,m+=n*K,v+=n*G,y+=n*W,w+=n*$,b+=n*Y,_+=n*J,E+=n*V,A+=n*Q,n=e[4],u+=n*U,h+=n*j,l+=n*D,f+=n*B,d+=n*q,p+=n*z,g+=n*F,m+=n*H,v+=n*K,y+=n*G,w+=n*W,b+=n*$,_+=n*Y,E+=n*J,A+=n*V,I+=n*Q,n=e[5],h+=n*U,l+=n*j,f+=n*D,d+=n*B,p+=n*q,g+=n*z,m+=n*F,v+=n*H,y+=n*K,w+=n*G,b+=n*W,_+=n*$,E+=n*Y,A+=n*J,I+=n*V,S+=n*Q,n=e[6],l+=n*U,f+=n*j,d+=n*D,p+=n*B,g+=n*q,m+=n*z,v+=n*F,y+=n*H,w+=n*K,b+=n*G,_+=n*W,E+=n*$,A+=n*Y,I+=n*J,S+=n*V,P+=n*Q,n=e[7],f+=n*U,d+=n*j,p+=n*D,g+=n*B,m+=n*q,v+=n*z,y+=n*F,w+=n*H,b+=n*K,_+=n*G,E+=n*W,A+=n*$,I+=n*Y,S+=n*J,P+=n*V,O+=n*Q,n=e[8],d+=n*U,p+=n*j,g+=n*D,m+=n*B,v+=n*q,y+=n*z,w+=n*F,b+=n*H,_+=n*K,E+=n*G,A+=n*W,I+=n*$,S+=n*Y,P+=n*J,O+=n*V,N+=n*Q,n=e[9],p+=n*U,g+=n*j,m+=n*D,v+=n*B,y+=n*q,w+=n*z,b+=n*F,_+=n*H,E+=n*K,A+=n*G,I+=n*W,S+=n*$,P+=n*Y,O+=n*J,N+=n*V,k+=n*Q,n=e[10],g+=n*U,m+=n*j,v+=n*D,y+=n*B,w+=n*q,b+=n*z,_+=n*F,E+=n*H,A+=n*K,I+=n*G,S+=n*W,P+=n*$,O+=n*Y,N+=n*J,k+=n*V,R+=n*Q,n=e[11],m+=n*U,v+=n*j,y+=n*D,w+=n*B,b+=n*q,_+=n*z,E+=n*F,A+=n*H,I+=n*K,S+=n*G,P+=n*W,O+=n*$,N+=n*Y,k+=n*J,R+=n*V,x+=n*Q,n=e[12],v+=n*U,y+=n*j,w+=n*D,b+=n*B,_+=n*q,E+=n*z,A+=n*F,I+=n*H,S+=n*K,P+=n*G,O+=n*W,N+=n*$,k+=n*Y,R+=n*J,x+=n*V,C+=n*Q,n=e[13],y+=n*U,w+=n*j,b+=n*D,_+=n*B,E+=n*q,A+=n*z,I+=n*F,S+=n*H,P+=n*K,O+=n*G,N+=n*W,k+=n*$,R+=n*Y,x+=n*J,C+=n*V,M+=n*Q,n=e[14],w+=n*U,b+=n*j,_+=n*D,E+=n*B,A+=n*q,I+=n*z,S+=n*F,P+=n*H,O+=n*K,N+=n*G,k+=n*W,R+=n*$,x+=n*Y,C+=n*J,M+=n*V,T+=n*Q,n=e[15],b+=n*U,_+=n*j,E+=n*D,A+=n*B,I+=n*q,S+=n*z,P+=n*F,O+=n*H,N+=n*K,k+=n*G,R+=n*W,x+=n*$,C+=n*Y,M+=n*J,T+=n*V,L+=n*Q,s+=38*_,o+=38*E,a+=38*A,c+=38*I,u+=38*S,h+=38*P,l+=38*O,f+=38*N,d+=38*k,p+=38*R,g+=38*x,m+=38*C,v+=38*M,y+=38*T,w+=38*L,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=p,t[10]=g,t[11]=m,t[12]=v,t[13]=y,t[14]=w,t[15]=b}function d(t,e){f(t,e,e)}function p(t,e){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),p=s(),g=s(),m=s(),v=s();for(let e=0;e<31;e++)r[e]=t[e];r[31]=127&t[31]|64,r[0]&=248,function(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(n,e);for(let t=0;t<16;t++)o[t]=n[t];i[0]=g[0]=1;for(let t=254;t>=0;--t){const e=r[t>>>3]>>>(7&t)&1;u(i,o,e),u(p,g,e),h(m,i,p),l(i,i,p),h(p,o,g),l(o,o,g),d(g,m),d(v,i),f(i,p,i),f(p,o,m),h(m,i,p),l(i,i,p),d(o,i),l(p,g,v),f(i,p,a),h(i,i,g),f(p,p,i),f(i,g,v),f(g,o,n),d(o,m),u(i,o,e),u(p,g,e)}for(let t=0;t<16;t++)n[t+16]=i[t],n[t+32]=p[t],n[t+48]=o[t],n[t+64]=g[t];const y=n.subarray(32),w=n.subarray(16);!function(t,e){const r=s();for(let t=0;t<16;t++)r[t]=e[t];for(let t=253;t>=0;t--)d(r,r),2!==t&&4!==t&&f(r,r,e);for(let e=0;e<16;e++)t[e]=r[e]}(y,y),f(w,w,y);const b=new Uint8Array(32);return function(t,e){const r=s(),n=s();for(let t=0;t<16;t++)n[t]=e[t];c(n),c(n),c(n);for(let t=0;t<2;t++){r[0]=n[0]-65517;for(let t=1;t<15;t++)r[t]=n[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,u(n,r,1-t)}for(let e=0;e<16;e++)t[2*e]=255&n[e],t[2*e+1]=n[e]>>8}(b,w),b}e.Au=function(t){const r=(0,n.randomBytes)(32,t),s=function(t){if(t.length!==e.KS)throw new Error(`x25519: seed must be ${e.KS} bytes`);const r=new Uint8Array(t);return{publicKey:(n=r,p(n,o)),secretKey:r};var n}(r);return(0,i.wipe)(r),s},e.gi=function(t,r,n=!1){if(t.length!==e.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==e.kz)throw new Error("X25519: incorrect public key length");const i=p(t,r);if(n){let t=0;for(let e=0;e<i.length;e++)t|=i[e];if(0===t)throw new Error("X25519: invalid shared key")}return i}},926:(t,e,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const t=n();return t.subtle||t.webkitSubtle}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowserCryptoAvailable=e.getSubtleCrypto=e.getBrowerCrypto=void 0,e.getBrowerCrypto=n,e.getSubtleCrypto=i,e.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},8618:(t,e)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isNode=e.isReactNative=void 0,e.isReactNative=r,e.isNode=n,e.isBrowser=function(){return!r()&&!n()}},1468:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(926),e),n.__exportStar(r(8618),e)},639:(t,e,r)=>{"use strict";r.r(e),r.d(e,{EthereumProvider:()=>Ea,OPTIONAL_EVENTS:()=>ua,OPTIONAL_METHODS:()=>aa,REQUIRED_EVENTS:()=>ca,REQUIRED_METHODS:()=>oa,default:()=>_a});var n={};r.r(n),r.d(n,{identity:()=>j});var i={};r.r(i),r.d(i,{base2:()=>D});var s={};r.r(s),r.d(s,{base8:()=>B});var o={};r.r(o),r.d(o,{base10:()=>q});var a={};r.r(a),r.d(a,{base16:()=>z,base16upper:()=>F});var c={};r.r(c),r.d(c,{base32:()=>H,base32hex:()=>$,base32hexpad:()=>J,base32hexpadupper:()=>V,base32hexupper:()=>Y,base32pad:()=>G,base32padupper:()=>W,base32upper:()=>K,base32z:()=>Q});var u={};r.r(u),r.d(u,{base36:()=>X,base36upper:()=>Z});var h={};r.r(h),r.d(h,{base58btc:()=>tt,base58flickr:()=>et});var l={};r.r(l),r.d(l,{base64:()=>rt,base64pad:()=>nt,base64url:()=>it,base64urlpad:()=>st});var f={};r.r(f),r.d(f,{base256emoji:()=>ut});var d={};r.r(d),r.d(d,{sha256:()=>xt,sha512:()=>Ct});var p={};r.r(p),r.d(p,{identity:()=>Tt});var g={};r.r(g),r.d(g,{code:()=>Ut,decode:()=>Dt,encode:()=>jt,name:()=>Lt});var m={};r.r(m),r.d(m,{code:()=>Ft,decode:()=>Kt,encode:()=>Ht,name:()=>zt});var v=r(7187),y=r.n(v),w=r(5501),b=r(512),_=r(1416),E=r(3294),A=r(7664);function I(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function S(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?I(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function P(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=S(e);let n=0;for(const e of t)r.set(e,n),n+=e.length;return I(r)}const O=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,i=0;t[e]===c;)n++,e++;for(var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);t[e];){var h=r[t.charCodeAt(e)];if(255===h)return;for(var l=0,f=s-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=a*o[f]>>>0,o[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,e++}if(" "!==t[e]){for(var d=s-i;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(n+(s-d)),g=n;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,s=e.length;i!==s&&0===e[i];)i++,r++;for(var o=(s-i)*h+1>>>0,u=new Uint8Array(o);i!==s;){for(var l=e[i],f=0,d=o-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*u[d]>>>0,u[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=t.charAt(u[p]);return g},decodeUnsafe:l,decode:function(t){var r=l(t);if(r)return r;throw new Error(`Non-${e} character`)}}},N=(new Uint8Array(0),t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")});class k{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class R{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return C(this,t)}}class x{constructor(t){this.decoders=t}or(t){return C(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const C=(t,e)=>new x({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class M{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new k(t,e,r),this.decoder=new R(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const T=({name:t,prefix:e,encode:r,decode:n})=>new M(t,e,r,n),L=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=O(r,e);return T({prefix:t,name:e,encode:n,decode:t=>N(i(t))})},U=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>T({prefix:e,name:t,encode:t=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<t.length;++n)for(a=a<<8|t[n],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(t,n,r),decode:e=>((t,e,r,n)=>{const i={};for(let t=0;t<e.length;++t)i[e[t]]=t;let s=t.length;for(;"="===t[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let e=0;e<s;++e){const s=i[t[e]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(e,n,r,t)}),j=T({prefix:"\0",name:"identity",encode:t=>(t=>(new TextDecoder).decode(t))(t),decode:t=>(t=>(new TextEncoder).encode(t))(t)}),D=U({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),B=U({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),q=L({prefix:"9",name:"base10",alphabet:"0123456789"}),z=U({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),F=U({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),H=U({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),K=U({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),G=U({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),W=U({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$=U({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Y=U({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J=U({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),V=U({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q=U({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),X=L({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Z=L({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),tt=L({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),et=L({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),rt=U({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nt=U({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),it=U({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),st=U({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ot=Array.from(""),at=ot.reduce(((t,e,r)=>(t[r]=e,t)),[]),ct=ot.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]),ut=T({prefix:"",name:"base256emoji",encode:function(t){return t.reduce(((t,e)=>t+at[e]),"")},decode:function(t){const e=[];for(const r of t){const t=ct[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}});var ht=128,lt=-128,ft=Math.pow(2,31),dt=Math.pow(2,7),pt=Math.pow(2,14),gt=Math.pow(2,21),mt=Math.pow(2,28),vt=Math.pow(2,35),yt=Math.pow(2,42),wt=Math.pow(2,49),bt=Math.pow(2,56),_t=Math.pow(2,63);const Et=function t(e,r,n){r=r||[];for(var i=n=n||0;e>=ft;)r[n++]=255&e|ht,e/=128;for(;e&lt;)r[n++]=255&e|ht,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},At=function(t){return t<dt?1:t<pt?2:t<gt?3:t<mt?4:t<vt?5:t<yt?6:t<wt?7:t<bt?8:t<_t?9:10},It=(t,e,r=0)=>(Et(t,e,r),e),St=t=>At(t),Pt=(t,e)=>{const r=e.byteLength,n=St(t),i=n+St(r),s=new Uint8Array(i+r);return It(t,s,0),It(r,s,n),s.set(e,i),new Ot(t,r,e,s)};class Ot{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}const Nt=({name:t,code:e,encode:r})=>new kt(t,e,r);class kt{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Pt(this.code,e):e.then((t=>Pt(this.code,t)))}throw Error("Unknown type, must be binary type")}}const Rt=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xt=Nt({name:"sha2-256",code:18,encode:Rt("SHA-256")}),Ct=Nt({name:"sha2-512",code:19,encode:Rt("SHA-512")}),Mt=N,Tt={code:0,name:"identity",encode:Mt,digest:t=>Pt(0,Mt(t))},Lt="raw",Ut=85,jt=t=>N(t),Dt=t=>N(t),Bt=new TextEncoder,qt=new TextDecoder,zt="json",Ft=512,Ht=t=>Bt.encode(JSON.stringify(t)),Kt=t=>JSON.parse(qt.decode(t));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Gt={...n,...i,...s,...o,...a,...c,...u,...h,...l,...f};function Wt(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $t=Wt("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),Yt=Wt("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{const e=S((t=t.substring(1)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),Jt={utf8:$t,"utf-8":$t,hex:Gt.base16,latin1:Yt,ascii:Yt,binary:Yt,...Gt};function Vt(t,e="utf8"){const r=Jt[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${t}`):I(globalThis.Buffer.from(t,"utf-8"))}function Qt(t,e="utf8"){const r=Jt[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}var Xt=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,s=e.length;i<s;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},Zt=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"},te=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},ee=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"},re=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ne=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},ie=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,se=3,oe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],ae=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ce(t){var e=function(t){return""!==t&&oe.reduce((function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]}),!1)}(t);if(!e)return null;var r=e[0],n=e[1];if("searchbot"===r)return new re;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<se&&(i=Xt(Xt([],i,!0),function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(se-i.length),!0)):i=[];var s=i.join("."),o=function(t){for(var e=0,r=ae.length;e<r;e++){var n=ae[e],i=n[0];if(n[1].exec(t))return i}return null}(t),a=ie.exec(t);return a&&a[1]?new ee(r,s,o,a[1]):new Zt(r,s,o)}var ue=r(6736),he=r(2873),le=r(5755),fe=r(7563);r(1882);const de={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function pe(t,e){return t.includes(":")?[t]:e.chains||[]}const ge="base10",me="base16",ve="base64pad",ye="utf8";function we(){return Qt((0,_.randomBytes)(32),me)}function be(t){return Qt((0,E.vp)(Vt(t,ye)),me)}function _e(t){return Number(Qt(t,ge))}function Ee(t){const e=Vt(t,ve),r=e.slice(0,1);if(1===_e(r)){const t=33,n=t+12,i=e.slice(1,t),s=e.slice(t,n);return{type:r,sealed:e.slice(n),iv:s,senderPublicKey:i}}const n=e.slice(1,13);return{type:r,sealed:e.slice(13),iv:n}}function Ae(t){const e=t?.type||0;if(1===e){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Ie(t){return 1===t.type&&"string"==typeof t.senderPublicKey&&"string"==typeof t.receiverPublicKey}var Se=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,ke=(t,e,r)=>e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Re=(t,e)=>{for(var r in e||(e={}))Oe.call(e,r)&&ke(t,r,e[r]);if(Pe)for(var r of Pe(e))Ne.call(e,r)&&ke(t,r,e[r]);return t};const xe="ReactNative",Ce={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Me="js";function Te(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Le(){return!(0,he.getDocument)()&&!!(0,he.getNavigator)()&&navigator.product===xe}function Ue(){return!Te()&&!!(0,he.getNavigator)()}function je(){return Le()?Ce.reactNative:Te()?Ce.node:Ue()?Ce.browser:Ce.unknown}function De(t,e,n){const i=function(){if(je()===Ce.reactNative&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:t,Version:e}=r.g.Platform;return[t,e].join("-")}const t=e?ce(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ne:"undefined"!=typeof navigator?ce(navigator.userAgent):"undefined"!=typeof process&&process.version?new te(process.version.slice(1)):null;var e;if(null===t)return"unknown";const n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[n,t.name,t.version].join("-"):[n,t.version].join("-")}(),s=function(){var t;const e=je();return e===Ce.browser?[e,(null==(t=(0,he.getLocation)())?void 0:t.host)||"unknown"].join(":"):e}();return[[t,e].join("-"),[Me,n].join("-"),i,s].join("/")}function Be(t,e){return t.filter((t=>e.includes(t))).length===t.length}function qe(t){return Object.fromEntries(t.entries())}function ze(t){return new Map(Object.entries(t))}function Fe(t=ue.FIVE_MINUTES,e){const r=(0,ue.toMiliseconds)(t||ue.FIVE_MINUTES);let n,i,s;return{resolve:t=>{s&&n&&(clearTimeout(s),n(t))},reject:t=>{s&&i&&(clearTimeout(s),i(t))},done:()=>new Promise(((t,o)=>{s=setTimeout((()=>{o(new Error(e))}),r),n=t,i=o}))}}function He(t,e,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),e);try{n(await t)}catch(t){i(t)}clearTimeout(s)}))}function Ke(t,e){if("string"==typeof e&&e.startsWith(`${t}:`))return e;if("topic"===t.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===t.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Ge(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof r)n.topic=r;else{if("id"!==e||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);n.id=Number(r)}return n}function We(t,e){return(0,ue.fromMiliseconds)((e||Date.now())+(0,ue.toMiliseconds)(t))}function $e(t){return Date.now()>=(0,ue.toMiliseconds)(t)}function Ye(t,e){return`${t}${e?`:${e}`:""}`}function Je(t=[],e=[]){return[...new Set([...t,...e])]}function Ve(t){return t?.relay||{protocol:"irn"}}function Qe(t){const e=de[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Xe=Object.defineProperty,Ze=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable,rr=(t,e,r)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;function nr(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach((e=>{if(e.startsWith(n)){const i=e.replace(n,""),s=t[e];r[i]=s}})),r}function ir(t){return t.startsWith("//")?t.substring(2):t}function sr(t){const e=[];return t.forEach((t=>{const[r,n]=t.split(":");e.push(`${r}:${n}`)})),e}function or(t){return t.includes(":")}function ar(t){return or(t)?t.split(":")[0]:t}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const cr={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ur={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function hr(t,e){const{message:r,code:n}=ur[t];return{message:e?`${r} ${e}`:r,code:n}}function lr(t,e){const{message:r,code:n}=cr[t];return{message:e?`${r} ${e}`:r,code:n}}function fr(t,e){return!!Array.isArray(t)&&(!(typeof e<"u"&&t.length)||t.every(e))}function dr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function pr(t){return typeof t>"u"}function gr(t,e){return!(!e||!pr(t))||"string"==typeof t&&!!t.trim().length}function mr(t,e){return!(!e||!pr(t))||"number"==typeof t&&!isNaN(t)}function vr(t){return!(!gr(t,!1)||!t.includes(":"))&&2===t.split(":").length}function yr(t){let e=!0;return fr(t)?t.length&&(e=t.every((t=>gr(t,!1)))):e=!1,e}function wr(t,e){let r=null;return Object.values(t).forEach((t=>{if(r)return;const n=function(t,e){let r=null;return yr(t?.methods)?yr(t?.events)||(r=lr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=lr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}(t,`${e}, namespace`);n&&(r=n)})),r}function br(t,e){let r=null;if(t&&dr(t)){const n=wr(t,e);n&&(r=n);const i=function(t,e){let r=null;return Object.values(t).forEach((t=>{if(r)return;const n=function(t,e){let r=null;return fr(t)?t.forEach((t=>{r||function(t){if(gr(t,!1)&&t.includes(":")){const e=t.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&vr(t)}}return!1}(t)||(r=lr("UNSUPPORTED_ACCOUNTS",`${e}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):r=lr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(t?.accounts,`${e} namespace`);n&&(r=n)})),r}(t,e);i&&(r=i)}else r=hr("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function _r(t){return gr(t.protocol,!0)}function Er(t){return typeof t<"u"&&null!==typeof t}function Ar(t,e){return!(!vr(e)||!function(t){const e=[];return Object.values(t).forEach((t=>{e.push(...sr(t.accounts))})),e}(t).includes(e))}function Ir(t,e,r){let n=null;const i=function(t){const e={};return Object.keys(t).forEach((r=>{var n;r.includes(":")?e[r]=t[r]:null==(n=t[r].chains)||n.forEach((n=>{e[n]={methods:t[r].methods,events:t[r].events}}))})),e}(t),s=function(t){const e={};return Object.keys(t).forEach((r=>{if(r.includes(":"))e[r]=t[r];else{const n=sr(t[r].accounts);n?.forEach((n=>{e[n]={accounts:t[r].accounts.filter((t=>t.includes(`${n}:`))),methods:t[r].methods,events:t[r].events}}))}})),e}(e),o=Object.keys(i),a=Object.keys(s),c=Sr(Object.keys(t)),u=Sr(Object.keys(e)),h=c.filter((t=>!u.includes(t)));return h.length&&(n=hr("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${h.toString()}\n      Received: ${Object.keys(e).toString()}`)),Be(o,a)||(n=hr("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(e).forEach((t=>{if(!t.includes(":")||n)return;const i=sr(e[t].accounts);i.includes(t)||(n=hr("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${i.toString()}`))})),o.forEach((t=>{n||(Be(i[t].methods,s[t].methods)?Be(i[t].events,s[t].events)||(n=hr("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${t}`)):n=hr("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${t}`))})),n}function Sr(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}var Pr=r(5150),Or=r(159),Nr=r(9107),kr=r(8200);class Rr extends kr.q{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class xr extends kr.q{constructor(t,e){super(),this.core=t,this.logger=e,this.records=new Map}}class Cr{constructor(t,e){this.logger=t,this.core=e}}class Mr extends kr.q{constructor(t,e){super(),this.relayer=t,this.logger=e}}class Tr extends kr.q{constructor(t){super()}}class Lr{constructor(t,e,r,n){this.core=t,this.logger=e,this.name=r}}class Ur extends kr.q{constructor(t,e){super(),this.relayer=t,this.logger=e}}class jr extends kr.q{constructor(t,e){super(),this.core=t,this.logger=e}}class Dr{constructor(t,e){this.projectId=t,this.logger=e}}class Br{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class qr{constructor(t){this.client=t}}var zr=r(5094),Fr=r(1050);const Hr="base64url",Kr="utf8",Gr=":",Wr="did",$r="key",Yr="base58btc",Jr="z",Vr="K36";function Qr(t){return Qt(Vt((0,zr.u)(t),Kr),Hr)}function Xr(t){const e=Vt(Vr,Yr),r=Jr+Qt(P([e,t]),Yr);return[Wr,$r,r].join(Gr)}function Zr(t=(0,_.randomBytes)(32)){return Fr._w(t)}r(3014);var tn=r(9303),en=r(6186);const rn=t=>t.split("?")[0],nn="undefined"!=typeof WebSocket?WebSocket:void 0!==r.g&&void 0!==r.g.WebSocket?r.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:"undefined"!=typeof self&&void 0!==self.WebSocket?self.WebSocket:r(7026);var sn=r(2307),on=r.n(sn),an=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){for(var n=0,i=0;t[e]===c;)n++,e++;for(var s=(t.length-e)*u+1>>>0,o=new Uint8Array(s);t[e];){var h=r[t.charCodeAt(e)];if(255===h)return;for(var l=0,f=s-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=a*o[f]>>>0,o[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,e++}if(" "!==t[e]){for(var d=s-i;d!==s&&0===o[d];)d++;for(var p=new Uint8Array(n+(s-d)),g=n;d!==s;)p[g++]=o[d++];return p}}}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,s=e.length;i!==s&&0===e[i];)i++,r++;for(var o=(s-i)*h+1>>>0,u=new Uint8Array(o);i!==s;){for(var l=e[i],f=0,d=o-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*u[d]>>>0,u[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}for(var p=o-n;p!==o&&0===u[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=t.charAt(u[p]);return g},decodeUnsafe:l,decode:function(t){var r=l(t);if(r)return r;throw new Error(`Non-${e} character`)}}};const cn=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class un{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class hn{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return fn(this,t)}}class ln{constructor(t){this.decoders=t}or(t){return fn(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const fn=(t,e)=>new ln({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dn{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new un(t,e,r),this.decoder=new hn(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const pn=({name:t,prefix:e,encode:r,decode:n})=>new dn(t,e,r,n),gn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=an(r,e);return pn({prefix:t,name:e,encode:n,decode:t=>cn(i(t))})},mn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>pn({prefix:e,name:t,encode:t=>((t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<t.length;++n)for(a=a<<8|t[n],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(t,n,r),decode:e=>((t,e,r,n)=>{const i={};for(let t=0;t<e.length;++t)i[e[t]]=t;let s=t.length;for(;"="===t[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let e=0;e<s;++e){const s=i[t[e]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(e,n,r,t)}),vn=pn({prefix:"\0",name:"identity",encode:t=>(t=>(new TextDecoder).decode(t))(t),decode:t=>(t=>(new TextEncoder).encode(t))(t)});var yn=Object.freeze({__proto__:null,identity:vn});const wn=mn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bn=Object.freeze({__proto__:null,base2:wn});const _n=mn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var En=Object.freeze({__proto__:null,base8:_n});const An=gn({prefix:"9",name:"base10",alphabet:"0123456789"});var In=Object.freeze({__proto__:null,base10:An});const Sn=mn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Pn=mn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var On=Object.freeze({__proto__:null,base16:Sn,base16upper:Pn});const Nn=mn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kn=mn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rn=mn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xn=mn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Cn=mn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mn=mn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Tn=mn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ln=mn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Un=mn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var jn=Object.freeze({__proto__:null,base32:Nn,base32upper:kn,base32pad:Rn,base32padupper:xn,base32hex:Cn,base32hexupper:Mn,base32hexpad:Tn,base32hexpadupper:Ln,base32z:Un});const Dn=gn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bn=gn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qn=Object.freeze({__proto__:null,base36:Dn,base36upper:Bn});const zn=gn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Fn=gn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hn=Object.freeze({__proto__:null,base58btc:zn,base58flickr:Fn});const Kn=mn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gn=mn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wn=mn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$n=mn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Yn=Object.freeze({__proto__:null,base64:Kn,base64pad:Gn,base64url:Wn,base64urlpad:$n});const Jn=Array.from(""),Vn=Jn.reduce(((t,e,r)=>(t[r]=e,t)),[]),Qn=Jn.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]),Xn=pn({prefix:"",name:"base256emoji",encode:function(t){return t.reduce(((t,e)=>t+Vn[e]),"")},decode:function(t){const e=[];for(const r of t){const t=Qn[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}});var Zn=Object.freeze({__proto__:null,base256emoji:Xn}),ti=128,ei=-128,ri=Math.pow(2,31),ni=Math.pow(2,7),ii=Math.pow(2,14),si=Math.pow(2,21),oi=Math.pow(2,28),ai=Math.pow(2,35),ci=Math.pow(2,42),ui=Math.pow(2,49),hi=Math.pow(2,56),li=Math.pow(2,63),fi=function t(e,r,n){r=r||[];for(var i=n=n||0;e>=ri;)r[n++]=255&e|ti,e/=128;for(;e&ei;)r[n++]=255&e|ti,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},di=function(t){return t<ni?1:t<ii?2:t<si?3:t<oi?4:t<ai?5:t<ci?6:t<ui?7:t<hi?8:t<li?9:10};const pi=(t,e,r=0)=>(fi(t,e,r),e),gi=t=>di(t),mi=(t,e)=>{const r=e.byteLength,n=gi(t),i=n+gi(r),s=new Uint8Array(i+r);return pi(t,s,0),pi(r,s,n),s.set(e,i),new vi(t,r,e,s)};class vi{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}const yi=({name:t,code:e,encode:r})=>new wi(t,e,r);class wi{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?mi(this.code,e):e.then((t=>mi(this.code,t)))}throw Error("Unknown type, must be binary type")}}const bi=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_i=yi({name:"sha2-256",code:18,encode:bi("SHA-256")}),Ei=yi({name:"sha2-512",code:19,encode:bi("SHA-512")});Object.freeze({__proto__:null,sha256:_i,sha512:Ei});const Ai=cn,Ii={code:0,name:"identity",encode:Ai,digest:t=>mi(0,Ai(t))};Object.freeze({__proto__:null,identity:Ii}),new TextEncoder,new TextDecoder;const Si={...yn,...bn,...En,...In,...On,...jn,...qn,...Hn,...Yn,...Zn};function Pi(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Oi(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ni=Oi("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),ki=Oi("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{const e=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Pi(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((t=t.substring(1)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),Ri={utf8:Ni,"utf-8":Ni,hex:Si.base16,latin1:ki,ascii:ki,binary:ki,...Si},xi="core",Ci=`wc@2:${xi}:`,Mi={database:":memory:"},Ti="client_ed25519_seed",Li=ue.ONE_DAY,Ui=ue.SIX_HOURS,ji="wss://relay.walletconnect.com",Di="wss://relay.walletconnect.org",Bi="relayer_message",qi="relayer_message_ack",zi="relayer_connect",Fi="relayer_disconnect",Hi="relayer_connection_stalled",Ki="relayer_transport_closed",Gi="relayer_publish",Wi="disconnect",$i=ue.ONE_SECOND/2,Yi="subscription_created",Ji="subscription_deleted",Vi="subscription_resubscribed",Qi=1e3*ue.FIVE_SECONDS,Xi={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},Zi="history_created",ts="history_updated",es="history_deleted",rs="expirer_created",ns="expirer_deleted",is="expirer_expired",ss="verify-api",os="https://verify.walletconnect.com";class as{constructor(t,e){this.core=t,this.logger=e,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){const t=await this.getKeyChain();typeof t<"u"&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,e)=>{this.isInitialized(),this.keychain.set(t,e),await this.persist()},this.get=t=>{this.isInitialized();const e=this.keychain.get(t);if(typeof e>"u"){const{message:e}=hr("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(e)}return e},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=(0,Nr.generateChildLogger)(e,this.name)}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,qe(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ze(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class cs{constructor(t,e,r){this.core=t,this.logger=e,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>(this.isInitialized(),Xr(Zr(await this.getClientSeed()).publicKey)),this.generateKeyPair=()=>{this.isInitialized();const t=function(){const t=A.Au();return{privateKey:Qt(t.secretKey,me),publicKey:Qt(t.publicKey,me)}}();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();const e=Zr(await this.getClientSeed()),r=we(),n=Li;return await async function(t,e,r,n,i=(0,ue.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Xr(n.publicKey),sub:t,aud:e,iat:i,exp:i+r},a=Vt([Qr((c={header:s,payload:o}).header),Qr(c.payload)].join("."),"utf8");var c;return function(t){return[Qr(t.header),Qr(t.payload),(e=t.signature,Qt(e,Hr))].join(".");var e}({header:s,payload:o,signature:Fr.Xx(n.secretKey,a)})}(r,t,n,e)},this.generateSharedKey=(t,e,r)=>{this.isInitialized();const n=function(t,e){const r=A.gi(Vt(t,me),Vt(e,me));return Qt(new b.t(E.mE,r).expand(32),me)}(this.getPrivateKey(t),e);return this.setSymKey(n,r)},this.setSymKey=async(t,e)=>{this.isInitialized();const r=e||function(t){return Qt((0,E.vp)(Vt(t,me)),me)}(t);return await this.keychain.set(r,t),r},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,e,r)=>{this.isInitialized();const n=Ae(r),i=(0,zr.u)(e);if(Ie(n)){const e=n.senderPublicKey,r=n.receiverPublicKey;t=await this.generateSharedKey(e,r)}const s=this.getSymKey(t),{type:o,senderPublicKey:a}=n;return function(t){const e=function(t){return Vt(`${t}`,ge)}(typeof t.type<"u"?t.type:0);if(1===_e(e)&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Vt(t.senderPublicKey,me):void 0,n=typeof t.iv<"u"?Vt(t.iv,me):(0,_.randomBytes)(12);return function(t){if(1===_e(t.type)){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Qt(P([t.type,t.senderPublicKey,t.iv,t.sealed]),ve)}return Qt(P([t.type,t.iv,t.sealed]),ve)}({type:e,sealed:new w.OK(Vt(t.symKey,me)).seal(n,Vt(t.message,ye)),iv:n,senderPublicKey:r})}({type:o,symKey:s,message:i,senderPublicKey:a})},this.decode=async(t,e,r)=>{this.isInitialized();const n=function(t,e){const r=Ee(t);return Ae({type:_e(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Qt(r.senderPublicKey,me):void 0,receiverPublicKey:e?.receiverPublicKey})}(e,r);if(Ie(n)){const e=n.receiverPublicKey,r=n.senderPublicKey;t=await this.generateSharedKey(e,r)}try{const r=function(t){const e=new w.OK(Vt(t.symKey,me)),{sealed:r,iv:n}=Ee(t.encoded),i=e.open(n,r);if(null===i)throw new Error("Failed to decrypt");return Qt(i,ye)}({symKey:this.getSymKey(t),encoded:e});return(0,zr.D)(r)}catch(e){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(e)}},this.getPayloadType=t=>_e(Ee(t).type),this.getPayloadSenderPublicKey=t=>{const e=Ee(t);return e.senderPublicKey?Qt(e.senderPublicKey,me):void 0},this.core=t,this.logger=(0,Nr.generateChildLogger)(e,this.name),this.keychain=r||new as(this.core,this.logger)}get context(){return(0,Nr.getLoggerContext)(this.logger)}async setPrivateKey(t,e){return await this.keychain.set(t,e),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Ti)}catch{t=we(),await this.keychain.set(Ti,t)}return function(t,e="utf8"){const r=Ri[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${t}`):Pi(globalThis.Buffer.from(t,"utf-8"))}(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class us extends Cr{constructor(t,e){super(t,e),this.logger=t,this.core=e,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const t=await this.getRelayerMessages();typeof t<"u"&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,e)=>{this.isInitialized();const r=be(e);let n=this.messages.get(t);return typeof n>"u"&&(n={}),typeof n[r]<"u"||(n[r]=e,this.messages.set(t,n),await this.persist()),r},this.get=t=>{this.isInitialized();let e=this.messages.get(t);return typeof e>"u"&&(e={}),e},this.has=(t,e)=>(this.isInitialized(),typeof this.get(t)[be(e)]<"u"),this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=(0,Nr.generateChildLogger)(t,this.name),this.core=e}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,qe(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ze(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class hs extends Mr{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.events=new v.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,ue.toMiliseconds)(ue.TEN_SECONDS),this.queueTimeout=(0,ue.toMiliseconds)(ue.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(t,e,r)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:e,opts:r}});try{const n=r?.ttl||Ui,i=Ve(r),s=r?.prompt||!1,o=r?.tag||0,a=r?.id||(0,en.getBigIntRpcId)().toString(),c={topic:t,message:e,opts:{ttl:n,relay:i,prompt:s,tag:o,id:a}},u=setTimeout((()=>this.queue.set(a,c)),this.queueTimeout);try{await await He(this.rpcPublish(t,e,n,i,s,o,a),this.publishTimeout),clearTimeout(u),this.relayer.events.emit(Gi,c)}catch{return this.logger.debug("Publishing Payload stalled"),void(this.needsTransportRestart=!0)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:e,opts:r}})}catch(t){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(t),t}},this.on=(t,e)=>{this.events.on(t,e)},this.once=(t,e)=>{this.events.once(t,e)},this.off=(t,e)=>{this.events.off(t,e)},this.removeListener=(t,e)=>{this.events.removeListener(t,e)},this.relayer=t,this.logger=(0,Nr.generateChildLogger)(e,this.name),this.registerEventListeners()}get context(){return(0,Nr.getLoggerContext)(this.logger)}rpcPublish(t,e,r,n,i,s,o){var a,c,u,h;const l={method:Qe(n.protocol).publish,params:{topic:t,message:e,ttl:r,prompt:i,tag:s},id:o};return pr(null==(a=l.params)?void 0:a.prompt)&&(null==(c=l.params)||delete c.prompt),pr(null==(u=l.params)?void 0:u.tag)&&(null==(h=l.params)||delete h.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:l}),this.relayer.request(l)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach((async t=>{const{topic:e,message:r,opts:n}=t;await this.publish(e,r,n)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Hi);this.checkQueue()})),this.relayer.on(qi,(t=>{this.onPublish(t.id.toString())}))}}class ls{constructor(){this.map=new Map,this.set=(t,e)=>{const r=this.get(t);this.exists(t,e)||this.map.set(t,[...r,e])},this.get=t=>this.map.get(t)||[],this.exists=(t,e)=>this.get(t).includes(e),this.delete=(t,e)=>{if(typeof e>"u")return void this.map.delete(t);if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,e))return;const n=r.filter((t=>t!==e));n.length?this.map.set(t,n):this.map.delete(t)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var fs=Object.defineProperty,ds=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,gs=Object.getOwnPropertySymbols,ms=Object.prototype.hasOwnProperty,vs=Object.prototype.propertyIsEnumerable,ys=(t,e,r)=>e in t?fs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ws=(t,e)=>{for(var r in e||(e={}))ms.call(e,r)&&ys(t,r,e[r]);if(gs)for(var r of gs(e))vs.call(e,r)&&ys(t,r,e[r]);return t},bs=(t,e)=>ds(t,ps(e));class _s extends Ur{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.subscriptions=new Map,this.topicMap=new ls,this.events=new v.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ci,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,e)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:e}});try{const r=Ve(e),n={topic:t,relay:r};this.pending.set(t,n);const i=await this.rpcSubscribe(t,r);return this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:e}}),i}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,e)=>{await this.restartToComplete(),this.isInitialized(),typeof e?.id<"u"?await this.unsubscribeById(t,e.id,e):await this.unsubscribeByTopic(t,e)},this.isSubscribed=async t=>!!this.topics.includes(t)||await new Promise(((e,r)=>{const n=new ue.Watch;n.start(this.pendingSubscriptionWatchLabel);const i=setInterval((()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),e(!0)),n.elapsed(this.pendingSubscriptionWatchLabel)>=Qi&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),r(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1)),this.on=(t,e)=>{this.events.on(t,e)},this.once=(t,e)=>{this.events.once(t,e)},this.off=(t,e)=>{this.events.off(t,e)},this.removeListener=(t,e)=>{this.events.removeListener(t,e)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=(0,Nr.generateChildLogger)(e,this.name),this.clientId=""}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,e){let r=!1;try{r=this.getSubscription(t).topic===e}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,e){const r=this.topicMap.get(t);await Promise.all(r.map((async r=>await this.unsubscribeById(t,r,e))))}async unsubscribeById(t,e,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:r}});try{const n=Ve(r);await this.rpcUnsubscribe(t,e,n);const i=lr("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,e,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:r}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,e){const r={method:Qe(e.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await He(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Hi)}return be(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const e={method:Qe(t[0].relay.protocol).batchSubscribe,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:e});try{return await await He(this.relayer.request(e),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Hi)}}rpcUnsubscribe(t,e,r){const n={method:Qe(r.protocol).unsubscribe,params:{topic:t,id:e}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(t,e){this.setSubscription(t,bs(ws({},e),{id:t})),this.pending.delete(e.topic)}onBatchSubscribe(t){t.length&&t.forEach((t=>{this.setSubscription(t.id,ws({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(t,e,r){this.events.removeAllListeners(e),this.hasSubscription(e,t)&&this.deleteSubscription(e,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,e){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:e}),this.addSubscription(t,e))}addSubscription(t,e){this.subscriptions.set(t,ws({},e)),this.topicMap.set(e.topic,t),this.events.emit(Yi,e)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const e=this.subscriptions.get(t);if(!e){const{message:e}=hr("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(e)}return e}deleteSubscription(t,e){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:e});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(Ji,bs(ws({},r),{reason:e}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let e=0;e<t;e++){const t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(Vi)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:t}=hr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const e=await this.rpcBatchSubscribe(t);fr(e)&&this.onBatchSubscribe(e.map(((e,r)=>bs(ws({},t[r]),{id:e}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach((e=>{t.push(e)})),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(zi,(async()=>{await this.onConnect()})),this.relayer.on(Fi,(()=>{this.onDisconnect()})),this.events.on(Yi,(async t=>{const e=Yi;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()})),this.events.on(Ji,(async t=>{const e=Ji;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise((t=>{const e=setInterval((()=>{this.restartInProgress||(clearInterval(e),t())}),this.pollingInterval)}))}}var Es=Object.defineProperty,As=Object.getOwnPropertySymbols,Is=Object.prototype.hasOwnProperty,Ss=Object.prototype.propertyIsEnumerable,Ps=(t,e,r)=>e in t?Es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;class Os extends Tr{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new v.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(t){throw this.logger.debug("Failed to Publish Request"),this.logger.error(t),t}},this.core=t.core,this.logger=typeof t.logger<"u"&&"string"!=typeof t.logger?(0,Nr.generateChildLogger)(t.logger,this.name):(0,Nr.pino)((0,Nr.getDefaultLoggerOptions)({level:t.logger||"error"})),this.messages=new us(this.logger,t.core),this.subscriber=new _s(this,this.logger),this.publisher=new hs(this,this.logger),this.relayUrl=t?.relayUrl||ji,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Di}...`),await this.restartTransport(Di)}this.registerEventListeners(),this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,Nr.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,e,r){this.isInitialized(),await this.publisher.publish(t,e,r),await this.recordMessageEvent({topic:t,message:e,publishedAt:Date.now()})}async subscribe(t,e){var r;this.isInitialized();let n=(null==(r=this.subscriber.topicMap.get(t))?void 0:r[0])||"";return n||(await Promise.all([new Promise((e=>{this.subscriber.once(Yi,(r=>{r.topic===t&&e()}))})),new Promise((async r=>{n=await this.subscriber.subscribe(t,e),r()}))]),n)}async unsubscribe(t,e){this.isInitialized(),await this.subscriber.unsubscribe(t,e)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ki))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise((t=>{this.initialized||t(),this.subscriber.once(Vi,(()=>{t()}))})),await Promise.race([new Promise((async(t,e)=>{await He(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((t=>e(t))).then((()=>t())).finally((()=>this.removeListener(Ki,this.rejectTransportOpen)))})),new Promise((t=>this.once(Ki,this.rejectTransportOpen)))])])}catch(t){this.logger.error(t);const e=t;if(!this.isConnectionStalled(e.message))throw t;this.events.emit(Ki)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise((t=>{this.provider.once(Wi,(()=>{t()}))})),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some((e=>t.includes(e)))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new tn.JsonRpcProvider(new class{constructor(t){if(this.url=t,this.events=new v.EventEmitter,this.registering=!1,!(0,en.isWsUrl)(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){return new Promise(((t,e)=>{void 0!==this.socket?(this.socket.onclose=e=>{this.onClose(e),t()},this.socket.close()):e(new Error("Connection already closed"))}))}async send(t,e){void 0===this.socket&&(this.socket=await this.register());try{this.socket.send((0,zr.u)(t))}catch(e){this.onError(t.id,e)}}register(t=this.url){if(!(0,en.isWsUrl)(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((t,e)=>{this.events.once("register_error",(t=>{this.resetMaxListeners(),e(t)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),void 0===this.socket)return e(new Error("WebSocket connection is missing or invalid"));t(this.socket)}))}))}return this.url=t,this.registering=!0,new Promise(((e,n)=>{const i=(0,en.isReactNative)()?void 0:{rejectUnauthorized:!(0,en.isLocalhostUrl)(t)},s=new nn(t,[],i);"undefined"!=typeof WebSocket||void 0!==r.g&&void 0!==r.g.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket?s.onerror=t=>{const e=t;n(this.emitError(e.error))}:s.on("error",(t=>{n(this.emitError(t))})),s.onopen=()=>{this.onOpen(s),e(s)}}))}onOpen(t){t.onmessage=t=>this.onPayload(t),t.onclose=t=>this.onClose(t),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(void 0===t.data)return;const e="string"==typeof t.data?(0,zr.D)(t.data):t.data;this.events.emit("payload",e)}onError(t,e){const r=this.parseError(e),n=r.message||r.toString(),i=(0,en.formatJsonRpcError)(t,n);this.events.emit("payload",i)}parseError(t,e=this.url){return(0,en.parseConnectionError)(t,rn(e),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(t){const e=this.parseError(new Error((null==t?void 0:t.message)||`WebSocket connection failed for host: ${rn(this.url)}`));return this.events.emit("register_error",e),e}}(function({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c={auth:i,ua:De(t,e,n),projectId:s,useOnCloseEvent:o||void 0},u=function(t,e){let r=fe.parse(t);return r=Re(Re({},r),e),fe.stringify(r)}(a[1]||"",c);return a[0]+"?"+u}({sdkVersion:"2.9.1",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:e,message:r}=t;await this.messages.set(e,r)}async shouldIgnoreMessageEvent(t){const{topic:e,message:r}=t;if(!r||0===r.length)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(e))return this.logger.debug(`Ignoring message for non-subscribed topic ${e}`),!0;const n=this.messages.has(e,r);return n&&this.logger.debug(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),(0,en.isJsonRpcRequest)(t)){if(!t.method.endsWith("_subscription"))return;const e=t.params,{topic:r,message:n,publishedAt:i}=e.data,s={topic:r,message:n,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((t,e)=>{for(var r in e||(e={}))Is.call(e,r)&&Ps(t,r,e[r]);if(As)for(var r of As(e))Ss.call(e,r)&&Ps(t,r,e[r]);return t})({type:"event",event:e.id},s)),this.events.emit(e.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}else(0,en.isJsonRpcResponse)(t)&&this.events.emit(qi,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Bi,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const e=(0,en.formatJsonRpcResult)(t.id,!0);await this.provider.connection.send(e)}registerProviderListeners(){this.provider.on("payload",(t=>this.onProviderPayload(t))),this.provider.on("connect",(()=>{this.events.emit(zi)})),this.provider.on(Wi,(()=>{this.onProviderDisconnect()})),this.provider.on("error",(t=>{this.logger.error(t),this.events.emit("relayer_error",t)}))}registerEventListeners(){this.events.on(Hi,(async()=>{await this.restartTransport()}))}onProviderDisconnect(){this.events.emit(Fi),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout((async()=>{await this.restartTransport()}),(0,ue.toMiliseconds)($i))}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise((t=>{const e=setInterval((()=>{this.connected&&(clearInterval(e),t())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var Ns=Object.defineProperty,ks=Object.getOwnPropertySymbols,Rs=Object.prototype.hasOwnProperty,xs=Object.prototype.propertyIsEnumerable,Cs=(t,e,r)=>e in t?Ns(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ms=(t,e)=>{for(var r in e||(e={}))Rs.call(e,r)&&Cs(t,r,e[r]);if(ks)for(var r of ks(e))xs.call(e,r)&&Cs(t,r,e[r]);return t};class Ts extends Lr{constructor(t,e,r,n=Ci,i=void 0){super(t,e,r,n),this.core=t,this.logger=e,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>{this.getKey&&null!==t&&!pr(t)?this.map.set(this.getKey(t),t):function(t){var e;return null==(e=t?.proposer)?void 0:e.publicKey}(t)?this.map.set(t.id,t):function(t){return t?.topic}(t)&&this.map.set(t.topic,t)})),this.cached=[],this.initialized=!0)},this.set=async(t,e)=>{this.isInitialized(),this.map.has(t)?await this.update(t,e):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:e}),this.map.set(t,e),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter((e=>Object.keys(t).every((r=>on()(e[r],t[r]))))):this.values),this.update=async(t,e)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:e});const r=Ms(Ms({},this.getData(t)),e);this.map.set(t,r),await this.persist()},this.delete=async(t,e)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:e}),this.map.delete(t),await this.persist())},this.logger=(0,Nr.generateChildLogger)(e,this.name),this.storagePrefix=n,this.getKey=i}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const e=this.map.get(t);if(!e){const{message:e}=hr("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(e),new Error(e)}return e}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:t}=hr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Ls{constructor(t,e){this.core=t,this.logger=e,this.name="pairing",this.version="0.3",this.events=new(y()),this.initialized=!1,this.storagePrefix=Ci,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async()=>{this.isInitialized();const t=we(),e=await this.core.crypto.setSymKey(t),r=We(ue.FIVE_MINUTES),n={protocol:"irn"},i={topic:e,expiry:r,relay:n,active:!1},s=function(t){return`${t.protocol}:${t.topic}@${t.version}?`+fe.stringify(((t,e)=>{for(var r in e||(e={}))tr.call(e,r)&&rr(t,r,e[r]);if(Ze)for(var r of Ze(e))er.call(e,r)&&rr(t,r,e[r]);return t})({symKey:t.symKey},function(t,e="-"){const r={};return Object.keys(t).forEach((n=>{const i="relay"+e+n;t[n]&&(r[i]=t[n])})),r}(t.relay)))}({protocol:this.core.protocol,version:this.core.version,topic:e,symKey:t,relay:n});return await this.pairings.set(e,i),await this.core.relayer.subscribe(e),this.core.expirer.set(e,r),{topic:e,uri:s}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);const{topic:e,symKey:r,relay:n}=function(t){const e=t.indexOf(":"),r=-1!==t.indexOf("?")?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=fe.parse(s);return{protocol:n,topic:ir(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:nr(o)}}(t.uri);if(this.pairings.keys.includes(e))throw new Error(`Pairing already exists: ${e}`);if(this.core.crypto.hasKeys(e))throw new Error(`Keychain already exists: ${e}`);const i=We(ue.FIVE_MINUTES),s={topic:e,relay:n,expiry:i,active:!1};return await this.pairings.set(e,s),await this.core.crypto.setSymKey(r,e),await this.core.relayer.subscribe(e,{relay:n}),this.core.expirer.set(e,i),t.activatePairing&&await this.activate({topic:e}),s},this.activate=async({topic:t})=>{this.isInitialized();const e=We(ue.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:e}),this.core.expirer.set(t,e)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:e}=t;if(this.pairings.keys.includes(e)){const t=await this.sendRequest(e,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=Fe();this.events.once(Ye("pairing_ping",t),(({error:t})=>{t?i(t):n()})),await r()}},this.updateExpiry=async({topic:t,expiry:e})=>{this.isInitialized(),await this.pairings.update(t,{expiry:e})},this.updateMetadata=async({topic:t,metadata:e})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:e})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:e}=t;this.pairings.keys.includes(e)&&(await this.sendRequest(e,"wc_pairingDelete",lr("USER_DISCONNECTED")),await this.deletePairing(e))},this.sendRequest=async(t,e,r)=>{const n=(0,en.formatJsonRpcRequest)(e,r),i=await this.core.crypto.encode(t,n),s=Xi[e].req;return this.core.history.set(t,n),this.core.relayer.publish(t,i,s),n.id},this.sendResult=async(t,e,r)=>{const n=(0,en.formatJsonRpcResult)(t,r),i=await this.core.crypto.encode(e,n),s=await this.core.history.get(e,t),o=Xi[s.request.method].res;await this.core.relayer.publish(e,i,o),await this.core.history.resolve(n)},this.sendError=async(t,e,r)=>{const n=(0,en.formatJsonRpcError)(t,r),i=await this.core.crypto.encode(e,n),s=await this.core.history.get(e,t),o=Xi[s.request.method]?Xi[s.request.method].res:Xi.unregistered_method.res;await this.core.relayer.publish(e,i,o),await this.core.history.resolve(n)},this.deletePairing=async(t,e)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,lr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),e?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{const t=this.pairings.getAll().filter((t=>$e(t.expiry)));await Promise.all(t.map((t=>this.deletePairing(t.topic))))},this.onRelayEventRequest=t=>{const{topic:e,payload:r}=t;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(e,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(e,r);default:return this.onUnknownRpcMethodRequest(e,r)}},this.onRelayEventResponse=async t=>{const{topic:e,payload:r}=t,n=(await this.core.history.get(e,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(e,r):this.onUnknownRpcMethodResponse(n)},this.onPairingPingRequest=async(t,e)=>{const{id:r}=e;try{this.isValidPing({topic:t}),await this.sendResult(r,t,!0),this.events.emit("pairing_ping",{id:r,topic:t})}catch(e){await this.sendError(r,t,e),this.logger.error(e)}},this.onPairingPingResponse=(t,e)=>{const{id:r}=e;setTimeout((()=>{(0,en.isJsonRpcResult)(e)?this.events.emit(Ye("pairing_ping",r),{}):(0,en.isJsonRpcError)(e)&&this.events.emit(Ye("pairing_ping",r),{error:e.error})}),500)},this.onPairingDeleteRequest=async(t,e)=>{const{id:r}=e;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit("pairing_delete",{id:r,topic:t})}catch(e){await this.sendError(r,t,e),this.logger.error(e)}},this.onUnknownRpcMethodRequest=async(t,e)=>{const{id:r,method:n}=e;try{if(this.registeredMethods.includes(n))return;const e=lr("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,t,e),this.logger.error(e)}catch(e){await this.sendError(r,t,e),this.logger.error(e)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(lr("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`pair() params: ${t}`);throw new Error(e)}if(!function(t){if(gr(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}(t.uri)){const{message:e}=hr("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw new Error(e)}},this.isValidPing=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(e)}const{topic:e}=t;await this.isValidPairingTopic(e)},this.isValidDisconnect=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(e)}const{topic:e}=t;await this.isValidPairingTopic(e)},this.isValidPairingTopic=async t=>{if(!gr(t,!1)){const{message:e}=hr("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(e)}if(!this.pairings.keys.includes(t)){const{message:e}=hr("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(e)}if($e(this.pairings.get(t).expiry)){await this.deletePairing(t);const{message:e}=hr("EXPIRED",`pairing topic: ${t}`);throw new Error(e)}},this.core=t,this.logger=(0,Nr.generateChildLogger)(e,this.name),this.pairings=new Ts(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Nr.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Bi,(async t=>{const{topic:e,message:r}=t;if(!this.pairings.keys.includes(e)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const n=await this.core.crypto.decode(e,r);(0,en.isJsonRpcRequest)(n)?(this.core.history.set(e,n),this.onRelayEventRequest({topic:e,payload:n})):(0,en.isJsonRpcResponse)(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:e,payload:n}),this.core.history.delete(e,n.id))}))}registerExpirerEvents(){this.core.expirer.on(is,(async t=>{const{topic:e}=Ge(t.target);e&&this.pairings.keys.includes(e)&&(await this.deletePairing(e,!0),this.events.emit("pairing_expire",{topic:e}))}))}}class Us extends xr{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.records=new Map,this.events=new v.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.records.set(t.id,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,e,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:e,chainId:r}),this.records.has(e.id))return;const n={id:e.id,topic:t,request:{method:e.method,params:e.params||null},chainId:r,expiry:We(ue.THIRTY_DAYS)};this.records.set(n.id,n),this.events.emit(Zi,n)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;const e=await this.getRecord(t.id);typeof e.response>"u"&&(e.response=(0,en.isJsonRpcError)(t)?{error:t.error}:{result:t.result},this.records.set(e.id,e),this.events.emit(ts,e))},this.get=async(t,e)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:e}),await this.getRecord(e)),this.delete=(t,e)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:e}),this.values.forEach((r=>{if(r.topic===t){if(typeof e<"u"&&r.id!==e)return;this.records.delete(r.id),this.events.emit(es,r)}}))},this.exists=async(t,e)=>(this.isInitialized(),!!this.records.has(e)&&(await this.getRecord(e)).topic===t),this.on=(t,e)=>{this.events.on(t,e)},this.once=(t,e)=>{this.events.once(t,e)},this.off=(t,e)=>{this.events.off(t,e)},this.removeListener=(t,e)=>{this.events.removeListener(t,e)},this.logger=(0,Nr.generateChildLogger)(e,this.name)}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach((e=>{if(typeof e.response<"u")return;const r={topic:e.topic,request:(0,en.formatJsonRpcRequest)(e.request.method,e.request.params,e.id),chainId:e.chainId};return t.push(r)})),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const e=this.records.get(t);if(!e){const{message:e}=hr("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(e)}return e}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:t}=hr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Zi,(t=>{const e=Zi;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t}),this.persist()})),this.events.on(ts,(t=>{const e=ts;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t}),this.persist()})),this.events.on(es,(t=>{const e=es;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t}),this.persist()})),this.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((t=>{(0,ue.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))}))}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class js extends jr{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.expirations=new Map,this.events=new v.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.expirations.set(t.target,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{const e=this.formatTarget(t);return typeof this.getExpiration(e)<"u"}catch{return!1}},this.set=(t,e)=>{this.isInitialized();const r=this.formatTarget(t),n={target:r,expiry:e};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(rs,{target:r,expiration:n})},this.get=t=>{this.isInitialized();const e=this.formatTarget(t);return this.getExpiration(e)},this.del=t=>{if(this.isInitialized(),this.has(t)){const e=this.formatTarget(t),r=this.getExpiration(e);this.expirations.delete(e),this.events.emit(ns,{target:e,expiration:r})}},this.on=(t,e)=>{this.events.on(t,e)},this.once=(t,e)=>{this.events.once(t,e)},this.off=(t,e)=>{this.events.off(t,e)},this.removeListener=(t,e)=>{this.events.removeListener(t,e)},this.logger=(0,Nr.generateChildLogger)(e,this.name)}get context(){return(0,Nr.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if("string"==typeof t)return function(t){return Ke("topic",t)}(t);if("number"==typeof t)return function(t){return Ke("id",t)}(t);const{message:e}=hr("UNKNOWN_TYPE","Target type: "+typeof t);throw new Error(e)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:t}=hr("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const e=this.expirations.get(t);if(!e){const{message:e}=hr("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(e),new Error(e)}return e}checkExpiry(t,e){const{expiry:r}=e;(0,ue.toMiliseconds)(r)-Date.now()<=0&&this.expire(t,e)}expire(t,e){this.expirations.delete(t),this.events.emit(is,{target:t,expiration:e})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((t,e)=>this.checkExpiry(e,t)))}registerEventListeners(){this.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(rs,(t=>{const e=rs;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()})),this.events.on(is,(t=>{const e=is;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()})),this.events.on(ns,(t=>{const e=ns;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Ds extends Dr{constructor(t,e){super(t,e),this.projectId=t,this.logger=e,this.name=ss,this.initialized=!1,this.init=async t=>{Le()||!Ue()||(this.verifyUrl=t?.verifyUrl||os,await this.createIframe())},this.register=async t=>{var e;if(this.initialized||await this.init(),this.iframe)try{null==(e=this.iframe.contentWindow)||e.postMessage(t.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${t.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async t=>{var e;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${t.attestationId}`);const r=this.startAbortTimer(ue.FIVE_SECONDS),n=await fetch(`${this.verifyUrl}/attestation/${t.attestationId}`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?null==(e=await n.json())?void 0:e.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise(((t,e)=>{if(document.getElementById(ss))return t();const r=document.createElement("iframe");r.setAttribute("id",ss),r.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),r.style.display="none",r.addEventListener("load",(()=>{this.initialized=!0,t()})),r.addEventListener("error",(t=>{e(t)})),document.body.append(r),this.iframe=r})),new Promise((t=>{setTimeout((()=>t("iframe load timeout")),(0,ue.toMiliseconds)(ue.ONE_SECOND/2))}))])}catch(t){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(t)}},this.logger=(0,Nr.generateChildLogger)(e,this.name),this.verifyUrl=os,this.abortController=new AbortController,this.isDevEnv=Te()&&process.env.IS_VITEST}get context(){return(0,Nr.getLoggerContext)(this.logger)}startAbortTimer(t){return setTimeout((()=>this.abortController.abort()),(0,ue.toMiliseconds)(t))}}var Bs=Object.defineProperty,qs=Object.getOwnPropertySymbols,zs=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable,Hs=(t,e,r)=>e in t?Bs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ks=(t,e)=>{for(var r in e||(e={}))zs.call(e,r)&&Hs(t,r,e[r]);if(qs)for(var r of qs(e))Fs.call(e,r)&&Hs(t,r,e[r]);return t};class Gs extends Rr{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=xi,this.events=new v.EventEmitter,this.initialized=!1,this.on=(t,e)=>this.events.on(t,e),this.once=(t,e)=>this.events.once(t,e),this.off=(t,e)=>this.events.off(t,e),this.removeListener=(t,e)=>this.events.removeListener(t,e),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||ji;const e=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Nr.pino)((0,Nr.getDefaultLoggerOptions)({level:t?.logger||"error"}));this.logger=(0,Nr.generateChildLogger)(e,this.name),this.heartbeat=new Or.HeartBeat,this.crypto=new cs(this,this.logger,t?.keychain),this.history=new Us(this,this.logger),this.expirer=new js(this,this.logger),this.storage=null!=t&&t.storage?t.storage:new Pr.ZP(Ks(Ks({},Mi),t?.storageOptions)),this.relayer=new Os({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ls(this,this.logger),this.verify=new Ds(this.projectId||"",this.logger)}static async init(t){const e=new Gs(t);await e.initialize();const r=await e.crypto.getClientId();return await e.storage.setItem("WALLETCONNECT_CLIENT_ID",r),e}get context(){return(0,Nr.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const Ws=Gs,$s="client",Ys=`wc@2:${$s}:`,Js=$s,Vs="Proposal expired",Qs=ue.SEVEN_DAYS,Xs={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1115}}},Zs={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},to="idle",eo="active",ro=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var no=Object.defineProperty,io=Object.defineProperties,so=Object.getOwnPropertyDescriptors,oo=Object.getOwnPropertySymbols,ao=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable,uo=(t,e,r)=>e in t?no(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ho=(t,e)=>{for(var r in e||(e={}))ao.call(e,r)&&uo(t,r,e[r]);if(oo)for(var r of oo(e))co.call(e,r)&&uo(t,r,e[r]);return t},lo=(t,e)=>io(t,so(e));class fo extends qr{constructor(t){super(t),this.name="engine",this.events=new(y()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:to,requests:[]},this.requestQueueDelay=ue.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Xs)}),this.initialized=!0,setTimeout((()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()}),(0,ue.toMiliseconds)(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized();const e=lo(ho({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(e);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,relays:o}=e;let a,c=r,u=!1;if(c&&(u=this.client.core.pairing.pairings.get(c).active),!c||!u){const{topic:t,uri:e}=await this.client.core.pairing.create();c=t,a=e}const h=await this.client.core.crypto.generateKeyPair(),l=ho({requiredNamespaces:n,optionalNamespaces:i,relays:o??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:f,resolve:d,done:p}=Fe(ue.FIVE_MINUTES,Vs);if(this.events.once(Ye("session_connect"),(async({error:t,session:e})=>{if(t)f(t);else if(e){e.self.publicKey=h;const t=lo(ho({},e),{requiredNamespaces:e.requiredNamespaces,optionalNamespaces:e.optionalNamespaces});await this.client.session.set(e.topic,t),await this.setExpiry(e.topic,e.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:e.peer.metadata}),d(t)}})),!c){const{message:t}=hr("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(t)}const g=await this.sendRequest(c,"wc_sessionPropose",l),m=We(ue.FIVE_MINUTES);return await this.setProposal(g,ho({id:g,expiry:m},l)),{uri:a,approval:p}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:e,relayProtocol:r,namespaces:n,sessionProperties:i}=t,s=this.client.proposal.get(e);let{pairingTopic:o,proposer:a,requiredNamespaces:c,optionalNamespaces:u}=s;o=o||"",dr(c)||(c=function(t,e){const r=br(t,"approve()");if(r)throw new Error(r.message);const n={};for(const[e,r]of Object.entries(t))n[e]={methods:r.methods,events:r.events,chains:r.accounts.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))};return n}(n));const h=await this.client.core.crypto.generateKeyPair(),l=a.publicKey,f=await this.client.core.crypto.generateSharedKey(h,l);o&&e&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.sendResult(e,o,{relay:{protocol:r??"irn"},responderPublicKey:h}),await this.client.proposal.delete(e,lr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));const d=ho({relay:{protocol:r??"irn"},namespaces:n,requiredNamespaces:c,optionalNamespaces:u,pairingTopic:o,controller:{publicKey:h,metadata:this.client.metadata},expiry:We(Qs)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(f),await this.sendRequest(f,"wc_sessionSettle",d);const p=lo(ho({},d),{topic:f,pairingTopic:o,acknowledged:!1,self:d.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:h});return await this.client.session.set(f,p),await this.setExpiry(f,We(Qs)),{topic:f,acknowledged:()=>new Promise((t=>setTimeout((()=>t(this.client.session.get(f))),500)))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:e,reason:r}=t,{pairingTopic:n}=this.client.proposal.get(e);n&&(await this.sendError(e,n,r),await this.client.proposal.delete(e,lr("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:e,namespaces:r}=t,n=await this.sendRequest(e,"wc_sessionUpdate",{namespaces:r}),{done:i,resolve:s,reject:o}=Fe();return this.events.once(Ye("session_update",n),(({error:t})=>{t?o(t):s()})),await this.client.session.update(e,{namespaces:r}),{acknowledged:i}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:e}=t,r=await this.sendRequest(e,"wc_sessionExtend",{}),{done:n,resolve:i,reject:s}=Fe();return this.events.once(Ye("session_extend",r),(({error:t})=>{t?s(t):i()})),await this.setExpiry(e,We(Qs)),{acknowledged:n}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:e,request:n,topic:i,expiry:s}=t,o=await this.sendRequest(i,"wc_sessionRequest",{request:n,chainId:e},s),{done:a,resolve:c,reject:u}=Fe(s);return this.events.once(Ye("session_request",o),(({error:t,result:e})=>{t?u(t):c(e)})),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:e,id:o}),async function({id:t,topic:e,wcDeepLink:n}){try{if(!n)return;const i="string"==typeof n?JSON.parse(n):n;let s=i?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${t}&sessionTopic=${e}`,a=je();a===Ce.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===Ce.reactNative&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(o)}catch(t){console.error(t)}}({id:o,topic:i,wcDeepLink:await this.client.core.storage.getItem("WALLETCONNECT_DEEPLINK_CHOICE")}),await a()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:e,response:r}=t,{id:n}=r;(0,en.isJsonRpcResult)(r)?await this.sendResult(n,e,r.result):(0,en.isJsonRpcError)(r)&&await this.sendError(n,e,r.error),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:e}=t;if(this.client.session.keys.includes(e)){const t=await this.sendRequest(e,"wc_sessionPing",{}),{done:r,resolve:n,reject:i}=Fe();this.events.once(Ye("session_ping",t),(({error:t})=>{t?i(t):n()})),await r()}else this.client.core.pairing.pairings.keys.includes(e)&&await this.client.core.pairing.ping({topic:e})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:e,event:r,chainId:n}=t;await this.sendRequest(e,"wc_sessionEvent",{event:r,chainId:n})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:e}=t;if(this.client.session.keys.includes(e)){const t=(0,en.getBigIntRpcId)().toString();let r;const n=e=>{e?.id.toString()===t&&(this.client.core.relayer.events.removeListener(qi,n),r())};await Promise.all([new Promise((t=>{r=t,this.client.core.relayer.on(qi,n)})),this.sendRequest(e,"wc_sessionDelete",lr("USER_DISCONNECTED"),void 0,t)]),await this.deleteSession(e)}else await this.client.core.pairing.disconnect({topic:e})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter((e=>function(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return!!Be(i,n)&&(n.forEach((e=>{const{accounts:n,methods:i,events:o}=t.namespaces[e],a=sr(n),c=r[e];Be(pe(e,c),a)&&Be(c.methods,i)&&Be(c.events,o)||(s=!1)})),s)}(e,t)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const e=this.client.core.pairing.pairings.get(t.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===t.peer.metadata.url&&r.topic&&r.topic!==e.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((t=>this.client.core.pairing.disconnect({topic:t.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async(t,e)=>{const{self:r}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,lr("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(r.publicKey)&&await this.client.core.crypto.deleteKeyPair(r.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),e||this.client.core.expirer.del(t)},this.deleteProposal=async(t,e)=>{await Promise.all([this.client.proposal.delete(t,lr("USER_DISCONNECTED")),e?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,e,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,e),r?Promise.resolve():this.client.core.expirer.del(t)]),this.requestQueue.requests=this.requestQueue.requests.filter((e=>e.id!==t)),r&&(this.requestQueue.state=to)},this.setExpiry=async(t,e)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:e}),this.client.core.expirer.set(t,e)},this.setProposal=async(t,e)=>{await this.client.proposal.set(t,e),this.client.core.expirer.set(t,e.expiry)},this.setPendingSessionRequest=async t=>{const e=Xs.wc_sessionRequest.req.ttl,{id:r,topic:n,params:i}=t;await this.client.pendingRequest.set(r,{id:r,topic:n,params:i}),e&&this.client.core.expirer.set(r,We(e))},this.sendRequest=async(t,e,r,n,i)=>{const s=(0,en.formatJsonRpcRequest)(e,r);if(Ue()&&ro.includes(e)){const t=be(JSON.stringify(s));await this.client.core.verify.register({attestationId:t})}const o=await this.client.core.crypto.encode(t,s),a=Xs[e].req;return n&&(a.ttl=n),i&&(a.id=i),this.client.core.history.set(t,s),this.client.core.relayer.publish(t,o,a),s.id},this.sendResult=async(t,e,r)=>{const n=(0,en.formatJsonRpcResult)(t,r),i=await this.client.core.crypto.encode(e,n),s=await this.client.core.history.get(e,t),o=Xs[s.request.method].res;this.client.core.relayer.publish(e,i,o),await this.client.core.history.resolve(n)},this.sendError=async(t,e,r)=>{const n=(0,en.formatJsonRpcError)(t,r),i=await this.client.core.crypto.encode(e,n),s=await this.client.core.history.get(e,t),o=Xs[s.request.method].res;this.client.core.relayer.publish(e,i,o),await this.client.core.history.resolve(n)},this.cleanup=async()=>{const t=[],e=[];this.client.session.getAll().forEach((e=>{$e(e.expiry)&&t.push(e.topic)})),this.client.proposal.getAll().forEach((t=>{$e(t.expiry)&&e.push(t.id)})),await Promise.all([...t.map((t=>this.deleteSession(t))),...e.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=t=>{const{topic:e,payload:r}=t,n=r.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeRequest(e,r);case"wc_sessionSettle":return this.onSessionSettleRequest(e,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(e,r);case"wc_sessionExtend":return this.onSessionExtendRequest(e,r);case"wc_sessionPing":return this.onSessionPingRequest(e,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(e,r);case"wc_sessionRequest":return this.onSessionRequest(e,r);case"wc_sessionEvent":return this.onSessionEventRequest(e,r);default:return this.client.logger.info(`Unsupported request method ${n}`)}},this.onRelayEventResponse=async t=>{const{topic:e,payload:r}=t,n=(await this.client.core.history.get(e,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(e,r);case"wc_sessionSettle":return this.onSessionSettleResponse(e,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(e,r);case"wc_sessionExtend":return this.onSessionExtendResponse(e,r);case"wc_sessionPing":return this.onSessionPingResponse(e,r);case"wc_sessionRequest":return this.onSessionRequestResponse(e,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:e}=t,{message:r}=hr("MISSING_OR_INVALID",`Decoded payload on topic ${e} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)},this.onSessionProposeRequest=async(t,e)=>{const{params:r,id:n}=e;try{this.isValidConnect(ho({},e.params));const i=We(ue.FIVE_MINUTES),s=ho({id:n,pairingTopic:t,expiry:i},r);await this.setProposal(n,s);const o=be(JSON.stringify(e)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:n,params:s,verifyContext:a})}catch(e){await this.sendError(n,t,e),this.client.logger.error(e)}},this.onSessionProposeResponse=async(t,e)=>{const{id:r}=e;if((0,en.isJsonRpcResult)(e)){const{result:n}=e;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const i=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:t})}else(0,en.isJsonRpcError)(e)&&(await this.client.proposal.delete(r,lr("USER_DISCONNECTED")),this.events.emit(Ye("session_connect"),{error:e.error}))},this.onSessionSettleRequest=async(t,e)=>{const{id:r,params:n}=e;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,pairingTopic:h}=e.params,l=ho({topic:t,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:h,requiredNamespaces:a,optionalNamespaces:c,controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},u&&{sessionProperties:u});await this.sendResult(e.id,t,!0),this.events.emit(Ye("session_connect"),{session:l}),this.cleanupDuplicatePairings(l)}catch(e){await this.sendError(r,t,e),this.client.logger.error(e)}},this.onSessionSettleResponse=async(t,e)=>{const{id:r}=e;(0,en.isJsonRpcResult)(e)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ye("session_approve",r),{})):(0,en.isJsonRpcError)(e)&&(await this.client.session.delete(t,lr("USER_DISCONNECTED")),this.events.emit(Ye("session_approve",r),{error:e.error}))},this.onSessionUpdateRequest=async(t,e)=>{const{params:r,id:n}=e;try{this.isValidUpdate(ho({topic:t},r)),await this.client.session.update(t,{namespaces:r.namespaces}),await this.sendResult(n,t,!0),this.client.events.emit("session_update",{id:n,topic:t,params:r})}catch(e){await this.sendError(n,t,e),this.client.logger.error(e)}},this.onSessionUpdateResponse=(t,e)=>{const{id:r}=e;(0,en.isJsonRpcResult)(e)?this.events.emit(Ye("session_update",r),{}):(0,en.isJsonRpcError)(e)&&this.events.emit(Ye("session_update",r),{error:e.error})},this.onSessionExtendRequest=async(t,e)=>{const{id:r}=e;try{this.isValidExtend({topic:t}),await this.setExpiry(t,We(Qs)),await this.sendResult(r,t,!0),this.client.events.emit("session_extend",{id:r,topic:t})}catch(e){await this.sendError(r,t,e),this.client.logger.error(e)}},this.onSessionExtendResponse=(t,e)=>{const{id:r}=e;(0,en.isJsonRpcResult)(e)?this.events.emit(Ye("session_extend",r),{}):(0,en.isJsonRpcError)(e)&&this.events.emit(Ye("session_extend",r),{error:e.error})},this.onSessionPingRequest=async(t,e)=>{const{id:r}=e;try{this.isValidPing({topic:t}),await this.sendResult(r,t,!0),this.client.events.emit("session_ping",{id:r,topic:t})}catch(e){await this.sendError(r,t,e),this.client.logger.error(e)}},this.onSessionPingResponse=(t,e)=>{const{id:r}=e;setTimeout((()=>{(0,en.isJsonRpcResult)(e)?this.events.emit(Ye("session_ping",r),{}):(0,en.isJsonRpcError)(e)&&this.events.emit(Ye("session_ping",r),{error:e.error})}),500)},this.onSessionDeleteRequest=async(t,e)=>{const{id:r}=e;try{this.isValidDisconnect({topic:t,reason:e.params}),await Promise.all([new Promise((e=>{this.client.core.relayer.once(Gi,(async()=>{e(await this.deleteSession(t))}))})),this.sendResult(r,t,!0)]),this.client.events.emit("session_delete",{id:r,topic:t})}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,e)=>{const{id:r,params:n}=e;try{this.isValidRequest(ho({topic:t},n)),await this.setPendingSessionRequest({id:r,topic:t,params:n}),this.addRequestToQueue({id:r,topic:t,params:n}),await this.processRequestQueue()}catch(e){await this.sendError(r,t,e),this.client.logger.error(e)}},this.onSessionRequestResponse=(t,e)=>{const{id:r}=e;(0,en.isJsonRpcResult)(e)?this.events.emit(Ye("session_request",r),{result:e.result}):(0,en.isJsonRpcError)(e)&&this.events.emit(Ye("session_request",r),{error:e.error})},this.onSessionEventRequest=async(t,e)=>{const{id:r,params:n}=e;try{this.isValidEmit(ho({topic:t},n)),this.client.events.emit("session_event",{id:r,topic:t,params:n})}catch(e){await this.sendError(r,t,e),this.client.logger.error(e)}},this.addRequestToQueue=t=>{this.requestQueue.requests.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.requestQueue.state=to,this.processRequestQueue()}),(0,ue.toMiliseconds)(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===eo)return void this.client.logger.info("session request queue is already active.");const t=this.requestQueue.requests[0];if(t)try{const{id:e,topic:r,params:n}=t,i=be(JSON.stringify({id:e,params:n})),s=this.client.session.get(r),o=await this.getVerifyContext(i,s.peer.metadata);this.requestQueue.state=eo,this.client.events.emit("session_request",{id:e,topic:r,params:n,verifyContext:o})}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")},this.isValidConnect=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(e)}const{pairingTopic:e,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,relays:s}=t;if(pr(e)||await this.isValidPairingTopic(e),!function(t,e){let r=!1;return t?t&&fr(t)&&t.length&&t.forEach((t=>{r=_r(t)})):r=!0,r}(s)){const{message:t}=hr("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(t)}!pr(r)&&0!==dr(r)&&this.validateNamespaces(r,"requiredNamespaces"),!pr(n)&&0!==dr(n)&&this.validateNamespaces(n,"optionalNamespaces"),pr(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(t,e)=>{const r=function(t,e,r){let n=null;if(t&&dr(t)){const i=wr(t,e);i&&(n=i);const s=function(t,e,r){let n=null;return Object.entries(t).forEach((([t,i])=>{if(n)return;const s=function(t,e,r){let n=null;return fr(e)&&e.length?e.forEach((t=>{n||vr(t)||(n=lr("UNSUPPORTED_CHAINS",`${r}, chain ${t} should be a string and conform to "namespace:chainId" format`))})):vr(t)||(n=lr("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(t,pe(t,i),`${e} ${r}`);s&&(n=s)})),n}(t,e,r);s&&(n=s)}else n=hr("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}(t,"connect()",e);if(r)throw new Error(r.message)},this.isValidApprove=async t=>{if(!Er(t))throw new Error(hr("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:e,namespaces:r,relayProtocol:n,sessionProperties:i}=t;await this.isValidProposalId(e);const s=this.client.proposal.get(e),o=br(r,"approve()");if(o)throw new Error(o.message);const a=Ir(s.requiredNamespaces,r,"approve()");if(a)throw new Error(a.message);if(!gr(n,!0)){const{message:t}=hr("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(t)}pr(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(e)}const{id:e,reason:r}=t;if(await this.isValidProposalId(e),!function(t){return!!(t&&"object"==typeof t&&t.code&&mr(t.code,!1)&&t.message&&gr(t.message,!1))}(r)){const{message:t}=hr("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidSessionSettleRequest=t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(e)}const{relay:e,controller:r,namespaces:n,expiry:i}=t;if(!_r(e)){const{message:t}=hr("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(t)}const s=function(t,e){let r=null;return gr(t?.publicKey,!1)||(r=hr("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),r}(r);if(s)throw new Error(s.message);const o=br(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if($e(i)){const{message:t}=hr("EXPIRED","onSessionSettleRequest()");throw new Error(t)}},this.isValidUpdate=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(e)}const{topic:e,namespaces:r}=t;await this.isValidSessionTopic(e);const n=this.client.session.get(e),i=br(r,"update()");if(i)throw new Error(i.message);const s=Ir(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(e)}const{topic:e}=t;await this.isValidSessionTopic(e)},this.isValidRequest=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(e)}const{topic:e,request:r,chainId:n,expiry:i}=t;await this.isValidSessionTopic(e);const{namespaces:s}=this.client.session.get(e);if(!Ar(s,n)){const{message:t}=hr("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(t)}if(!function(t){return!(pr(t)||!gr(t.method,!1))}(r)){const{message:t}=hr("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(t)}if(!function(t,e,r){return!!gr(r,!1)&&function(t,e){const r=[];return Object.values(t).forEach((t=>{sr(t.accounts).includes(e)&&r.push(...t.methods)})),r}(t,e).includes(r)}(s,n,r.method)){const{message:t}=hr("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(t)}if(i&&!function(t,e){return mr(t,!1)&&t<=e.max&&t>=e.min}(i,Zs)){const{message:t}=hr("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${Zs.min} and ${Zs.max}`);throw new Error(t)}},this.isValidRespond=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(e)}const{topic:e,response:r}=t;if(await this.isValidSessionTopic(e),!function(t){return!(pr(t)||pr(t.result)&&pr(t.error)||!mr(t.id,!1)||!gr(t.jsonrpc,!1))}(r)){const{message:t}=hr("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidPing=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(e)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.isValidEmit=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(e)}const{topic:e,event:r,chainId:n}=t;await this.isValidSessionTopic(e);const{namespaces:i}=this.client.session.get(e);if(!Ar(i,n)){const{message:t}=hr("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(t)}if(!function(t){return!(pr(t)||!gr(t.name,!1))}(r)){const{message:t}=hr("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}if(!function(t,e,r){return!!gr(r,!1)&&function(t,e){const r=[];return Object.values(t).forEach((t=>{sr(t.accounts).includes(e)&&r.push(...t.events)})),r}(t,e).includes(r)}(i,n,r.name)){const{message:t}=hr("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidDisconnect=async t=>{if(!Er(t)){const{message:e}=hr("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(e)}const{topic:e}=t;await this.isValidSessionOrPairingTopic(e)},this.getVerifyContext=async(t,e)=>{const r={verified:{verifyUrl:e.verifyUrl||"",validation:"UNKNOWN",origin:e.url||""}};try{const n=await this.client.core.verify.resolve({attestationId:t,verifyUrl:e.verifyUrl});n&&(r.verified.origin=n,r.verified.validation=n===e.url?"VALID":"INVALID")}catch(t){this.client.logger.error(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(t,e)=>{Object.values(t).forEach((t=>{if(!gr(t,!1)){const{message:r}=hr("MISSING_OR_INVALID",`${e} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(r)}}))}}isInitialized(){if(!this.initialized){const{message:t}=hr("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(Bi,(async t=>{const{topic:e,message:r}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;const n=await this.client.core.crypto.decode(e,r);(0,en.isJsonRpcRequest)(n)?(this.client.core.history.set(e,n),this.onRelayEventRequest({topic:e,payload:n})):(0,en.isJsonRpcResponse)(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:e,payload:n}),this.client.core.history.delete(e,n.id)):this.onRelayEventUnknownPayload({topic:e,payload:n})}))}registerExpirerEvents(){this.client.core.expirer.on(is,(async t=>{const{topic:e,id:r}=Ge(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,hr("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))}))}isValidPairingTopic(t){if(!gr(t,!1)){const{message:e}=hr("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=hr("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(e)}if($e(this.client.core.pairing.pairings.get(t).expiry)){const{message:e}=hr("EXPIRED",`pairing topic: ${t}`);throw new Error(e)}}async isValidSessionTopic(t){if(!gr(t,!1)){const{message:e}=hr("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(e)}if(!this.client.session.keys.includes(t)){const{message:e}=hr("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(e)}if($e(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:e}=hr("EXPIRED",`session topic: ${t}`);throw new Error(e)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else{if(!this.client.core.pairing.pairings.keys.includes(t)){if(gr(t,!1)){const{message:e}=hr("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(e)}{const{message:e}=hr("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(e)}}this.isValidPairingTopic(t)}}async isValidProposalId(t){if("number"!=typeof t){const{message:e}=hr("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(e)}if(!this.client.proposal.keys.includes(t)){const{message:e}=hr("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(e)}if($e(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:e}=hr("EXPIRED",`proposal id: ${t}`);throw new Error(e)}}}class po extends Ts{constructor(t,e){super(t,e,"proposal",Ys),this.core=t,this.logger=e}}class go extends Ts{constructor(t,e){super(t,e,"session",Ys),this.core=t,this.logger=e}}class mo extends Ts{constructor(t,e){super(t,e,"request",Ys,(t=>t.id)),this.core=t,this.logger=e}}class vo extends Br{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=Js,this.events=new v.EventEmitter,this.on=(t,e)=>this.events.on(t,e),this.once=(t,e)=>this.events.once(t,e),this.off=(t,e)=>this.events.off(t,e),this.removeListener=(t,e)=>this.events.removeListener(t,e),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.name=t?.name||Js,this.metadata=t?.metadata||(0,le.D)()||{name:"",description:"",url:"",icons:[""]};const e=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Nr.pino)((0,Nr.getDefaultLoggerOptions)({level:t?.logger||"error"}));this.core=t?.core||new Ws(t),this.logger=(0,Nr.generateChildLogger)(e,this.name),this.session=new go(this.core,this.logger),this.proposal=new po(this.core,this.logger),this.pendingRequest=new mo(this.core,this.logger),this.engine=new fo(this)}static async init(t){const e=new vo(t);return await e.initialize(),e}get context(){return(0,Nr.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var yo=r(4497);const wo="error",bo="wc@2:universal_provider:",_o="default_chain_changed";var Eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},Ao={exports:{}};!function(t,e){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",o=32,a=128,c=1/0,u=9007199254740991,h=NaN,l=4294967295,f=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",256]],d="[object Arguments]",p="[object Array]",g="[object Boolean]",m="[object Date]",v="[object Error]",y="[object Function]",w="[object GeneratorFunction]",b="[object Map]",_="[object Number]",E="[object Object]",A="[object Promise]",I="[object RegExp]",S="[object Set]",P="[object String]",O="[object Symbol]",N="[object WeakMap]",k="[object ArrayBuffer]",R="[object DataView]",x="[object Float32Array]",C="[object Float64Array]",M="[object Int8Array]",T="[object Int16Array]",L="[object Int32Array]",U="[object Uint8Array]",j="[object Uint8ClampedArray]",D="[object Uint16Array]",B="[object Uint32Array]",q=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(H.source),W=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,tt=RegExp(Z.source),et=/^\s+/,rt=/\s/,nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,it=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,lt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,pt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",bt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",_t="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+wt+"]",Ot="["+St+"]",Nt="["+bt+"]",kt="\\d+",Rt="["+_t+"]",xt="["+Et+"]",Ct="[^"+wt+St+kt+_t+Et+At+"]",Mt="\\ud83c[\\udffb-\\udfff]",Tt="[^"+wt+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ut="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+At+"]",Dt="\\u200d",Bt="(?:"+xt+"|"+Ct+")",qt="(?:"+jt+"|"+Ct+")",zt="(?:['](?:d|ll|m|re|s|t|ve))?",Ft="(?:['](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Nt+"|"+Mt+")?",Kt="["+It+"]?",Gt=Kt+Ht+"(?:"+Dt+"(?:"+[Tt,Lt,Ut].join("|")+")"+Kt+Ht+")*",Wt="(?:"+[Rt,Lt,Ut].join("|")+")"+Gt,$t="(?:"+[Tt+Nt+"?",Nt,Lt,Ut,Pt].join("|")+")",Yt=RegExp("[']","g"),Jt=RegExp(Nt,"g"),Vt=RegExp(Mt+"(?="+Mt+")|"+$t+Gt,"g"),Qt=RegExp([jt+"?"+xt+"+"+zt+"(?="+[Ot,jt,"$"].join("|")+")",qt+"+"+Ft+"(?="+[Ot,jt+Bt,"$"].join("|")+")",jt+"?"+Bt+"+"+zt,jt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,Wt].join("|"),"g"),Xt=RegExp("["+Dt+wt+bt+It+"]"),Zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,te=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ee=-1,re={};re[x]=re[C]=re[M]=re[T]=re[L]=re[U]=re[j]=re[D]=re[B]=!0,re[d]=re[p]=re[k]=re[g]=re[R]=re[m]=re[v]=re[y]=re[b]=re[_]=re[E]=re[I]=re[S]=re[P]=re[N]=!1;var ne={};ne[d]=ne[p]=ne[k]=ne[R]=ne[g]=ne[m]=ne[x]=ne[C]=ne[M]=ne[T]=ne[L]=ne[b]=ne[_]=ne[E]=ne[I]=ne[S]=ne[P]=ne[O]=ne[U]=ne[j]=ne[D]=ne[B]=!0,ne[v]=ne[y]=ne[N]=!1;var ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,oe=parseInt,ae="object"==typeof Eo&&Eo&&Eo.Object===Object&&Eo,ce="object"==typeof self&&self&&self.Object===Object&&self,ue=ae||ce||Function("return this")(),he=e&&!e.nodeType&&e,le=he&&t&&!t.nodeType&&t,fe=le&&le.exports===he,de=fe&&ae.process,pe=function(){try{return le&&le.require&&le.require("util").types||de&&de.binding&&de.binding("util")}catch{}}(),ge=pe&&pe.isArrayBuffer,me=pe&&pe.isDate,ve=pe&&pe.isMap,ye=pe&&pe.isRegExp,we=pe&&pe.isSet,be=pe&&pe.isTypedArray;function _e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ee(t,e,r,n){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(n,o,r(o),t)}return n}function Ae(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Ie(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function Se(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Pe(t,e){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function Oe(t,e){return!(null==t||!t.length)&&je(t,e,0)>-1}function Ne(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function ke(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Re(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function xe(t,e,r,n){var i=-1,s=null==t?0:t.length;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}function Ce(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function Me(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Te=ze("length");function Le(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Ue(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function je(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Ue(t,Be,r)}function De(t,e,r,n){for(var i=r-1,s=t.length;++i<s;)if(n(t[i],e))return i;return-1}function Be(t){return t!=t}function qe(t,e){var r=null==t?0:t.length;return r?Ke(t,e)/r:h}function ze(t){return function(e){return null==e?r:e[t]}}function Fe(t){return function(e){return null==t?r:t[e]}}function He(t,e,r,n,i){return i(t,(function(t,i,s){r=n?(n=!1,t):e(r,t,i,s)})),r}function Ke(t,e){for(var n,i=-1,s=t.length;++i<s;){var o=e(t[i]);o!==r&&(n=n===r?o:n+o)}return n}function Ge(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function We(t){return t&&t.slice(0,cr(t)+1).replace(et,"")}function $e(t){return function(e){return t(e)}}function Ye(t,e){return ke(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Ve(t,e){for(var r=-1,n=t.length;++r<n&&je(e,t[r],0)>-1;);return r}function Qe(t,e){for(var r=t.length;r--&&je(e,t[r],0)>-1;);return r}var Xe=Fe({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Ze=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tr(t){return"\\"+ie[t]}function er(t){return Xt.test(t)}function rr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function nr(t,e){return function(r){return t(e(r))}}function ir(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var a=t[r];(a===e||a===s)&&(t[r]=s,o[i++]=r)}return o}function sr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function or(t){return er(t)?function(t){for(var e=Vt.lastIndex=0;Vt.test(t);)++e;return e}(t):Te(t)}function ar(t){return er(t)?function(t){return t.match(Vt)||[]}(t):function(t){return t.split("")}(t)}function cr(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var ur=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hr=function t(e){var rt=(e=null==e?ue:hr.defaults(ue.Object(),e,hr.pick(ue,te))).Array,wt=e.Date,bt=e.Error,_t=e.Function,Et=e.Math,At=e.Object,It=e.RegExp,St=e.String,Pt=e.TypeError,Ot=rt.prototype,Nt=_t.prototype,kt=At.prototype,Rt=e["__core-js_shared__"],xt=Nt.toString,Ct=kt.hasOwnProperty,Mt=0,Tt=function(){var t=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Lt=kt.toString,Ut=xt.call(At),jt=ue._,Dt=It("^"+xt.call(Ct).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=fe?e.Buffer:r,qt=e.Symbol,zt=e.Uint8Array,Ft=Bt?Bt.allocUnsafe:r,Ht=nr(At.getPrototypeOf,At),Kt=At.create,Gt=kt.propertyIsEnumerable,Wt=Ot.splice,$t=qt?qt.isConcatSpreadable:r,Vt=qt?qt.iterator:r,Xt=qt?qt.toStringTag:r,ie=function(){try{var t=os(At,"defineProperty");return t({},"",{}),t}catch{}}(),ae=e.clearTimeout!==ue.clearTimeout&&e.clearTimeout,ce=wt&&wt.now!==ue.Date.now&&wt.now,he=e.setTimeout!==ue.setTimeout&&e.setTimeout,le=Et.ceil,de=Et.floor,pe=At.getOwnPropertySymbols,Te=Bt?Bt.isBuffer:r,Fe=e.isFinite,lr=Ot.join,fr=nr(At.keys,At),dr=Et.max,pr=Et.min,gr=wt.now,mr=e.parseInt,vr=Et.random,yr=Ot.reverse,wr=os(e,"DataView"),br=os(e,"Map"),_r=os(e,"Promise"),Er=os(e,"Set"),Ar=os(e,"WeakMap"),Ir=os(At,"create"),Sr=Ar&&new Ar,Pr={},Or=Ts(wr),Nr=Ts(br),kr=Ts(_r),Rr=Ts(Er),xr=Ts(Ar),Cr=qt?qt.prototype:r,Mr=Cr?Cr.valueOf:r,Tr=Cr?Cr.toString:r;function Lr(t){if(Xo(t)&&!zo(t)&&!(t instanceof Br)){if(t instanceof Dr)return t;if(Ct.call(t,"__wrapped__"))return Ls(t)}return new Dr(t)}var Ur=function(){function t(){}return function(e){if(!Qo(e))return{};if(Kt)return Kt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function jr(){}function Dr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Br(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function zr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Fr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Hr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Fr;++e<r;)this.add(t[e])}function Kr(t){var e=this.__data__=new zr(t);this.size=e.size}function Gr(t,e){var r=zo(t),n=!r&&qo(t),i=!r&&!n&&Go(t),s=!r&&!n&&!i&&oa(t),o=r||n||i||s,a=o?Ge(t.length,St):[],c=a.length;for(var u in t)(e||Ct.call(t,u))&&(!o||!("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ds(u,c)))&&a.push(u);return a}function Wr(t){var e=t.length;return e?t[Hn(0,e-1)]:r}function $r(t,e){return ks(Ii(t),rn(e,0,t.length))}function Yr(t){return ks(Ii(t))}function Jr(t,e,n){(n!==r&&!jo(t[e],n)||n===r&&!(e in t))&&tn(t,e,n)}function Vr(t,e,n){var i=t[e];(!Ct.call(t,e)||!jo(i,n)||n===r&&!(e in t))&&tn(t,e,n)}function Qr(t,e){for(var r=t.length;r--;)if(jo(t[r][0],e))return r;return-1}function Xr(t,e,r,n){return cn(t,(function(t,i,s){e(n,t,r(t),s)})),n}function Zr(t,e){return t&&Si(e,Na(e),t)}function tn(t,e,r){"__proto__"==e&&ie?ie(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function en(t,e){for(var n=-1,i=e.length,s=rt(i),o=null==t;++n<i;)s[n]=o?r:Aa(t,e[n]);return s}function rn(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function nn(t,e,n,i,s,o){var a,c=1&e,u=2&e,h=4&e;if(n&&(a=s?n(t,i,s,o):n(t)),a!==r)return a;if(!Qo(t))return t;var l=zo(t);if(l){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ct.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!c)return Ii(t,a)}else{var f=us(t),p=f==y||f==w;if(Go(t))return yi(t,c);if(f==E||f==d||p&&!s){if(a=u||p?{}:ls(t),!c)return u?function(t,e){return Si(t,cs(t),e)}(t,function(t,e){return t&&Si(e,ka(e),t)}(a,t)):function(t,e){return Si(t,as(t),e)}(t,Zr(a,t))}else{if(!ne[f])return s?t:{};a=function(t,e,r){var n=t.constructor;switch(e){case k:return wi(t);case g:case m:return new n(+t);case R:return function(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case x:case C:case M:case T:case L:case U:case j:case D:case B:return bi(t,r);case b:return new n;case _:case P:return new n(t);case I:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new n;case O:return function(t){return Mr?At(Mr.call(t)):{}}(t)}}(t,f,c)}}o||(o=new Kr);var v=o.get(t);if(v)return v;o.set(t,a),na(t)?t.forEach((function(r){a.add(nn(r,e,n,r,t,o))})):Zo(t)&&t.forEach((function(r,i){a.set(i,nn(r,e,n,i,t,o))}));var A=l?r:(h?u?Zi:Xi:u?ka:Na)(t);return Ae(A||t,(function(r,i){A&&(r=t[i=r]),Vr(a,i,nn(r,e,n,i,t,o))})),a}function sn(t,e,n){var i=n.length;if(null==t)return!i;for(t=At(t);i--;){var s=n[i],o=e[s],a=t[s];if(a===r&&!(s in t)||!o(a))return!1}return!0}function on(t,e,i){if("function"!=typeof t)throw new Pt(n);return Ss((function(){t.apply(r,i)}),e)}function an(t,e,r,n){var i=-1,s=Oe,o=!0,a=t.length,c=[],u=e.length;if(!a)return c;r&&(e=ke(e,$e(r))),n?(s=Ne,o=!1):e.length>=200&&(s=Je,o=!1,e=new Hr(e));t:for(;++i<a;){var h=t[i],l=null==r?h:r(h);if(h=n||0!==h?h:0,o&&l==l){for(var f=u;f--;)if(e[f]===l)continue t;c.push(h)}else s(e,l,n)||c.push(h)}return c}Lr.templateSettings={escape:$,evaluate:Y,interpolate:J,variable:"",imports:{_:Lr}},Lr.prototype=jr.prototype,Lr.prototype.constructor=Lr,Dr.prototype=Ur(jr.prototype),Dr.prototype.constructor=Dr,Br.prototype=Ur(jr.prototype),Br.prototype.constructor=Br,qr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},qr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qr.prototype.get=function(t){var e=this.__data__;if(Ir){var n=e[t];return n===i?r:n}return Ct.call(e,t)?e[t]:r},qr.prototype.has=function(t){var e=this.__data__;return Ir?e[t]!==r:Ct.call(e,t)},qr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ir&&e===r?i:e,this},zr.prototype.clear=function(){this.__data__=[],this.size=0},zr.prototype.delete=function(t){var e=this.__data__,r=Qr(e,t);return!(r<0||(r==e.length-1?e.pop():Wt.call(e,r,1),--this.size,0))},zr.prototype.get=function(t){var e=this.__data__,n=Qr(e,t);return n<0?r:e[n][1]},zr.prototype.has=function(t){return Qr(this.__data__,t)>-1},zr.prototype.set=function(t,e){var r=this.__data__,n=Qr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Fr.prototype.clear=function(){this.size=0,this.__data__={hash:new qr,map:new(br||zr),string:new qr}},Fr.prototype.delete=function(t){var e=is(this,t).delete(t);return this.size-=e?1:0,e},Fr.prototype.get=function(t){return is(this,t).get(t)},Fr.prototype.has=function(t){return is(this,t).has(t)},Fr.prototype.set=function(t,e){var r=is(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Hr.prototype.add=Hr.prototype.push=function(t){return this.__data__.set(t,i),this},Hr.prototype.has=function(t){return this.__data__.has(t)},Kr.prototype.clear=function(){this.__data__=new zr,this.size=0},Kr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Kr.prototype.get=function(t){return this.__data__.get(t)},Kr.prototype.has=function(t){return this.__data__.has(t)},Kr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof zr){var n=r.__data__;if(!br||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fr(n)}return r.set(t,e),this.size=r.size,this};var cn=Ni(mn),un=Ni(vn,!0);function hn(t,e){var r=!0;return cn(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function ln(t,e,n){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=e(o);if(null!=a&&(c===r?a==a&&!sa(a):n(a,c)))var c=a,u=o}return u}function fn(t,e){var r=[];return cn(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function dn(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=fs),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?dn(a,e-1,r,n,i):Re(i,a):n||(i[i.length]=a)}return i}var pn=ki(),gn=ki(!0);function mn(t,e){return t&&pn(t,e,Na)}function vn(t,e){return t&&gn(t,e,Na)}function yn(t,e){return Pe(e,(function(e){return Yo(t[e])}))}function wn(t,e){for(var n=0,i=(e=pi(e,t)).length;null!=t&&n<i;)t=t[Ms(e[n++])];return n&&n==i?t:r}function bn(t,e,r){var n=e(t);return zo(t)?n:Re(n,r(t))}function _n(t){return null==t?t===r?"[object Undefined]":"[object Null]":Xt&&Xt in At(t)?function(t){var e=Ct.call(t,Xt),n=t[Xt];try{t[Xt]=r;var i=!0}catch{}var s=Lt.call(t);return i&&(e?t[Xt]=n:delete t[Xt]),s}(t):function(t){return Lt.call(t)}(t)}function En(t,e){return t>e}function An(t,e){return null!=t&&Ct.call(t,e)}function In(t,e){return null!=t&&e in At(t)}function Sn(t,e,n){for(var i=n?Ne:Oe,s=t[0].length,o=t.length,a=o,c=rt(o),u=1/0,h=[];a--;){var l=t[a];a&&e&&(l=ke(l,$e(e))),u=pr(l.length,u),c[a]=!n&&(e||s>=120&&l.length>=120)?new Hr(a&&l):r}l=t[0];var f=-1,d=c[0];t:for(;++f<s&&h.length<u;){var p=l[f],g=e?e(p):p;if(p=n||0!==p?p:0,!(d?Je(d,g):i(h,g,n))){for(a=o;--a;){var m=c[a];if(!(m?Je(m,g):i(t[a],g,n)))continue t}d&&d.push(g),h.push(p)}}return h}function Pn(t,e,n){var i=null==(t=Es(t,e=pi(e,t)))?t:t[Ms(Ws(e))];return null==i?r:_e(i,t,n)}function On(t){return Xo(t)&&_n(t)==d}function Nn(t,e,n,i,s){return t===e||(null==t||null==e||!Xo(t)&&!Xo(e)?t!=t&&e!=e:function(t,e,n,i,s,o){var a=zo(t),c=zo(e),u=a?p:us(t),h=c?p:us(e),l=(u=u==d?E:u)==E,f=(h=h==d?E:h)==E,y=u==h;if(y&&Go(t)){if(!Go(e))return!1;a=!0,l=!1}if(y&&!l)return o||(o=new Kr),a||oa(t)?Vi(t,e,n,i,s,o):function(t,e,r,n,i,s,o){switch(r){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!s(new zt(t),new zt(e)));case g:case m:case _:return jo(+t,+e);case v:return t.name==e.name&&t.message==e.message;case I:case P:return t==e+"";case b:var a=rr;case S:var c=1&n;if(a||(a=sr),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var h=Vi(a(t),a(e),n,i,s,o);return o.delete(t),h;case O:if(Mr)return Mr.call(t)==Mr.call(e)}return!1}(t,e,u,n,i,s,o);if(!(1&n)){var w=l&&Ct.call(t,"__wrapped__"),A=f&&Ct.call(e,"__wrapped__");if(w||A){var N=w?t.value():t,x=A?e.value():e;return o||(o=new Kr),s(N,x,n,i,o)}}return!!y&&(o||(o=new Kr),function(t,e,n,i,s,o){var a=1&n,c=Xi(t),u=c.length;if(u!=Xi(e).length&&!a)return!1;for(var h=u;h--;){var l=c[h];if(!(a?l in e:Ct.call(e,l)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++h<u;){var m=t[l=c[h]],v=e[l];if(i)var y=a?i(v,m,l,e,t,o):i(m,v,l,t,e,o);if(!(y===r?m===v||s(m,v,n,i,o):y)){p=!1;break}g||(g="constructor"==l)}if(p&&!g){var w=t.constructor,b=e.constructor;w!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,s,o))}(t,e,n,i,Nn,s))}function kn(t,e,n,i){var s=n.length,o=s,a=!i;if(null==t)return!o;for(t=At(t);s--;){var c=n[s];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<o;){var u=(c=n[s])[0],h=t[u],l=c[1];if(a&&c[2]){if(h===r&&!(u in t))return!1}else{var f=new Kr;if(i)var d=i(h,l,u,t,e,f);if(!(d===r?Nn(l,h,3,i,f):d))return!1}}return!0}function Rn(t){return!(!Qo(t)||function(t){return!!Tt&&Tt in t}(t))&&(Yo(t)?Dt:dt).test(Ts(t))}function xn(t){return"function"==typeof t?t:null==t?tc:"object"==typeof t?zo(t)?Un(t[0],t[1]):Ln(t):uc(t)}function Cn(t){if(!ys(t))return fr(t);var e=[];for(var r in At(t))Ct.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Mn(t,e){return t<e}function Tn(t,e){var r=-1,n=Ho(t)?rt(t.length):[];return cn(t,(function(t,i,s){n[++r]=e(t,i,s)})),n}function Ln(t){var e=ss(t);return 1==e.length&&e[0][2]?bs(e[0][0],e[0][1]):function(r){return r===t||kn(r,t,e)}}function Un(t,e){return gs(t)&&ws(e)?bs(Ms(t),e):function(n){var i=Aa(n,t);return i===r&&i===e?Ia(n,t):Nn(e,i,3)}}function jn(t,e,n,i,s){t!==e&&pn(e,(function(o,a){if(s||(s=new Kr),Qo(o))!function(t,e,n,i,s,o,a){var c=As(t,n),u=As(e,n),h=a.get(u);if(h)Jr(t,n,h);else{var l=o?o(c,u,n+"",t,e,a):r,f=l===r;if(f){var d=zo(u),p=!d&&Go(u),g=!d&&!p&&oa(u);l=u,d||p||g?zo(c)?l=c:Ko(c)?l=Ii(c):p?(f=!1,l=yi(u,!0)):g?(f=!1,l=bi(u,!0)):l=[]:ea(u)||qo(u)?(l=c,qo(c)?l=pa(c):(!Qo(c)||Yo(c))&&(l=ls(u))):f=!1}f&&(a.set(u,l),s(l,u,i,o,a),a.delete(u)),Jr(t,n,l)}}(t,e,a,n,jn,i,s);else{var c=i?i(As(t,a),o,a+"",t,e,s):r;c===r&&(c=o),Jr(t,a,c)}}),ka)}function Dn(t,e){var n=t.length;if(n)return ds(e+=e<0?n:0,n)?t[e]:r}function Bn(t,e,r){e=e.length?ke(e,(function(t){return zo(t)?function(e){return wn(e,1===t.length?t[0]:t)}:t})):[tc];var n=-1;return e=ke(e,$e(ns())),function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,o=i.length,a=r.length;++n<o;){var c=_i(i[n],s[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}));n--;)t[n]=t[n].value;return t}(Tn(t,(function(t,r,i){return{criteria:ke(e,(function(e){return e(t)})),index:++n,value:t}})))}function qn(t,e,r){for(var n=-1,i=e.length,s={};++n<i;){var o=e[n],a=wn(t,o);r(a,o)&&Yn(s,pi(o,t),a)}return s}function zn(t,e,r,n){var i=n?De:je,s=-1,o=e.length,a=t;for(t===e&&(e=Ii(e)),r&&(a=ke(t,$e(r)));++s<o;)for(var c=0,u=e[s],h=r?r(u):u;(c=i(a,h,c,n))>-1;)a!==t&&Wt.call(a,c,1),Wt.call(t,c,1);return t}function Fn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==s){var s=i;ds(i)?Wt.call(t,i,1):oi(t,i)}}return t}function Hn(t,e){return t+de(vr()*(e-t+1))}function Kn(t,e){var r="";if(!t||e<1||e>u)return r;do{e%2&&(r+=t),(e=de(e/2))&&(t+=t)}while(e);return r}function Gn(t,e){return Ps(_s(t,e,tc),t+"")}function Wn(t){return Wr(ja(t))}function $n(t,e){var r=ja(t);return ks(r,rn(e,0,r.length))}function Yn(t,e,n,i){if(!Qo(t))return t;for(var s=-1,o=(e=pi(e,t)).length,a=o-1,c=t;null!=c&&++s<o;){var u=Ms(e[s]),h=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(s!=a){var l=c[u];(h=i?i(l,u,c):r)===r&&(h=Qo(l)?l:ds(e[s+1])?[]:{})}Vr(c,u,h),c=c[u]}return t}var Jn=Sr?function(t,e){return Sr.set(t,e),t}:tc,Vn=ie?function(t,e){return ie(t,"toString",{configurable:!0,enumerable:!1,value:Qa(e),writable:!0})}:tc;function Qn(t){return ks(ja(t))}function Xn(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=rt(i);++n<i;)s[n]=t[n+e];return s}function Zn(t,e){var r;return cn(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function ti(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var s=n+i>>>1,o=t[s];null!==o&&!sa(o)&&(r?o<=e:o<e)?n=s+1:i=s}return i}return ei(t,e,tc,r)}function ei(t,e,n,i){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,c=null===e,u=sa(e),h=e===r;s<o;){var l=de((s+o)/2),f=n(t[l]),d=f!==r,p=null===f,g=f==f,m=sa(f);if(a)var v=i||g;else v=h?g&&(i||d):c?g&&d&&(i||!p):u?g&&d&&!p&&(i||!m):!p&&!m&&(i?f<=e:f<e);v?s=l+1:o=l}return pr(o,4294967294)}function ri(t,e){for(var r=-1,n=t.length,i=0,s=[];++r<n;){var o=t[r],a=e?e(o):o;if(!r||!jo(a,c)){var c=a;s[i++]=0===o?0:o}}return s}function ni(t){return"number"==typeof t?t:sa(t)?h:+t}function ii(t){if("string"==typeof t)return t;if(zo(t))return ke(t,ii)+"";if(sa(t))return Tr?Tr.call(t):"";var e=t+"";return"0"==e&&1/t==-c?"-0":e}function si(t,e,r){var n=-1,i=Oe,s=t.length,o=!0,a=[],c=a;if(r)o=!1,i=Ne;else if(s>=200){var u=e?null:Ki(t);if(u)return sr(u);o=!1,i=Je,c=new Hr}else c=e?[]:a;t:for(;++n<s;){var h=t[n],l=e?e(h):h;if(h=r||0!==h?h:0,o&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue t;e&&c.push(l),a.push(h)}else i(c,l,r)||(c!==a&&c.push(l),a.push(h))}return a}function oi(t,e){return null==(t=Es(t,e=pi(e,t)))||delete t[Ms(Ws(e))]}function ai(t,e,r,n){return Yn(t,e,r(wn(t,e)),n)}function ci(t,e,r,n){for(var i=t.length,s=n?i:-1;(n?s--:++s<i)&&e(t[s],s,t););return r?Xn(t,n?0:s,n?s+1:i):Xn(t,n?s+1:0,n?i:s)}function ui(t,e){var r=t;return r instanceof Br&&(r=r.value()),xe(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),r)}function hi(t,e,r){var n=t.length;if(n<2)return n?si(t[0]):[];for(var i=-1,s=rt(n);++i<n;)for(var o=t[i],a=-1;++a<n;)a!=i&&(s[i]=an(s[i]||o,t[a],e,r));return si(dn(s,1),e,r)}function li(t,e,n){for(var i=-1,s=t.length,o=e.length,a={};++i<s;){var c=i<o?e[i]:r;n(a,t[i],c)}return a}function fi(t){return Ko(t)?t:[]}function di(t){return"function"==typeof t?t:tc}function pi(t,e){return zo(t)?t:gs(t,e)?[t]:Cs(ga(t))}var gi=Gn;function mi(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Xn(t,e,n)}var vi=ae||function(t){return ue.clearTimeout(t)};function yi(t,e){if(e)return t.slice();var r=t.length,n=Ft?Ft(r):new t.constructor(r);return t.copy(n),n}function wi(t){var e=new t.constructor(t.byteLength);return new zt(e).set(new zt(t)),e}function bi(t,e){var r=e?wi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function _i(t,e){if(t!==e){var n=t!==r,i=null===t,s=t==t,o=sa(t),a=e!==r,c=null===e,u=e==e,h=sa(e);if(!c&&!h&&!o&&t>e||o&&a&&u&&!c&&!h||i&&a&&u||!n&&u||!s)return 1;if(!i&&!o&&!h&&t<e||h&&n&&s&&!i&&!o||c&&n&&s||!a&&s||!u)return-1}return 0}function Ei(t,e,r,n){for(var i=-1,s=t.length,o=r.length,a=-1,c=e.length,u=dr(s-o,0),h=rt(c+u),l=!n;++a<c;)h[a]=e[a];for(;++i<o;)(l||i<s)&&(h[r[i]]=t[i]);for(;u--;)h[a++]=t[i++];return h}function Ai(t,e,r,n){for(var i=-1,s=t.length,o=-1,a=r.length,c=-1,u=e.length,h=dr(s-a,0),l=rt(h+u),f=!n;++i<h;)l[i]=t[i];for(var d=i;++c<u;)l[d+c]=e[c];for(;++o<a;)(f||i<s)&&(l[d+r[o]]=t[i++]);return l}function Ii(t,e){var r=-1,n=t.length;for(e||(e=rt(n));++r<n;)e[r]=t[r];return e}function Si(t,e,n,i){var s=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var c=e[o],u=i?i(n[c],t[c],c,n,t):r;u===r&&(u=t[c]),s?tn(n,c,u):Vr(n,c,u)}return n}function Pi(t,e){return function(r,n){var i=zo(r)?Ee:Xr,s=e?e():{};return i(r,t,ns(n,2),s)}}function Oi(t){return Gn((function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:r,a=s>2?n[2]:r;for(o=t.length>3&&"function"==typeof o?(s--,o):r,a&&ps(n[0],n[1],a)&&(o=s<3?r:o,s=1),e=At(e);++i<s;){var c=n[i];c&&t(e,c,i,o)}return e}))}function Ni(t,e){return function(r,n){if(null==r)return r;if(!Ho(r))return t(r,n);for(var i=r.length,s=e?i:-1,o=At(r);(e?s--:++s<i)&&!1!==n(o[s],s,o););return r}}function ki(t){return function(e,r,n){for(var i=-1,s=At(e),o=n(e),a=o.length;a--;){var c=o[t?a:++i];if(!1===r(s[c],c,s))break}return e}}function Ri(t){return function(e){var n=er(e=ga(e))?ar(e):r,i=n?n[0]:e.charAt(0),s=n?mi(n,1).join(""):e.slice(1);return i[t]()+s}}function xi(t){return function(e){return xe(Ya(qa(e).replace(Yt,"")),t,"")}}function Ci(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ur(t.prototype),n=t.apply(r,e);return Qo(n)?n:r}}function Mi(t){return function(e,n,i){var s=At(e);if(!Ho(e)){var o=ns(n,3);e=Na(e),n=function(t){return o(s[t],t,s)}}var a=t(e,n,i);return a>-1?s[o?e[a]:a]:r}}function Ti(t){return Qi((function(e){var i=e.length,s=i,o=Dr.prototype.thru;for(t&&e.reverse();s--;){var a=e[s];if("function"!=typeof a)throw new Pt(n);if(o&&!c&&"wrapper"==es(a))var c=new Dr([],!0)}for(s=c?s:i;++s<i;){var u=es(a=e[s]),h="wrapper"==u?ts(a):r;c=h&&ms(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?c[es(h[0])].apply(c,h[3]):1==a.length&&ms(a)?c[u]():c.thru(a)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&zo(r))return c.plant(r).value();for(var n=0,s=i?e[n].apply(this,t):r;++n<i;)s=e[n].call(this,s);return s}}))}function Li(t,e,n,i,s,o,c,u,h,l){var f=e&a,d=1&e,p=2&e,g=24&e,m=512&e,v=p?r:Ci(t);return function a(){for(var y=arguments.length,w=rt(y),b=y;b--;)w[b]=arguments[b];if(g)var _=rs(a),E=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}(w,_);if(i&&(w=Ei(w,i,s,g)),o&&(w=Ai(w,o,c,g)),y-=E,g&&y<l){var A=ir(w,_);return Fi(t,e,Li,a.placeholder,n,w,A,u,h,l-y)}var I=d?n:this,S=p?I[t]:t;return y=w.length,u?w=function(t,e){for(var n=t.length,i=pr(e.length,n),s=Ii(t);i--;){var o=e[i];t[i]=ds(o,n)?s[o]:r}return t}(w,u):m&&y>1&&w.reverse(),f&&h<y&&(w.length=h),this&&this!==ue&&this instanceof a&&(S=v||Ci(S)),S.apply(I,w)}}function Ui(t,e){return function(r,n){return function(t,e,r,n){return mn(t,(function(t,i,s){e(n,r(t),i,s)})),n}(r,t,e(n),{})}}function ji(t,e){return function(n,i){var s;if(n===r&&i===r)return e;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=ii(n),i=ii(i)):(n=ni(n),i=ni(i)),s=t(n,i)}return s}}function Di(t){return Qi((function(e){return e=ke(e,$e(ns())),Gn((function(r){var n=this;return t(e,(function(t){return _e(t,n,r)}))}))}))}function Bi(t,e){var n=(e=e===r?" ":ii(e)).length;if(n<2)return n?Kn(e,t):e;var i=Kn(e,le(t/or(e)));return er(e)?mi(ar(i),0,t).join(""):i.slice(0,t)}function qi(t){return function(e,n,i){return i&&"number"!=typeof i&&ps(e,n,i)&&(n=i=r),e=ha(e),n===r?(n=e,e=0):n=ha(n),function(t,e,r,n){for(var i=-1,s=dr(le((e-t)/(r||1)),0),o=rt(s);s--;)o[n?s:++i]=t,t+=r;return o}(e,n,i=i===r?e<n?1:-1:ha(i),t)}}function zi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=da(e),r=da(r)),t(e,r)}}function Fi(t,e,n,i,s,a,c,u,h,l){var f=8&e;e|=f?o:64,4&(e&=~(f?64:o))||(e&=-4);var d=[t,e,s,f?a:r,f?c:r,f?r:a,f?r:c,u,h,l],p=n.apply(r,d);return ms(t)&&Is(p,d),p.placeholder=i,Os(p,t,e)}function Hi(t){var e=Et[t];return function(t,r){if(t=da(t),(r=null==r?0:pr(la(r),292))&&Fe(t)){var n=(ga(t)+"e").split("e");return+((n=(ga(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Ki=Er&&1/sr(new Er([,-0]))[1]==c?function(t){return new Er(t)}:sc;function Gi(t){return function(e){var r=us(e);return r==b?rr(e):r==S?function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Wi(t,e,i,c,u,h,l,f){var d=2&e;if(!d&&"function"!=typeof t)throw new Pt(n);var p=c?c.length:0;if(p||(e&=-97,c=u=r),l=l===r?l:dr(la(l),0),f=f===r?f:la(f),p-=u?u.length:0,64&e){var g=c,m=u;c=u=r}var v=d?r:ts(t),y=[t,e,i,c,u,g,m,h,l,f];if(v&&function(t,e){var r=t[1],n=e[1],i=r|n,o=i<131,c=n==a&&8==r||n==a&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!o&&!c)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var u=e[3];if(u){var h=t[3];t[3]=h?Ei(h,u,e[4]):u,t[4]=h?ir(t[3],s):e[4]}(u=e[5])&&(h=t[5],t[5]=h?Ai(h,u,e[6]):u,t[6]=h?ir(t[5],s):e[6]),(u=e[7])&&(t[7]=u),n&a&&(t[8]=null==t[8]?e[8]:pr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(y,v),t=y[0],e=y[1],i=y[2],c=y[3],u=y[4],!(f=y[9]=y[9]===r?d?0:t.length:dr(y[9]-p,0))&&24&e&&(e&=-25),e&&1!=e)w=8==e||16==e?function(t,e,n){var i=Ci(t);return function s(){for(var o=arguments.length,a=rt(o),c=o,u=rs(s);c--;)a[c]=arguments[c];var h=o<3&&a[0]!==u&&a[o-1]!==u?[]:ir(a,u);return(o-=h.length)<n?Fi(t,e,Li,s.placeholder,r,a,h,r,r,n-o):_e(this&&this!==ue&&this instanceof s?i:t,this,a)}}(t,e,f):e!=o&&33!=e||u.length?Li.apply(r,y):function(t,e,r,n){var i=1&e,s=Ci(t);return function e(){for(var o=-1,a=arguments.length,c=-1,u=n.length,h=rt(u+a),l=this&&this!==ue&&this instanceof e?s:t;++c<u;)h[c]=n[c];for(;a--;)h[c++]=arguments[++o];return _e(l,i?r:this,h)}}(t,e,i,c);else var w=function(t,e,r){var n=1&e,i=Ci(t);return function e(){return(this&&this!==ue&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,i);return Os((v?Jn:Is)(w,y),t,e)}function $i(t,e,n,i){return t===r||jo(t,kt[n])&&!Ct.call(i,n)?e:t}function Yi(t,e,n,i,s,o){return Qo(t)&&Qo(e)&&(o.set(e,t),jn(t,e,r,Yi,o),o.delete(e)),t}function Ji(t){return ea(t)?r:t}function Vi(t,e,n,i,s,o){var a=1&n,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var h=o.get(t),l=o.get(e);if(h&&l)return h==e&&l==t;var f=-1,d=!0,p=2&n?new Hr:r;for(o.set(t,e),o.set(e,t);++f<c;){var g=t[f],m=e[f];if(i)var v=a?i(m,g,f,e,t,o):i(g,m,f,t,e,o);if(v!==r){if(v)continue;d=!1;break}if(p){if(!Me(e,(function(t,e){if(!Je(p,e)&&(g===t||s(g,t,n,i,o)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!s(g,m,n,i,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Qi(t){return Ps(_s(t,r,zs),t+"")}function Xi(t){return bn(t,Na,as)}function Zi(t){return bn(t,ka,cs)}var ts=Sr?function(t){return Sr.get(t)}:sc;function es(t){for(var e=t.name+"",r=Pr[e],n=Ct.call(Pr,e)?r.length:0;n--;){var i=r[n],s=i.func;if(null==s||s==t)return i.name}return e}function rs(t){return(Ct.call(Lr,"placeholder")?Lr:t).placeholder}function ns(){var t=Lr.iteratee||ec;return t=t===ec?xn:t,arguments.length?t(arguments[0],arguments[1]):t}function is(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function ss(t){for(var e=Na(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,ws(i)]}return e}function os(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Rn(n)?n:r}var as=pe?function(t){return null==t?[]:(t=At(t),Pe(pe(t),(function(e){return Gt.call(t,e)})))}:fc,cs=pe?function(t){for(var e=[];t;)Re(e,as(t)),t=Ht(t);return e}:fc,us=_n;function hs(t,e,r){for(var n=-1,i=(e=pi(e,t)).length,s=!1;++n<i;){var o=Ms(e[n]);if(!(s=null!=t&&r(t,o)))break;t=t[o]}return s||++n!=i?s:!!(i=null==t?0:t.length)&&Vo(i)&&ds(o,i)&&(zo(t)||qo(t))}function ls(t){return"function"!=typeof t.constructor||ys(t)?{}:Ur(Ht(t))}function fs(t){return zo(t)||qo(t)||!!($t&&t&&t[$t])}function ds(t,e){var r=typeof t;return!!(e=e??u)&&("number"==r||"symbol"!=r&&gt.test(t))&&t>-1&&t%1==0&&t<e}function ps(t,e,r){if(!Qo(r))return!1;var n=typeof e;return!!("number"==n?Ho(r)&&ds(e,r.length):"string"==n&&e in r)&&jo(r[e],t)}function gs(t,e){if(zo(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!sa(t))||Q.test(t)||!V.test(t)||null!=e&&t in At(e)}function ms(t){var e=es(t),r=Lr[e];if("function"!=typeof r||!(e in Br.prototype))return!1;if(t===r)return!0;var n=ts(r);return!!n&&t===n[0]}(wr&&us(new wr(new ArrayBuffer(1)))!=R||br&&us(new br)!=b||_r&&us(_r.resolve())!=A||Er&&us(new Er)!=S||Ar&&us(new Ar)!=N)&&(us=function(t){var e=_n(t),n=e==E?t.constructor:r,i=n?Ts(n):"";if(i)switch(i){case Or:return R;case Nr:return b;case kr:return A;case Rr:return S;case xr:return N}return e});var vs=Rt?Yo:dc;function ys(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function ws(t){return t==t&&!Qo(t)}function bs(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in At(n))}}function _s(t,e,n){return e=dr(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=dr(r.length-e,0),o=rt(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=rt(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),_e(t,this,a)}}function Es(t,e){return e.length<2?t:wn(t,Xn(e,0,-1))}function As(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Is=Ns(Jn),Ss=he||function(t,e){return ue.setTimeout(t,e)},Ps=Ns(Vn);function Os(t,e,r){var n=e+"";return Ps(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(nt,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ae(f,(function(r){var n="_."+r[0];e&r[1]&&!Oe(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(it);return e?e[1].split(st):[]}(n),r)))}function Ns(t){var e=0,n=0;return function(){var i=gr(),s=16-(i-n);if(n=i,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ks(t,e){var n=-1,i=t.length,s=i-1;for(e=e===r?i:e;++n<e;){var o=Hn(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Rs,xs,Cs=(Rs=xo((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(X,(function(t,r,n,i){e.push(n?i.replace(ct,"$1"):r||t)})),e}),(function(t){return 500===xs.size&&xs.clear(),t})),xs=Rs.cache,Rs);function Ms(t){if("string"==typeof t||sa(t))return t;var e=t+"";return"0"==e&&1/t==-c?"-0":e}function Ts(t){if(null!=t){try{return xt.call(t)}catch{}try{return t+""}catch{}}return""}function Ls(t){if(t instanceof Br)return t.clone();var e=new Dr(t.__wrapped__,t.__chain__);return e.__actions__=Ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Us=Gn((function(t,e){return Ko(t)?an(t,dn(e,1,Ko,!0)):[]})),js=Gn((function(t,e){var n=Ws(e);return Ko(n)&&(n=r),Ko(t)?an(t,dn(e,1,Ko,!0),ns(n,2)):[]})),Ds=Gn((function(t,e){var n=Ws(e);return Ko(n)&&(n=r),Ko(t)?an(t,dn(e,1,Ko,!0),r,n):[]}));function Bs(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:la(r);return i<0&&(i=dr(n+i,0)),Ue(t,ns(e,3),i)}function qs(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return n!==r&&(s=la(n),s=n<0?dr(i+s,0):pr(s,i-1)),Ue(t,ns(e,3),s,!0)}function zs(t){return null!=t&&t.length?dn(t,1):[]}function Fs(t){return t&&t.length?t[0]:r}var Hs=Gn((function(t){var e=ke(t,fi);return e.length&&e[0]===t[0]?Sn(e):[]})),Ks=Gn((function(t){var e=Ws(t),n=ke(t,fi);return e===Ws(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Sn(n,ns(e,2)):[]})),Gs=Gn((function(t){var e=Ws(t),n=ke(t,fi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Sn(n,r,e):[]}));function Ws(t){var e=null==t?0:t.length;return e?t[e-1]:r}var $s=Gn(Ys);function Ys(t,e){return t&&t.length&&e&&e.length?zn(t,e):t}var Js=Qi((function(t,e){var r=null==t?0:t.length,n=en(t,e);return Fn(t,ke(e,(function(t){return ds(t,r)?+t:t})).sort(_i)),n}));function Vs(t){return null==t?t:yr.call(t)}var Qs=Gn((function(t){return si(dn(t,1,Ko,!0))})),Xs=Gn((function(t){var e=Ws(t);return Ko(e)&&(e=r),si(dn(t,1,Ko,!0),ns(e,2))})),Zs=Gn((function(t){var e=Ws(t);return e="function"==typeof e?e:r,si(dn(t,1,Ko,!0),r,e)}));function to(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Ko(t))return e=dr(t.length,e),!0})),Ge(e,(function(e){return ke(t,ze(e))}))}function eo(t,e){if(!t||!t.length)return[];var n=to(t);return null==e?n:ke(n,(function(t){return _e(e,r,t)}))}var ro=Gn((function(t,e){return Ko(t)?an(t,e):[]})),no=Gn((function(t){return hi(Pe(t,Ko))})),io=Gn((function(t){var e=Ws(t);return Ko(e)&&(e=r),hi(Pe(t,Ko),ns(e,2))})),so=Gn((function(t){var e=Ws(t);return e="function"==typeof e?e:r,hi(Pe(t,Ko),r,e)})),oo=Gn(to),ao=Gn((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,eo(t,n)}));function co(t){var e=Lr(t);return e.__chain__=!0,e}function uo(t,e){return e(t)}var ho=Qi((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,s=function(e){return en(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Br&&ds(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:uo,args:[s],thisArg:r}),new Dr(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(s)})),lo=Pi((function(t,e,r){Ct.call(t,r)?++t[r]:tn(t,r,1)})),fo=Mi(Bs),po=Mi(qs);function go(t,e){return(zo(t)?Ae:cn)(t,ns(e,3))}function mo(t,e){return(zo(t)?Ie:un)(t,ns(e,3))}var vo=Pi((function(t,e,r){Ct.call(t,r)?t[r].push(e):tn(t,r,[e])})),yo=Gn((function(t,e,r){var n=-1,i="function"==typeof e,s=Ho(t)?rt(t.length):[];return cn(t,(function(t){s[++n]=i?_e(e,t,r):Pn(t,e,r)})),s})),wo=Pi((function(t,e,r){tn(t,r,e)}));function bo(t,e){return(zo(t)?ke:Tn)(t,ns(e,3))}var _o=Pi((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),Eo=Gn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&ps(t,e[0],e[1])?e=[]:r>2&&ps(e[0],e[1],e[2])&&(e=[e[0]]),Bn(t,dn(e,1),[])})),Ao=ce||function(){return ue.Date.now()};function Io(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Wi(t,a,r,r,r,r,e)}function So(t,e){var i;if("function"!=typeof e)throw new Pt(n);return t=la(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=r),i}}var Po=Gn((function(t,e,r){var n=1;if(r.length){var i=ir(r,rs(Po));n|=o}return Wi(t,n,e,r,i)})),Oo=Gn((function(t,e,r){var n=3;if(r.length){var i=ir(r,rs(Oo));n|=o}return Wi(e,n,t,r,i)}));function No(t,e,i){var s,o,a,c,u,h,l=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Pt(n);function g(e){var n=s,i=o;return s=o=r,l=e,c=t.apply(i,n)}function m(t){var n=t-h;return h===r||n>=e||n<0||d&&t-l>=a}function v(){var t=Ao();if(m(t))return y(t);u=Ss(v,function(t){var r=e-(t-h);return d?pr(r,a-(t-l)):r}(t))}function y(t){return u=r,p&&s?g(t):(s=o=r,c)}function w(){var t=Ao(),n=m(t);if(s=arguments,o=this,h=t,n){if(u===r)return function(t){return l=t,u=Ss(v,e),f?g(t):c}(h);if(d)return vi(u),u=Ss(v,e),g(h)}return u===r&&(u=Ss(v,e)),c}return e=da(e)||0,Qo(i)&&(f=!!i.leading,a=(d="maxWait"in i)?dr(da(i.maxWait)||0,e):a,p="trailing"in i?!!i.trailing:p),w.cancel=function(){u!==r&&vi(u),l=0,s=h=o=u=r},w.flush=function(){return u===r?c:y(Ao())},w}var ko=Gn((function(t,e){return on(t,1,e)})),Ro=Gn((function(t,e,r){return on(t,da(e)||0,r)}));function xo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Pt(n);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(xo.Cache||Fr),r}function Co(t){if("function"!=typeof t)throw new Pt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}xo.Cache=Fr;var Mo=gi((function(t,e){var r=(e=1==e.length&&zo(e[0])?ke(e[0],$e(ns())):ke(dn(e,1),$e(ns()))).length;return Gn((function(n){for(var i=-1,s=pr(n.length,r);++i<s;)n[i]=e[i].call(this,n[i]);return _e(t,this,n)}))})),To=Gn((function(t,e){var n=ir(e,rs(To));return Wi(t,o,r,e,n)})),Lo=Gn((function(t,e){var n=ir(e,rs(Lo));return Wi(t,64,r,e,n)})),Uo=Qi((function(t,e){return Wi(t,256,r,r,r,e)}));function jo(t,e){return t===e||t!=t&&e!=e}var Do=zi(En),Bo=zi((function(t,e){return t>=e})),qo=On(function(){return arguments}())?On:function(t){return Xo(t)&&Ct.call(t,"callee")&&!Gt.call(t,"callee")},zo=rt.isArray,Fo=ge?$e(ge):function(t){return Xo(t)&&_n(t)==k};function Ho(t){return null!=t&&Vo(t.length)&&!Yo(t)}function Ko(t){return Xo(t)&&Ho(t)}var Go=Te||dc,Wo=me?$e(me):function(t){return Xo(t)&&_n(t)==m};function $o(t){if(!Xo(t))return!1;var e=_n(t);return e==v||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ea(t)}function Yo(t){if(!Qo(t))return!1;var e=_n(t);return e==y||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Jo(t){return"number"==typeof t&&t==la(t)}function Vo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=u}function Qo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Xo(t){return null!=t&&"object"==typeof t}var Zo=ve?$e(ve):function(t){return Xo(t)&&us(t)==b};function ta(t){return"number"==typeof t||Xo(t)&&_n(t)==_}function ea(t){if(!Xo(t)||_n(t)!=E)return!1;var e=Ht(t);if(null===e)return!0;var r=Ct.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xt.call(r)==Ut}var ra=ye?$e(ye):function(t){return Xo(t)&&_n(t)==I},na=we?$e(we):function(t){return Xo(t)&&us(t)==S};function ia(t){return"string"==typeof t||!zo(t)&&Xo(t)&&_n(t)==P}function sa(t){return"symbol"==typeof t||Xo(t)&&_n(t)==O}var oa=be?$e(be):function(t){return Xo(t)&&Vo(t.length)&&!!re[_n(t)]},aa=zi(Mn),ca=zi((function(t,e){return t<=e}));function ua(t){if(!t)return[];if(Ho(t))return ia(t)?ar(t):Ii(t);if(Vt&&t[Vt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Vt]());var e=us(t);return(e==b?rr:e==S?sr:ja)(t)}function ha(t){return t?(t=da(t))===c||t===-c?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function la(t){var e=ha(t),r=e%1;return e==e?r?e-r:e:0}function fa(t){return t?rn(la(t),0,l):0}function da(t){if("number"==typeof t)return t;if(sa(t))return h;if(Qo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Qo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=We(t);var r=ft.test(t);return r||pt.test(t)?oe(t.slice(2),r?2:8):lt.test(t)?h:+t}function pa(t){return Si(t,ka(t))}function ga(t){return null==t?"":ii(t)}var ma=Oi((function(t,e){if(ys(e)||Ho(e))Si(e,Na(e),t);else for(var r in e)Ct.call(e,r)&&Vr(t,r,e[r])})),va=Oi((function(t,e){Si(e,ka(e),t)})),ya=Oi((function(t,e,r,n){Si(e,ka(e),t,n)})),wa=Oi((function(t,e,r,n){Si(e,Na(e),t,n)})),ba=Qi(en),_a=Gn((function(t,e){t=At(t);var n=-1,i=e.length,s=i>2?e[2]:r;for(s&&ps(e[0],e[1],s)&&(i=1);++n<i;)for(var o=e[n],a=ka(o),c=-1,u=a.length;++c<u;){var h=a[c],l=t[h];(l===r||jo(l,kt[h])&&!Ct.call(t,h))&&(t[h]=o[h])}return t})),Ea=Gn((function(t){return t.push(r,Yi),_e(xa,r,t)}));function Aa(t,e,n){var i=null==t?r:wn(t,e);return i===r?n:i}function Ia(t,e){return null!=t&&hs(t,e,In)}var Sa=Ui((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),t[e]=r}),Qa(tc)),Pa=Ui((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),Ct.call(t,e)?t[e].push(r):t[e]=[r]}),ns),Oa=Gn(Pn);function Na(t){return Ho(t)?Gr(t):Cn(t)}function ka(t){return Ho(t)?Gr(t,!0):function(t){if(!Qo(t))return function(t){var e=[];if(null!=t)for(var r in At(t))e.push(r);return e}(t);var e=ys(t),r=[];for(var n in t)"constructor"==n&&(e||!Ct.call(t,n))||r.push(n);return r}(t)}var Ra=Oi((function(t,e,r){jn(t,e,r)})),xa=Oi((function(t,e,r,n){jn(t,e,r,n)})),Ca=Qi((function(t,e){var r={};if(null==t)return r;var n=!1;e=ke(e,(function(e){return e=pi(e,t),n||(n=e.length>1),e})),Si(t,Zi(t),r),n&&(r=nn(r,7,Ji));for(var i=e.length;i--;)oi(r,e[i]);return r})),Ma=Qi((function(t,e){return null==t?{}:function(t,e){return qn(t,e,(function(e,r){return Ia(t,r)}))}(t,e)}));function Ta(t,e){if(null==t)return{};var r=ke(Zi(t),(function(t){return[t]}));return e=ns(e),qn(t,r,(function(t,r){return e(t,r[0])}))}var La=Gi(Na),Ua=Gi(ka);function ja(t){return null==t?[]:Ye(t,Na(t))}var Da=xi((function(t,e,r){return e=e.toLowerCase(),t+(r?Ba(e):e)}));function Ba(t){return $a(ga(t).toLowerCase())}function qa(t){return(t=ga(t))&&t.replace(mt,Xe).replace(Jt,"")}var za=xi((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Fa=xi((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Ha=Ri("toLowerCase"),Ka=xi((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),Ga=xi((function(t,e,r){return t+(r?" ":"")+$a(e)})),Wa=xi((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),$a=Ri("toUpperCase");function Ya(t,e,n){return t=ga(t),(e=n?r:e)===r?function(t){return Zt.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(ot)||[]}(t):t.match(e)||[]}var Ja=Gn((function(t,e){try{return _e(t,r,e)}catch(t){return $o(t)?t:new bt(t)}})),Va=Qi((function(t,e){return Ae(e,(function(e){e=Ms(e),tn(t,e,Po(t[e],t))})),t}));function Qa(t){return function(){return t}}var Xa=Ti(),Za=Ti(!0);function tc(t){return t}function ec(t){return xn("function"==typeof t?t:nn(t,1))}var rc=Gn((function(t,e){return function(r){return Pn(r,t,e)}})),nc=Gn((function(t,e){return function(r){return Pn(t,r,e)}}));function ic(t,e,r){var n=Na(e),i=yn(e,n);null==r&&(!Qo(e)||!i.length&&n.length)&&(r=e,e=t,t=this,i=yn(e,Na(e)));var s=!(Qo(r)&&"chain"in r&&!r.chain),o=Yo(t);return Ae(i,(function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(s||e){var r=t(this.__wrapped__);return(r.__actions__=Ii(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Re([this.value()],arguments))})})),t}function sc(){}var oc=Di(ke),ac=Di(Se),cc=Di(Me);function uc(t){return gs(t)?ze(Ms(t)):function(t){return function(e){return wn(e,t)}}(t)}var hc=qi(),lc=qi(!0);function fc(){return[]}function dc(){return!1}var pc=ji((function(t,e){return t+e}),0),gc=Hi("ceil"),mc=ji((function(t,e){return t/e}),1),vc=Hi("floor"),yc=ji((function(t,e){return t*e}),1),wc=Hi("round"),bc=ji((function(t,e){return t-e}),0);return Lr.after=function(t,e){if("function"!=typeof e)throw new Pt(n);return t=la(t),function(){if(--t<1)return e.apply(this,arguments)}},Lr.ary=Io,Lr.assign=ma,Lr.assignIn=va,Lr.assignInWith=ya,Lr.assignWith=wa,Lr.at=ba,Lr.before=So,Lr.bind=Po,Lr.bindAll=Va,Lr.bindKey=Oo,Lr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zo(t)?t:[t]},Lr.chain=co,Lr.chunk=function(t,e,n){e=(n?ps(t,e,n):e===r)?1:dr(la(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,o=0,a=rt(le(i/e));s<i;)a[o++]=Xn(t,s,s+=e);return a},Lr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var s=t[e];s&&(i[n++]=s)}return i},Lr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=rt(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Re(zo(r)?Ii(r):[r],dn(e,1))},Lr.cond=function(t){var e=null==t?0:t.length,r=ns();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new Pt(n);return[r(t[0]),t[1]]})):[],Gn((function(r){for(var n=-1;++n<e;){var i=t[n];if(_e(i[0],this,r))return _e(i[1],this,r)}}))},Lr.conforms=function(t){return function(t){var e=Na(t);return function(r){return sn(r,t,e)}}(nn(t,1))},Lr.constant=Qa,Lr.countBy=lo,Lr.create=function(t,e){var r=Ur(t);return null==e?r:Zr(r,e)},Lr.curry=function t(e,n,i){var s=Wi(e,8,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},Lr.curryRight=function t(e,n,i){var s=Wi(e,16,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},Lr.debounce=No,Lr.defaults=_a,Lr.defaultsDeep=Ea,Lr.defer=ko,Lr.delay=Ro,Lr.difference=Us,Lr.differenceBy=js,Lr.differenceWith=Ds,Lr.drop=function(t,e,n){var i=null==t?0:t.length;return i?Xn(t,(e=n||e===r?1:la(e))<0?0:e,i):[]},Lr.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Xn(t,0,(e=i-(e=n||e===r?1:la(e)))<0?0:e):[]},Lr.dropRightWhile=function(t,e){return t&&t.length?ci(t,ns(e,3),!0,!0):[]},Lr.dropWhile=function(t,e){return t&&t.length?ci(t,ns(e,3),!0):[]},Lr.fill=function(t,e,n,i){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&ps(t,e,n)&&(n=0,i=s),function(t,e,n,i){var s=t.length;for((n=la(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:la(i))<0&&(i+=s),i=n>i?0:fa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Lr.filter=function(t,e){return(zo(t)?Pe:fn)(t,ns(e,3))},Lr.flatMap=function(t,e){return dn(bo(t,e),1)},Lr.flatMapDeep=function(t,e){return dn(bo(t,e),c)},Lr.flatMapDepth=function(t,e,n){return n=n===r?1:la(n),dn(bo(t,e),n)},Lr.flatten=zs,Lr.flattenDeep=function(t){return null!=t&&t.length?dn(t,c):[]},Lr.flattenDepth=function(t,e){return null!=t&&t.length?dn(t,e=e===r?1:la(e)):[]},Lr.flip=function(t){return Wi(t,512)},Lr.flow=Xa,Lr.flowRight=Za,Lr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Lr.functions=function(t){return null==t?[]:yn(t,Na(t))},Lr.functionsIn=function(t){return null==t?[]:yn(t,ka(t))},Lr.groupBy=vo,Lr.initial=function(t){return null!=t&&t.length?Xn(t,0,-1):[]},Lr.intersection=Hs,Lr.intersectionBy=Ks,Lr.intersectionWith=Gs,Lr.invert=Sa,Lr.invertBy=Pa,Lr.invokeMap=yo,Lr.iteratee=ec,Lr.keyBy=wo,Lr.keys=Na,Lr.keysIn=ka,Lr.map=bo,Lr.mapKeys=function(t,e){var r={};return e=ns(e,3),mn(t,(function(t,n,i){tn(r,e(t,n,i),t)})),r},Lr.mapValues=function(t,e){var r={};return e=ns(e,3),mn(t,(function(t,n,i){tn(r,n,e(t,n,i))})),r},Lr.matches=function(t){return Ln(nn(t,1))},Lr.matchesProperty=function(t,e){return Un(t,nn(e,1))},Lr.memoize=xo,Lr.merge=Ra,Lr.mergeWith=xa,Lr.method=rc,Lr.methodOf=nc,Lr.mixin=ic,Lr.negate=Co,Lr.nthArg=function(t){return t=la(t),Gn((function(e){return Dn(e,t)}))},Lr.omit=Ca,Lr.omitBy=function(t,e){return Ta(t,Co(ns(e)))},Lr.once=function(t){return So(2,t)},Lr.orderBy=function(t,e,n,i){return null==t?[]:(zo(e)||(e=null==e?[]:[e]),zo(n=i?r:n)||(n=null==n?[]:[n]),Bn(t,e,n))},Lr.over=oc,Lr.overArgs=Mo,Lr.overEvery=ac,Lr.overSome=cc,Lr.partial=To,Lr.partialRight=Lo,Lr.partition=_o,Lr.pick=Ma,Lr.pickBy=Ta,Lr.property=uc,Lr.propertyOf=function(t){return function(e){return null==t?r:wn(t,e)}},Lr.pull=$s,Lr.pullAll=Ys,Lr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?zn(t,e,ns(r,2)):t},Lr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?zn(t,e,r,n):t},Lr.pullAt=Js,Lr.range=hc,Lr.rangeRight=lc,Lr.rearg=Uo,Lr.reject=function(t,e){return(zo(t)?Pe:fn)(t,Co(ns(e,3)))},Lr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],s=t.length;for(e=ns(e,3);++n<s;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Fn(t,i),r},Lr.rest=function(t,e){if("function"!=typeof t)throw new Pt(n);return Gn(t,e=e===r?e:la(e))},Lr.reverse=Vs,Lr.sampleSize=function(t,e,n){return e=(n?ps(t,e,n):e===r)?1:la(e),(zo(t)?$r:$n)(t,e)},Lr.set=function(t,e,r){return null==t?t:Yn(t,e,r)},Lr.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Yn(t,e,n,i)},Lr.shuffle=function(t){return(zo(t)?Yr:Qn)(t)},Lr.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ps(t,e,n)?(e=0,n=i):(e=null==e?0:la(e),n=n===r?i:la(n)),Xn(t,e,n)):[]},Lr.sortBy=Eo,Lr.sortedUniq=function(t){return t&&t.length?ri(t):[]},Lr.sortedUniqBy=function(t,e){return t&&t.length?ri(t,ns(e,2)):[]},Lr.split=function(t,e,n){return n&&"number"!=typeof n&&ps(t,e,n)&&(e=n=r),(n=n===r?l:n>>>0)?(t=ga(t))&&("string"==typeof e||null!=e&&!ra(e))&&!(e=ii(e))&&er(t)?mi(ar(t),0,n):t.split(e,n):[]},Lr.spread=function(t,e){if("function"!=typeof t)throw new Pt(n);return e=null==e?0:dr(la(e),0),Gn((function(r){var n=r[e],i=mi(r,0,e);return n&&Re(i,n),_e(t,this,i)}))},Lr.tail=function(t){var e=null==t?0:t.length;return e?Xn(t,1,e):[]},Lr.take=function(t,e,n){return t&&t.length?Xn(t,0,(e=n||e===r?1:la(e))<0?0:e):[]},Lr.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Xn(t,(e=i-(e=n||e===r?1:la(e)))<0?0:e,i):[]},Lr.takeRightWhile=function(t,e){return t&&t.length?ci(t,ns(e,3),!1,!0):[]},Lr.takeWhile=function(t,e){return t&&t.length?ci(t,ns(e,3)):[]},Lr.tap=function(t,e){return e(t),t},Lr.throttle=function(t,e,r){var i=!0,s=!0;if("function"!=typeof t)throw new Pt(n);return Qo(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),No(t,e,{leading:i,maxWait:e,trailing:s})},Lr.thru=uo,Lr.toArray=ua,Lr.toPairs=La,Lr.toPairsIn=Ua,Lr.toPath=function(t){return zo(t)?ke(t,Ms):sa(t)?[t]:Ii(Cs(ga(t)))},Lr.toPlainObject=pa,Lr.transform=function(t,e,r){var n=zo(t),i=n||Go(t)||oa(t);if(e=ns(e,4),null==r){var s=t&&t.constructor;r=i?n?new s:[]:Qo(t)&&Yo(s)?Ur(Ht(t)):{}}return(i?Ae:mn)(t,(function(t,n,i){return e(r,t,n,i)})),r},Lr.unary=function(t){return Io(t,1)},Lr.union=Qs,Lr.unionBy=Xs,Lr.unionWith=Zs,Lr.uniq=function(t){return t&&t.length?si(t):[]},Lr.uniqBy=function(t,e){return t&&t.length?si(t,ns(e,2)):[]},Lr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?si(t,r,e):[]},Lr.unset=function(t,e){return null==t||oi(t,e)},Lr.unzip=to,Lr.unzipWith=eo,Lr.update=function(t,e,r){return null==t?t:ai(t,e,di(r))},Lr.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ai(t,e,di(n),i)},Lr.values=ja,Lr.valuesIn=function(t){return null==t?[]:Ye(t,ka(t))},Lr.without=ro,Lr.words=Ya,Lr.wrap=function(t,e){return To(di(e),t)},Lr.xor=no,Lr.xorBy=io,Lr.xorWith=so,Lr.zip=oo,Lr.zipObject=function(t,e){return li(t||[],e||[],Vr)},Lr.zipObjectDeep=function(t,e){return li(t||[],e||[],Yn)},Lr.zipWith=ao,Lr.entries=La,Lr.entriesIn=Ua,Lr.extend=va,Lr.extendWith=ya,ic(Lr,Lr),Lr.add=pc,Lr.attempt=Ja,Lr.camelCase=Da,Lr.capitalize=Ba,Lr.ceil=gc,Lr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=da(n))==n?n:0),e!==r&&(e=(e=da(e))==e?e:0),rn(da(t),e,n)},Lr.clone=function(t){return nn(t,4)},Lr.cloneDeep=function(t){return nn(t,5)},Lr.cloneDeepWith=function(t,e){return nn(t,5,e="function"==typeof e?e:r)},Lr.cloneWith=function(t,e){return nn(t,4,e="function"==typeof e?e:r)},Lr.conformsTo=function(t,e){return null==e||sn(t,e,Na(e))},Lr.deburr=qa,Lr.defaultTo=function(t,e){return null==t||t!=t?e:t},Lr.divide=mc,Lr.endsWith=function(t,e,n){t=ga(t),e=ii(e);var i=t.length,s=n=n===r?i:rn(la(n),0,i);return(n-=e.length)>=0&&t.slice(n,s)==e},Lr.eq=jo,Lr.escape=function(t){return(t=ga(t))&&W.test(t)?t.replace(K,Ze):t},Lr.escapeRegExp=function(t){return(t=ga(t))&&tt.test(t)?t.replace(Z,"\\$&"):t},Lr.every=function(t,e,n){var i=zo(t)?Se:hn;return n&&ps(t,e,n)&&(e=r),i(t,ns(e,3))},Lr.find=fo,Lr.findIndex=Bs,Lr.findKey=function(t,e){return Le(t,ns(e,3),mn)},Lr.findLast=po,Lr.findLastIndex=qs,Lr.findLastKey=function(t,e){return Le(t,ns(e,3),vn)},Lr.floor=vc,Lr.forEach=go,Lr.forEachRight=mo,Lr.forIn=function(t,e){return null==t?t:pn(t,ns(e,3),ka)},Lr.forInRight=function(t,e){return null==t?t:gn(t,ns(e,3),ka)},Lr.forOwn=function(t,e){return t&&mn(t,ns(e,3))},Lr.forOwnRight=function(t,e){return t&&vn(t,ns(e,3))},Lr.get=Aa,Lr.gt=Do,Lr.gte=Bo,Lr.has=function(t,e){return null!=t&&hs(t,e,An)},Lr.hasIn=Ia,Lr.head=Fs,Lr.identity=tc,Lr.includes=function(t,e,r,n){t=Ho(t)?t:ja(t),r=r&&!n?la(r):0;var i=t.length;return r<0&&(r=dr(i+r,0)),ia(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&je(t,e,r)>-1},Lr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:la(r);return i<0&&(i=dr(n+i,0)),je(t,e,i)},Lr.inRange=function(t,e,n){return e=ha(e),n===r?(n=e,e=0):n=ha(n),function(t,e,r){return t>=pr(e,r)&&t<dr(e,r)}(t=da(t),e,n)},Lr.invoke=Oa,Lr.isArguments=qo,Lr.isArray=zo,Lr.isArrayBuffer=Fo,Lr.isArrayLike=Ho,Lr.isArrayLikeObject=Ko,Lr.isBoolean=function(t){return!0===t||!1===t||Xo(t)&&_n(t)==g},Lr.isBuffer=Go,Lr.isDate=Wo,Lr.isElement=function(t){return Xo(t)&&1===t.nodeType&&!ea(t)},Lr.isEmpty=function(t){if(null==t)return!0;if(Ho(t)&&(zo(t)||"string"==typeof t||"function"==typeof t.splice||Go(t)||oa(t)||qo(t)))return!t.length;var e=us(t);if(e==b||e==S)return!t.size;if(ys(t))return!Cn(t).length;for(var r in t)if(Ct.call(t,r))return!1;return!0},Lr.isEqual=function(t,e){return Nn(t,e)},Lr.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Nn(t,e,r,n):!!i},Lr.isError=$o,Lr.isFinite=function(t){return"number"==typeof t&&Fe(t)},Lr.isFunction=Yo,Lr.isInteger=Jo,Lr.isLength=Vo,Lr.isMap=Zo,Lr.isMatch=function(t,e){return t===e||kn(t,e,ss(e))},Lr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,kn(t,e,ss(e),n)},Lr.isNaN=function(t){return ta(t)&&t!=+t},Lr.isNative=function(t){if(vs(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rn(t)},Lr.isNil=function(t){return null==t},Lr.isNull=function(t){return null===t},Lr.isNumber=ta,Lr.isObject=Qo,Lr.isObjectLike=Xo,Lr.isPlainObject=ea,Lr.isRegExp=ra,Lr.isSafeInteger=function(t){return Jo(t)&&t>=-u&&t<=u},Lr.isSet=na,Lr.isString=ia,Lr.isSymbol=sa,Lr.isTypedArray=oa,Lr.isUndefined=function(t){return t===r},Lr.isWeakMap=function(t){return Xo(t)&&us(t)==N},Lr.isWeakSet=function(t){return Xo(t)&&"[object WeakSet]"==_n(t)},Lr.join=function(t,e){return null==t?"":lr.call(t,e)},Lr.kebabCase=za,Lr.last=Ws,Lr.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=la(n))<0?dr(i+s,0):pr(s,i-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,s):Ue(t,Be,s,!0)},Lr.lowerCase=Fa,Lr.lowerFirst=Ha,Lr.lt=aa,Lr.lte=ca,Lr.max=function(t){return t&&t.length?ln(t,tc,En):r},Lr.maxBy=function(t,e){return t&&t.length?ln(t,ns(e,2),En):r},Lr.mean=function(t){return qe(t,tc)},Lr.meanBy=function(t,e){return qe(t,ns(e,2))},Lr.min=function(t){return t&&t.length?ln(t,tc,Mn):r},Lr.minBy=function(t,e){return t&&t.length?ln(t,ns(e,2),Mn):r},Lr.stubArray=fc,Lr.stubFalse=dc,Lr.stubObject=function(){return{}},Lr.stubString=function(){return""},Lr.stubTrue=function(){return!0},Lr.multiply=yc,Lr.nth=function(t,e){return t&&t.length?Dn(t,la(e)):r},Lr.noConflict=function(){return ue._===this&&(ue._=jt),this},Lr.noop=sc,Lr.now=Ao,Lr.pad=function(t,e,r){t=ga(t);var n=(e=la(e))?or(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Bi(de(i),r)+t+Bi(le(i),r)},Lr.padEnd=function(t,e,r){t=ga(t);var n=(e=la(e))?or(t):0;return e&&n<e?t+Bi(e-n,r):t},Lr.padStart=function(t,e,r){t=ga(t);var n=(e=la(e))?or(t):0;return e&&n<e?Bi(e-n,r)+t:t},Lr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),mr(ga(t).replace(et,""),e||0)},Lr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ps(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=ha(t),e===r?(e=t,t=0):e=ha(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var s=vr();return pr(t+s*(e-t+se("1e-"+((s+"").length-1))),e)}return Hn(t,e)},Lr.reduce=function(t,e,r){var n=zo(t)?xe:He,i=arguments.length<3;return n(t,ns(e,4),r,i,cn)},Lr.reduceRight=function(t,e,r){var n=zo(t)?Ce:He,i=arguments.length<3;return n(t,ns(e,4),r,i,un)},Lr.repeat=function(t,e,n){return e=(n?ps(t,e,n):e===r)?1:la(e),Kn(ga(t),e)},Lr.replace=function(){var t=arguments,e=ga(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Lr.result=function(t,e,n){var i=-1,s=(e=pi(e,t)).length;for(s||(s=1,t=r);++i<s;){var o=null==t?r:t[Ms(e[i])];o===r&&(i=s,o=n),t=Yo(o)?o.call(t):o}return t},Lr.round=wc,Lr.runInContext=t,Lr.sample=function(t){return(zo(t)?Wr:Wn)(t)},Lr.size=function(t){if(null==t)return 0;if(Ho(t))return ia(t)?or(t):t.length;var e=us(t);return e==b||e==S?t.size:Cn(t).length},Lr.snakeCase=Ka,Lr.some=function(t,e,n){var i=zo(t)?Me:Zn;return n&&ps(t,e,n)&&(e=r),i(t,ns(e,3))},Lr.sortedIndex=function(t,e){return ti(t,e)},Lr.sortedIndexBy=function(t,e,r){return ei(t,e,ns(r,2))},Lr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=ti(t,e);if(n<r&&jo(t[n],e))return n}return-1},Lr.sortedLastIndex=function(t,e){return ti(t,e,!0)},Lr.sortedLastIndexBy=function(t,e,r){return ei(t,e,ns(r,2),!0)},Lr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=ti(t,e,!0)-1;if(jo(t[r],e))return r}return-1},Lr.startCase=Ga,Lr.startsWith=function(t,e,r){return t=ga(t),r=null==r?0:rn(la(r),0,t.length),e=ii(e),t.slice(r,r+e.length)==e},Lr.subtract=bc,Lr.sum=function(t){return t&&t.length?Ke(t,tc):0},Lr.sumBy=function(t,e){return t&&t.length?Ke(t,ns(e,2)):0},Lr.template=function(t,e,n){var i=Lr.templateSettings;n&&ps(t,e,n)&&(e=r),t=ga(t),e=ya({},e,i,$i);var s,o,a=ya({},e.imports,i.imports,$i),c=Na(a),u=Ye(a,c),h=0,l=e.interpolate||vt,f="__p += '",d=It((e.escape||vt).source+"|"+l.source+"|"+(l===J?ut:vt).source+"|"+(e.evaluate||vt).source+"|$","g"),p="//# sourceURL="+(Ct.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ee+"]")+"\n";t.replace(d,(function(e,r,n,i,a,c){return n||(n=i),f+=t.slice(h,c).replace(yt,tr),r&&(s=!0,f+="' +\n__e("+r+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=c+e.length,e})),f+="';\n";var g=Ct.call(e,"variable")&&e.variable;if(g){if(at.test(g))throw new bt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(q,""):f).replace(z,"$1").replace(F,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Ja((function(){return _t(c,p+"return "+f).apply(r,u)}));if(m.source=f,$o(m))throw m;return m},Lr.times=function(t,e){if((t=la(t))<1||t>u)return[];var r=l,n=pr(t,l);e=ns(e),t-=l;for(var i=Ge(n,e);++r<t;)e(r);return i},Lr.toFinite=ha,Lr.toInteger=la,Lr.toLength=fa,Lr.toLower=function(t){return ga(t).toLowerCase()},Lr.toNumber=da,Lr.toSafeInteger=function(t){return t?rn(la(t),-u,u):0===t?t:0},Lr.toString=ga,Lr.toUpper=function(t){return ga(t).toUpperCase()},Lr.trim=function(t,e,n){if((t=ga(t))&&(n||e===r))return We(t);if(!t||!(e=ii(e)))return t;var i=ar(t),s=ar(e);return mi(i,Ve(i,s),Qe(i,s)+1).join("")},Lr.trimEnd=function(t,e,n){if((t=ga(t))&&(n||e===r))return t.slice(0,cr(t)+1);if(!t||!(e=ii(e)))return t;var i=ar(t);return mi(i,0,Qe(i,ar(e))+1).join("")},Lr.trimStart=function(t,e,n){if((t=ga(t))&&(n||e===r))return t.replace(et,"");if(!t||!(e=ii(e)))return t;var i=ar(t);return mi(i,Ve(i,ar(e))).join("")},Lr.truncate=function(t,e){var n=30,i="...";if(Qo(e)){var s="separator"in e?e.separator:s;n="length"in e?la(e.length):n,i="omission"in e?ii(e.omission):i}var o=(t=ga(t)).length;if(er(t)){var a=ar(t);o=a.length}if(n>=o)return t;var c=n-or(i);if(c<1)return i;var u=a?mi(a,0,c).join(""):t.slice(0,c);if(s===r)return u+i;if(a&&(c+=u.length-c),ra(s)){if(t.slice(c).search(s)){var h,l=u;for(s.global||(s=It(s.source,ga(ht.exec(s))+"g")),s.lastIndex=0;h=s.exec(l);)var f=h.index;u=u.slice(0,f===r?c:f)}}else if(t.indexOf(ii(s),c)!=c){var d=u.lastIndexOf(s);d>-1&&(u=u.slice(0,d))}return u+i},Lr.unescape=function(t){return(t=ga(t))&&G.test(t)?t.replace(H,ur):t},Lr.uniqueId=function(t){var e=++Mt;return ga(t)+e},Lr.upperCase=Wa,Lr.upperFirst=$a,Lr.each=go,Lr.eachRight=mo,Lr.first=Fs,ic(Lr,function(){var t={};return mn(Lr,(function(e,r){Ct.call(Lr.prototype,r)||(t[r]=e)})),t}(),{chain:!1}),Lr.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Lr[t].placeholder=Lr})),Ae(["drop","take"],(function(t,e){Br.prototype[t]=function(n){n=n===r?1:dr(la(n),0);var i=this.__filtered__&&!e?new Br(this):this.clone();return i.__filtered__?i.__takeCount__=pr(n,i.__takeCount__):i.__views__.push({size:pr(n,l),type:t+(i.__dir__<0?"Right":"")}),i},Br.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ae(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Br.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ns(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),Ae(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Br.prototype[t]=function(){return this[r](1).value()[0]}})),Ae(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Br.prototype[t]=function(){return this.__filtered__?new Br(this):this[r](1)}})),Br.prototype.compact=function(){return this.filter(tc)},Br.prototype.find=function(t){return this.filter(t).head()},Br.prototype.findLast=function(t){return this.reverse().find(t)},Br.prototype.invokeMap=Gn((function(t,e){return"function"==typeof t?new Br(this):this.map((function(r){return Pn(r,t,e)}))})),Br.prototype.reject=function(t){return this.filter(Co(ns(t)))},Br.prototype.slice=function(t,e){t=la(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Br(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=la(e))<0?n.dropRight(-e):n.take(e-t)),n)},Br.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Br.prototype.toArray=function(){return this.take(l)},mn(Br.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),s=Lr[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);s&&(Lr.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,c=e instanceof Br,u=a[0],h=c||zo(e),l=function(t){var e=s.apply(Lr,Re([t],a));return i&&f?e[0]:e};h&&n&&"function"==typeof u&&1!=u.length&&(c=h=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=c&&!d;if(!o&&h){e=g?e:new Br(this);var m=t.apply(e,a);return m.__actions__.push({func:uo,args:[l],thisArg:r}),new Dr(m,f)}return p&&g?t.apply(this,a):(m=this.thru(l),p?i?m.value()[0]:m.value():m)})})),Ae(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Lr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(zo(i)?i:[],t)}return this[r]((function(r){return e.apply(zo(r)?r:[],t)}))}})),mn(Br.prototype,(function(t,e){var r=Lr[e];if(r){var n=r.name+"";Ct.call(Pr,n)||(Pr[n]=[]),Pr[n].push({name:e,func:r})}})),Pr[Li(r,2).name]=[{name:"wrapper",func:r}],Br.prototype.clone=function(){var t=new Br(this.__wrapped__);return t.__actions__=Ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ii(this.__views__),t},Br.prototype.reverse=function(){if(this.__filtered__){var t=new Br(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Br.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=zo(t),n=e<0,i=r?t.length:0,s=function(t,e,r){for(var n=-1,i=r.length;++n<i;){var s=r[n],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=pr(e,t+o);break;case"takeRight":t=dr(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,c=a-o,u=n?a:o-1,h=this.__iteratees__,l=h.length,f=0,d=pr(c,this.__takeCount__);if(!r||!n&&i==c&&d==c)return ui(t,this.__actions__);var p=[];t:for(;c--&&f<d;){for(var g=-1,m=t[u+=e];++g<l;){var v=h[g],y=v.iteratee,w=v.type,b=y(m);if(2==w)m=b;else if(!b){if(1==w)continue t;break t}}p[f++]=m}return p},Lr.prototype.at=ho,Lr.prototype.chain=function(){return co(this)},Lr.prototype.commit=function(){return new Dr(this.value(),this.__chain__)},Lr.prototype.next=function(){this.__values__===r&&(this.__values__=ua(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Lr.prototype.plant=function(t){for(var e,n=this;n instanceof jr;){var i=Ls(n);i.__index__=0,i.__values__=r,e?s.__wrapped__=i:e=i;var s=i;n=n.__wrapped__}return s.__wrapped__=t,e},Lr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Br){var e=t;return this.__actions__.length&&(e=new Br(this)),(e=e.reverse()).__actions__.push({func:uo,args:[Vs],thisArg:r}),new Dr(e,this.__chain__)}return this.thru(Vs)},Lr.prototype.toJSON=Lr.prototype.valueOf=Lr.prototype.value=function(){return ui(this.__wrapped__,this.__actions__)},Lr.prototype.first=Lr.prototype.head,Vt&&(Lr.prototype[Vt]=function(){return this}),Lr}();le?((le.exports=hr)._=hr,he._=hr):ue._=hr}).call(Eo)}(Ao,Ao.exports);var Io=Object.defineProperty,So=Object.defineProperties,Po=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Ro=(t,e,r)=>e in t?Io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xo=(t,e)=>{for(var r in e||(e={}))No.call(e,r)&&Ro(t,r,e[r]);if(Oo)for(var r of Oo(e))ko.call(e,r)&&Ro(t,r,e[r]);return t},Co=(t,e)=>So(t,Po(e));function Mo(t,e,r){let n;const i=To(t);return e.rpcMap&&(n=e.rpcMap[i]),n||(n=`https://rpc.walletconnect.com/v1?chainId=eip155:${i}&projectId=${r}`),n}function To(t){return t.includes("eip155")?Number(t.split(":")[1]):Number(t)}function Lo(t){return t.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))}function Uo(t){var e,r,n,i;const s={};if(!dr(t))return s;for(const[o,a]of Object.entries(t)){const t=or(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],h=a.rpcMap||{},l=ar(o);s[l]=Co(xo(xo({},s[l]),a),{chains:Je(t,null==(e=s[l])?void 0:e.chains),methods:Je(c,null==(r=s[l])?void 0:r.methods),events:Je(u,null==(n=s[l])?void 0:n.events),rpcMap:xo(xo({},h),null==(i=s[l])?void 0:i.rpcMap)})}return s}function jo(t){return t.includes(":")?t.split(":")[2]:t}function Do(t){const e={};for(const[r,n]of Object.entries(t)){const t=n.methods||[],i=n.events||[],s=n.accounts||[],o=or(r)?[r]:n.chains?n.chains:Lo(n.accounts);e[r]={chains:o,methods:t,events:i,accounts:s}}return e}const Bo={},qo=t=>Bo[t],zo=(t,e)=>{Bo[t]=e};class Fo{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const r=e||Mo(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t&&t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||Mo(t,this.namespace);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}class Ho{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){const r=To(t);if(!this.httpProviders[r]){const t=e||Mo(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!t)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,t)}this.chainId=r,this.events.emit(_o,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,e){const r=e||Mo(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.HttpConnection(r,qo("disableProviderPing")))}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;const n=To(e);t[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const t=this.chainId,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}async handleSwitchChain(t){var e,r;let n=t.request.params?null==(e=t.request.params[0])?void 0:e.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class Ko{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){const r=e||Mo(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(_o,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||Mo(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}class Go{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const r=e||Mo(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||Mo(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}class Wo{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const r=e||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{const r=this.getCardanoRPCUrl(e);t[e]=this.createHttpProvider(e,r)})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}getCardanoRPCUrl(t){const e=this.namespace.rpcMap;if(e)return e[t]}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||this.getCardanoRPCUrl(t);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}class $o{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){const r=e||Mo(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(_o,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||Mo(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}class Yo{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=qo("events"),this.client=qo("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){const r=e||Mo(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(_o,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((e=>{var r;t[e]=this.createHttpProvider(e,null==(r=this.namespace.rpcMap)?void 0:r[e])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const r=this.createHttpProvider(t,e);r&&(this.httpProviders[t]=r)}createHttpProvider(t,e){const r=e||Mo(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tn.JsonRpcProvider(new yo.default(r,qo("disableProviderPing")))}}var Jo=Object.defineProperty,Vo=Object.defineProperties,Qo=Object.getOwnPropertyDescriptors,Xo=Object.getOwnPropertySymbols,Zo=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,ea=(t,e,r)=>e in t?Jo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ra=(t,e)=>{for(var r in e||(e={}))Zo.call(e,r)&&ea(t,r,e[r]);if(Xo)for(var r of Xo(e))ta.call(e,r)&&ea(t,r,e[r]);return t},na=(t,e)=>Vo(t,Qo(e));class ia{constructor(t){this.events=new(y()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Nr.pino)((0,Nr.getDefaultLoggerOptions)({level:t?.logger||wo})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const e=new ia(t);return await e.initialize(),e}async request(t,e){const[r,n]=this.validateChain(e);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(r).request({request:ra({},t),chainId:`${r}:${n}`,topic:this.session.topic})}sendAsync(t,e,r){this.request(t,r).then((t=>e(null,t))).catch((t=>e(t,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:lr("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let e=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(e>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:n}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await n().then((t=>{this.session=t,this.namespaces||(this.namespaces=Do(t.namespaces),this.persist("namespaces",this.namespaces))})).catch((t=>{if(t.message!==Vs)throw t;e++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,e){try{if(!this.session)return;const[r,n]=this.validateChain(t);this.getProvider(r).setDefaultChain(n,e)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const e=this.client.pairing.getAll();if(fr(e)){for(const r of e)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await vo.init({logger:this.providerOpts.logger||wo,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map((t=>ar(t))))];zo("client",this.client),zo("events",this.events),zo("disableProviderPing",this.disableProviderPing),t.forEach((t=>{if(!this.session)return;const e=function(t,e){const r=Object.keys(e.namespaces).filter((e=>e.includes(t)));if(!r.length)return[];const n=[];return r.forEach((t=>{const r=e.namespaces[t].accounts;n.push(...r)})),n}(t,this.session),r=Lo(e),n=function(t={},e={}){const r=Uo(t),n=Uo(e);return Ao.exports.merge(r,n)}(this.namespaces,this.optionalNamespaces),i=na(ra({},n[t]),{accounts:e,chains:r});switch(t){case"eip155":this.rpcProviders[t]=new Ho({namespace:i});break;case"solana":this.rpcProviders[t]=new Ko({namespace:i});break;case"cosmos":this.rpcProviders[t]=new Go({namespace:i});break;case"polkadot":this.rpcProviders[t]=new Fo({namespace:i});break;case"cip34":this.rpcProviders[t]=new Wo({namespace:i});break;case"elrond":this.rpcProviders[t]=new $o({namespace:i});break;case"multiversx":this.rpcProviders[t]=new Yo({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(t=>{this.events.emit("session_ping",t)})),this.client.on("session_event",(t=>{const{params:e}=t,{event:r}=e;if("accountsChanged"===r.name){const t=r.data;t&&fr(t)&&this.events.emit("accountsChanged",t.map(jo))}else"chainChanged"===r.name?this.onChainChanged(e.chainId):this.events.emit(r.name,r.data);this.events.emit("session_event",t)})),this.client.on("session_update",(({topic:t,params:e})=>{var r;const{namespaces:n}=e,i=null==(r=this.client)?void 0:r.session.get(t);this.session=na(ra({},i),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:e})})),this.client.on("session_delete",(async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",na(ra({},lr("USER_DISCONNECTED")),{data:t.topic}))})),this.on(_o,(t=>{this.onChainChanged(t,!0)}))}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((t=>{var e;this.getProvider(t).updateNamespace(null==(e=this.session)?void 0:e.namespaces[t])}))}setNamespaces(t){const{namespaces:e,optionalNamespaces:r,sessionProperties:n}=t;e&&Object.keys(e).length&&(this.namespaces=e),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.persist("namespaces",e),this.persist("optionalNamespaces",r)}validateChain(t){const[e,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[e,r];if(e&&!Object.keys(this.namespaces||{}).map((t=>ar(t))).includes(e))throw new Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);if(e&&r)return[e,r];const n=ar(Object.keys(this.namespaces)[0]);return[n,this.rpcProviders[n].getDefaultChain()]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,e=!1){var r;if(!this.namespaces)return;const[n,i]=this.validateChain(t);e||this.getProvider(n).setDefaultChain(i),(null!=(r=this.namespaces[n])?r:this.namespaces[`${n}:${i}`]).defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,e){this.client.core.storage.setItem(`${bo}/${t}`,e)}async getFromStore(t){return await this.client.core.storage.getItem(`${bo}/${t}`)}}const sa=ia,oa=["eth_sendTransaction","personal_sign"],aa=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ca=["chainChanged","accountsChanged"],ua=["message","disconnect","connect"];var ha=Object.defineProperty,la=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,ma=(t,e,r)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,va=(t,e)=>{for(var r in e||(e={}))pa.call(e,r)&&ma(t,r,e[r]);if(da)for(var r of da(e))ga.call(e,r)&&ma(t,r,e[r]);return t},ya=(t,e)=>la(t,fa(e));function wa(t){return Number(t[0].split(":")[1])}function ba(t){return`0x${t.toString(16)}`}class _a{constructor(){this.events=new v.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,e)=>(this.events.on(t,e),this),this.once=(t,e)=>(this.events.once(t,e),this),this.removeListener=(t,e)=>(this.events.removeListener(t,e),this),this.off=(t,e)=>(this.events.off(t,e),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const e=new _a;return await e.initialize(t),e}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,e){this.signer.sendAsync(t,e,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:e,optional:r}=function(t){const{chains:e,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!fr(e))throw new Error("Invalid chains");const c={chains:e,methods:n||oa,events:s||ca,rpcMap:va({},e.length?{[wa(e)]:a[wa(e)]}:{})},u=s?.filter((t=>!ca.includes(t))),h=n?.filter((t=>!oa.includes(t)));if(!(r||o||i||null!=u&&u.length||null!=h&&h.length))return{required:e.length?c:void 0};const l={chains:[...new Set(u?.length&&h?.length||!r?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(null!=i&&i.length?i:aa))],events:[...new Set(c.events.concat(o||ua))],rpcMap:a};return{required:e.length?c:void 0,optional:r.length?l:void 0}}(this.rpc);try{const n=await new Promise((async(n,i)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(ya(va({namespaces:va({},e&&{[this.namespace]:e})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:t?.pairingTopic})).then((t=>{n(t)})).catch((t=>{i(new Error(t.message))}))}));if(!n)return;this.setChainIds(this.rpc.chains);const i=function(t,e=[]){const r=[];return Object.keys(t).forEach((n=>{if(e.length&&!e.includes(n))return;const i=t[n];r.push(...i.accounts)})),r}(n.namespaces,[this.namespace]);this.setAccounts(i),this.events.emit("connect",{chainId:ba(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:e}=t,{event:r}=e;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const e=parseInt(t);this.chainId=e,this.events.emit("chainChanged",ba(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",ya(va({},lr("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var e,r;this.rpc.showQrModal&&(null==(e=this.modal)||e.closeModal(),null==(r=this.modal)||r.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const e=t.filter((t=>this.isCompatibleChainId(t))).map((t=>this.parseChainId(t)));e.length&&(this.chainId=e[0],this.events.emit("chainChanged",ba(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const e=this.parseChainId(t);this.chainId=e,this.switchEthereumChain(e)}}parseAccountId(t){const[e,r,n]=t.split(":");return{chainId:`${e}:${r}`,address:n}}setAccounts(t){this.accounts=t.filter((t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId)).map((t=>this.parseAccountId(t).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var e,r;const n=null!=(e=t?.chains)?e:[],i=null!=(r=t?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=n.length?t?.methods||oa:[],a=n.length?t?.events||ca:[],c=t?.optionalMethods||[],u=t?.optionalEvents||[],h=t?.rpcMap||this.buildRpcMap(s,t.projectId),l=t?.qrModalOptions||void 0;return{chains:n?.map((t=>this.formatChainId(t))),optionalChains:i.map((t=>this.formatChainId(t))),methods:o,events:a,optionalMethods:c,optionalEvents:u,rpcMap:h,showQrModal:!(null==t||!t.showQrModal),qrModalOptions:l,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,e){const r={};return t.forEach((t=>{r[t]=this.getRpcUrl(t,e)})),r}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?wa(this.rpc.chains):wa(this.rpc.optionalChains),this.signer=await sa.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:e}=await r.e(54).then(r.bind(r,9343));t=e}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(va({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:e,optionalChains:r,rpcMap:n}=t;e&&fr(e)&&(this.rpc.chains=e.map((t=>this.formatChainId(t))),e.forEach((t=>{this.rpc.rpcMap[t]=n?.[t]||this.getRpcUrl(t)}))),r&&fr(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map((t=>this.formatChainId(t))),r.forEach((t=>{this.rpc.rpcMap[t]=n?.[t]||this.getRpcUrl(t)})))}getRpcUrl(t,e){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${e||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),e=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:e?.accounts),this.setAccounts(e?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map((t=>this.parseAccount(t)))}}const Ea=_a},8200:(t,e,r)=>{"use strict";r.d(e,{q:()=>n});class n{}},997:(t,e,r)=>{"use strict";r.r(e),r.d(e,{IEvents:()=>n.q});var n=r(8200)},2568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HEARTBEAT_EVENTS=e.HEARTBEAT_INTERVAL=void 0;const n=r(6736);e.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,e.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},3401:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(655).__exportStar(r(2568),e)},8969:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeat=void 0;const n=r(655),i=r(7187),s=r(6736),o=r(1614),a=r(3401);class c extends o.IHeartBeat{constructor(t){super(t),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null==t?void 0:t.interval)||a.HEARTBEAT_INTERVAL}static init(t){return n.__awaiter(this,void 0,void 0,(function*(){const e=new c(t);return yield e.init(),e}))}init(){return n.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}initialize(){return n.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),s.toMiliseconds(this.interval))}))}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}e.HeartBeat=c},159:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(8969),e),n.__exportStar(r(1614),e),n.__exportStar(r(3401),e)},4174:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IHeartBeat=void 0;const n=r(997);class i extends n.IEvents{constructor(t){super()}}e.IHeartBeat=i},1614:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(655).__exportStar(r(4174),e)},4497:(t,e,r)=>{"use strict";r.r(e),r.d(e,{HttpConnection:()=>u,default:()=>h});var n=r(7187),i=r(4098),s=r.n(i),o=r(5094),a=r(6186);const c={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class u{constructor(t,e=!1){if(this.url=t,this.disableProviderPing=e,this.events=new n.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,e){this.isAvailable||await this.register();try{const e=(0,o.u)(t),r=await s()(this.url,Object.assign(Object.assign({},c),{body:e})),n=await r.json();this.onPayload({data:n})}catch(e){this.onError(t.id,e)}}async register(t=this.url){if(!(0,a.isHttpUrl)(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((t,e)=>{this.events.once("register_error",(t=>{this.resetMaxListeners(),e(t)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return e(new Error("HTTP connection is missing or invalid"));t()}))}))}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const e=(0,o.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await s()(t,Object.assign(Object.assign({},c),{body:e}))}this.onOpen()}catch(t){const e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(void 0===t.data)return;const e="string"==typeof t.data?(0,o.D)(t.data):t.data;this.events.emit("payload",e)}onError(t,e){const r=this.parseError(e),n=r.message||r.toString(),i=(0,a.formatJsonRpcError)(t,n);this.events.emit("payload",i)}parseError(t,e=this.url){return(0,a.parseConnectionError)(t,e,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const h=u},9303:(t,e,r)=>{"use strict";r.r(e),r.d(e,{JsonRpcProvider:()=>s,default:()=>o});var n=r(7187),i=r(6186);class s extends i.IJsonRpcProvider{constructor(t){super(t),this.events=new n.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async request(t,e){return this.requestStrict((0,i.formatJsonRpcRequest)(t.method,t.params||[],t.id||(0,i.getBigIntRpcId)().toString()),e)}async requestStrict(t,e){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(t){n(t)}this.events.on(`${t.id}`,(t=>{(0,i.isJsonRpcError)(t)?n(t.error):r(t.result)}));try{await this.connection.send(t,e)}catch(t){n(t)}}))}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),(0,i.isJsonRpcResponse)(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&3e3===t.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof t&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(t=>this.onPayload(t))),this.connection.on("close",(t=>this.onClose(t))),this.connection.on("error",(t=>this.events.emit("error",t))),this.connection.on("register_error",(t=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const o=s},9806:(t,e,r)=>{"use strict";r.d(e,{CA:()=>i,JV:()=>a,O4:()=>n,dQ:()=>s,xK:()=>o});const n="INTERNAL_ERROR",i="SERVER_ERROR",s=[-32700,-32600,-32601,-32602,-32603],o={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[n]:{code:-32603,message:"Internal error"},[i]:{code:-32e3,message:"Server error"}},a=i},9698:(t,e,r)=>{"use strict";var n=r(1468);r.o(n,"IJsonRpcProvider")&&r.d(e,{IJsonRpcProvider:function(){return n.IJsonRpcProvider}}),r.o(n,"formatJsonRpcError")&&r.d(e,{formatJsonRpcError:function(){return n.formatJsonRpcError}}),r.o(n,"formatJsonRpcRequest")&&r.d(e,{formatJsonRpcRequest:function(){return n.formatJsonRpcRequest}}),r.o(n,"formatJsonRpcResult")&&r.d(e,{formatJsonRpcResult:function(){return n.formatJsonRpcResult}}),r.o(n,"getBigIntRpcId")&&r.d(e,{getBigIntRpcId:function(){return n.getBigIntRpcId}}),r.o(n,"isHttpUrl")&&r.d(e,{isHttpUrl:function(){return n.isHttpUrl}}),r.o(n,"isJsonRpcError")&&r.d(e,{isJsonRpcError:function(){return n.isJsonRpcError}}),r.o(n,"isJsonRpcRequest")&&r.d(e,{isJsonRpcRequest:function(){return n.isJsonRpcRequest}}),r.o(n,"isJsonRpcResponse")&&r.d(e,{isJsonRpcResponse:function(){return n.isJsonRpcResponse}}),r.o(n,"isJsonRpcResult")&&r.d(e,{isJsonRpcResult:function(){return n.isJsonRpcResult}}),r.o(n,"isLocalhostUrl")&&r.d(e,{isLocalhostUrl:function(){return n.isLocalhostUrl}}),r.o(n,"isReactNative")&&r.d(e,{isReactNative:function(){return n.isReactNative}}),r.o(n,"isWsUrl")&&r.d(e,{isWsUrl:function(){return n.isWsUrl}})},110:(t,e,r)=>{"use strict";r.d(e,{CX:()=>a,L2:()=>o,by:()=>s,i5:()=>i});var n=r(9806);function i(t){return n.dQ.includes(t)}function s(t){return Object.keys(n.xK).includes(t)?n.xK[t]:n.xK[n.JV]}function o(t){return Object.values(n.xK).find((e=>e.code===t))||n.xK[n.JV]}function a(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}},1937:(t,e,r)=>{"use strict";r.d(e,{CS:()=>o,RI:()=>u,sT:()=>a,tm:()=>c});var n=r(110),i=r(9806);function s(t=3){return Date.now()*Math.pow(10,t)+Math.floor(Math.random()*Math.pow(10,t))}function o(t=6){return BigInt(s(t))}function a(t,e,r){return{id:r||s(),jsonrpc:"2.0",method:t,params:e}}function c(t,e){return{id:t,jsonrpc:"2.0",result:e}}function u(t,e,r){return{id:t,jsonrpc:"2.0",error:h(e,r)}}function h(t,e){return void 0===t?(0,n.by)(i.O4):("string"==typeof t&&(t=Object.assign(Object.assign({},(0,n.by)(i.CA)),{message:t})),void 0!==e&&(t.data=e),(0,n.i5)(t.code)&&(t=(0,n.L2)(t.code)),t)}},6186:(t,e,r)=>{"use strict";r.d(e,{IJsonRpcProvider:()=>o.x0,formatJsonRpcError:()=>s.RI,formatJsonRpcRequest:()=>s.sT,formatJsonRpcResult:()=>s.tm,getBigIntRpcId:()=>s.CS,isHttpUrl:()=>a.jK,isJsonRpcError:()=>c.jg,isJsonRpcRequest:()=>c.DW,isJsonRpcResponse:()=>c.u,isJsonRpcResult:()=>c.k4,isLocalhostUrl:()=>a.JF,isWsUrl:()=>a.UZ,parseConnectionError:()=>n.CX}),r(9806);var n=r(110),i=r(9698);r.o(i,"IJsonRpcProvider")&&r.d(e,{IJsonRpcProvider:function(){return i.IJsonRpcProvider}}),r.o(i,"formatJsonRpcError")&&r.d(e,{formatJsonRpcError:function(){return i.formatJsonRpcError}}),r.o(i,"formatJsonRpcRequest")&&r.d(e,{formatJsonRpcRequest:function(){return i.formatJsonRpcRequest}}),r.o(i,"formatJsonRpcResult")&&r.d(e,{formatJsonRpcResult:function(){return i.formatJsonRpcResult}}),r.o(i,"getBigIntRpcId")&&r.d(e,{getBigIntRpcId:function(){return i.getBigIntRpcId}}),r.o(i,"isHttpUrl")&&r.d(e,{isHttpUrl:function(){return i.isHttpUrl}}),r.o(i,"isJsonRpcError")&&r.d(e,{isJsonRpcError:function(){return i.isJsonRpcError}}),r.o(i,"isJsonRpcRequest")&&r.d(e,{isJsonRpcRequest:function(){return i.isJsonRpcRequest}}),r.o(i,"isJsonRpcResponse")&&r.d(e,{isJsonRpcResponse:function(){return i.isJsonRpcResponse}}),r.o(i,"isJsonRpcResult")&&r.d(e,{isJsonRpcResult:function(){return i.isJsonRpcResult}}),r.o(i,"isLocalhostUrl")&&r.d(e,{isLocalhostUrl:function(){return i.isLocalhostUrl}}),r.o(i,"isReactNative")&&r.d(e,{isReactNative:function(){return i.isReactNative}}),r.o(i,"isWsUrl")&&r.d(e,{isWsUrl:function(){return i.isWsUrl}});var s=r(1937),o=r(6757),a=r(6119),c=r(4733)},6757:(t,e,r)=>{"use strict";r.d(e,{x0:()=>s});class n{}class i extends n{constructor(){super()}}class s extends i{constructor(t){super()}}},6119:(t,e,r)=>{"use strict";r.d(e,{JF:()=>c,UZ:()=>a,jK:()=>o});const n="^https?:",i="^wss?:";function s(t,e){const r=function(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(t);return void 0!==r&&new RegExp(e).test(r)}function o(t){return s(t,n)}function a(t){return s(t,i)}function c(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}},4733:(t,e,r)=>{"use strict";function n(t){return"object"==typeof t&&"id"in t&&"jsonrpc"in t&&"2.0"===t.jsonrpc}function i(t){return n(t)&&"method"in t}function s(t){return n(t)&&(o(t)||a(t))}function o(t){return"result"in t}function a(t){return"error"in t}r.d(e,{DW:()=>i,jg:()=>a,k4:()=>o,u:()=>s})},5150:(t,e,r)=>{"use strict";const n=r(655),i=r(3954),s=n.__importDefault(r(653)),o=r(9728);e.ZP=class{constructor(){this.localStorage=s.default}getKeys(){return n.__awaiter(this,void 0,void 0,(function*(){return Object.keys(this.localStorage)}))}getEntries(){return n.__awaiter(this,void 0,void 0,(function*(){return Object.entries(this.localStorage).map(o.parseEntry)}))}getItem(t){return n.__awaiter(this,void 0,void 0,(function*(){const e=this.localStorage.getItem(t);if(null!==e)return i.safeJsonParse(e)}))}setItem(t,e){return n.__awaiter(this,void 0,void 0,(function*(){this.localStorage.setItem(t,i.safeJsonStringify(e))}))}removeItem(t){return n.__awaiter(this,void 0,void 0,(function*(){this.localStorage.removeItem(t)}))}}},653:(t,e,r)=>{"use strict";!function(){let e;function n(){}e=n,e.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},e.prototype.setItem=function(t,e){this[t]=String(e)},e.prototype.removeItem=function(t){delete this[t]},e.prototype.clear=function(){const t=this;Object.keys(t).forEach((function(e){t[e]=void 0,delete t[e]}))},e.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),void 0!==r.g&&r.g.localStorage?t.exports=r.g.localStorage:"undefined"!=typeof window&&window.localStorage?t.exports=window.localStorage:t.exports=new n}()},9728:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(9076),e),n.__exportStar(r(496),e)},9076:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IKeyValueStorage=void 0,e.IKeyValueStorage=class{}},496:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEntry=void 0;const n=r(3954);e.parseEntry=function(t){var e;return[t[0],n.safeJsonParse(null!==(e=t[1])&&void 0!==e?e:"")]}},5727:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PINO_CUSTOM_CONTEXT_KEY=e.PINO_LOGGER_DEFAULTS=void 0,e.PINO_LOGGER_DEFAULTS={level:"info"},e.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pino=void 0;const n=r(655),i=n.__importDefault(r(6559));Object.defineProperty(e,"pino",{enumerable:!0,get:function(){return i.default}}),n.__exportStar(r(5727),e),n.__exportStar(r(8048),e)},8048:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateChildLogger=e.formatChildLoggerContext=e.getLoggerContext=e.setBrowserLoggerContext=e.getBrowserLoggerContext=e.getDefaultLoggerOptions=void 0;const n=r(5727);function i(t,e=n.PINO_CUSTOM_CONTEXT_KEY){return t[e]||""}function s(t,e,r=n.PINO_CUSTOM_CONTEXT_KEY){return t[r]=e,t}function o(t,e=n.PINO_CUSTOM_CONTEXT_KEY){let r="";return r=void 0===t.bindings?i(t,e):t.bindings().context||"",r}function a(t,e,r=n.PINO_CUSTOM_CONTEXT_KEY){const i=o(t,r);return i.trim()?`${i}/${e}`:e}e.getDefaultLoggerOptions=function(t){return Object.assign(Object.assign({},t),{level:(null==t?void 0:t.level)||n.PINO_LOGGER_DEFAULTS.level})},e.getBrowserLoggerContext=i,e.setBrowserLoggerContext=s,e.getLoggerContext=o,e.formatChildLoggerContext=a,e.generateChildLogger=function(t,e,r=n.PINO_CUSTOM_CONTEXT_KEY){const i=a(t,e,r);return s(t.child({context:i}),i,r)}},1882:()=>{},3014:()=>{},5094:(t,e,r)=>{"use strict";r.d(e,{D:()=>s,u:()=>o});const n=t=>JSON.stringify(t,((t,e)=>"bigint"==typeof e?e.toString()+"n":e)),i=t=>{const e=t.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(e,((t,e)=>"string"==typeof e&&e.match(/^\d+n$/)?BigInt(e.substring(0,e.length-1)):e))};function s(t){if("string"!=typeof t)throw new Error("Cannot safe json parse value of type "+typeof t);try{return i(t)}catch(e){return t}}function o(t){return"string"==typeof t?t:n(t)||""}},6900:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(6869),e),n.__exportStar(r(8033),e)},6869:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_THOUSAND=e.ONE_HUNDRED=void 0,e.ONE_HUNDRED=100,e.ONE_THOUSAND=1e3},8033:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=5*e.ONE_MINUTE,e.TEN_MINUTES=10*e.ONE_MINUTE,e.THIRTY_MINUTES=30*e.ONE_MINUTE,e.SIXTY_MINUTES=60*e.ONE_MINUTE,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=3*e.ONE_HOUR,e.SIX_HOURS=6*e.ONE_HOUR,e.TWELVE_HOURS=12*e.ONE_HOUR,e.TWENTY_FOUR_HOURS=24*e.ONE_HOUR,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=3*e.ONE_DAY,e.FIVE_DAYS=5*e.ONE_DAY,e.SEVEN_DAYS=7*e.ONE_DAY,e.THIRTY_DAYS=30*e.ONE_DAY,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=2*e.ONE_WEEK,e.THREE_WEEKS=3*e.ONE_WEEK,e.FOUR_WEEKS=4*e.ONE_WEEK,e.ONE_YEAR=365*e.ONE_DAY},6736:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(4273),e),n.__exportStar(r(7001),e),n.__exportStar(r(2939),e),n.__exportStar(r(6900),e)},2939:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(655).__exportStar(r(8766),e)},8766:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IWatch=void 0,e.IWatch=class{}},3207:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromMiliseconds=e.toMiliseconds=void 0;const n=r(6900);e.toMiliseconds=function(t){return t*n.ONE_THOUSAND},e.fromMiliseconds=function(t){return Math.floor(t/n.ONE_THOUSAND)}},3873:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0,e.delay=function(t){return new Promise((e=>{setTimeout((()=>{e(!0)}),t)}))}},4273:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(655);n.__exportStar(r(3873),e),n.__exportStar(r(3207),e)},7001:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const e=this.get(t);if(void 0!==e.elapsed)throw new Error(`Watch already stopped for label: ${t}`);const r=Date.now()-e.started;this.timestamps.set(t,{started:e.started,elapsed:r})}get(t){const e=this.timestamps.get(t);if(void 0===e)throw new Error(`No timestamp found for label: ${t}`);return e}elapsed(t){const e=this.get(t);return e.elapsed||Date.now()-e.started}}e.Watch=r,e.default=r},2873:(t,e)=>{"use strict";function r(t){let e;return"undefined"!=typeof window&&void 0!==window[t]&&(e=window[t]),e}function n(t){const e=r(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getLocalStorage=e.getLocalStorageOrThrow=e.getCrypto=e.getCryptoOrThrow=e.getLocation=e.getLocationOrThrow=e.getNavigator=e.getNavigatorOrThrow=e.getDocument=e.getDocumentOrThrow=e.getFromWindowOrThrow=e.getFromWindow=void 0,e.getFromWindow=r,e.getFromWindowOrThrow=n,e.getDocumentOrThrow=function(){return n("document")},e.getDocument=function(){return r("document")},e.getNavigatorOrThrow=function(){return n("navigator")},e.getNavigator=function(){return r("navigator")},e.getLocationOrThrow=function(){return n("location")},e.getLocation=function(){return r("location")},e.getCryptoOrThrow=function(){return n("crypto")},e.getCrypto=function(){return r("crypto")},e.getLocalStorageOrThrow=function(){return n("localStorage")},e.getLocalStorage=function(){return r("localStorage")}},5755:(t,e,r)=>{"use strict";e.D=void 0;const n=r(2873);e.D=function(){let t,e;try{t=n.getDocumentOrThrow(),e=n.getLocationOrThrow()}catch(t){return null}function r(...e){const r=t.getElementsByTagName("meta");for(let t=0;t<r.length;t++){const n=r[t],i=["itemprop","property","name"].map((t=>n.getAttribute(t))).filter((t=>!!t&&e.includes(t)));if(i.length&&i){const t=n.getAttribute("content");if(t)return t}}return""}const i=function(){let e=r("name","og:site_name","og:title","twitter:title");return e||(e=t.title),e}();return{description:r("description","og:description","twitter:description","keywords"),url:e.origin,icons:function(){const r=t.getElementsByTagName("link"),n=[];for(let t=0;t<r.length;t++){const i=r[t],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const t=i.getAttribute("href");if(t)if(-1===t.toLowerCase().indexOf("https:")&&-1===t.toLowerCase().indexOf("http:")&&0!==t.indexOf("//")){let r=e.protocol+"//"+e.host;if(0===t.indexOf("/"))r+=t;else{const n=e.pathname.split("/");n.pop(),r+=n.join("/")+"/"+t}n.push(r)}else if(0===t.indexOf("//")){const r=e.protocol+t;n.push(r)}else n.push(t)}}return n}(),name:i}}},2882:t=>{"use strict";for(var e="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<32;n++){var i=e.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function s(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function o(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=s(e)^n>>5}for(e=s(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=s(e)^31&i}return e}function a(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var n=t.toLowerCase(),i=t.toUpperCase();if(t!==n&&t!==i)return"Mixed-case string "+t;var a=(t=n).lastIndexOf("1");if(-1===a)return"No separator character for "+t;if(0===a)return"Missing prefix for "+t;var c=t.slice(0,a),u=t.slice(a+1);if(u.length<6)return"Data too short";var h=o(c);if("string"==typeof h)return h;for(var l=[],f=0;f<u.length;++f){var d=u.charAt(f),p=r[d];if(void 0===p)return"Unknown character "+d;h=s(h)^p,f+6>=u.length||l.push(p)}return 1!==h?"Invalid checksum for "+t:{prefix:c,words:l}}function c(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<t.length;++c)for(i=i<<e|t[c],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}t.exports={decodeUnsafe:function(){var t=a.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=a.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,r,n){if(n=n||90,t.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=o(t=t.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=t+"1",c=0;c<r.length;++c){var u=r[c];if(u>>5!=0)throw new Error("Non 5-bit word");i=s(i)^u,a+=e.charAt(u)}for(c=0;c<6;++c)i=s(i);for(i^=1,c=0;c<6;++c)a+=e.charAt(i>>5*(5-c)&31);return a},toWordsUnsafe:function(t){var e=c(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=c(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=c(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=c(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},3550:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(6601).Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var l=1;for(c=u(t,h,t.length,e),h=0;h<o;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){h(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;h+=(o=(i=0|t.words[p])*(s=0|e.words[d])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?f[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=d[t],h=p[t];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var g=l.modrn(h).toString(t);r=(l=l.idivn(h)).isZero()?g+r:f[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)s=(e=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,h=0|o[0],l=8191&h,f=h>>>13,d=0|o[1],p=8191&d,g=d>>>13,m=0|o[2],v=8191&m,y=m>>>13,w=0|o[3],b=8191&w,_=w>>>13,E=0|o[4],A=8191&E,I=E>>>13,S=0|o[5],P=8191&S,O=S>>>13,N=0|o[6],k=8191&N,R=N>>>13,x=0|o[7],C=8191&x,M=x>>>13,T=0|o[8],L=8191&T,U=T>>>13,j=0|o[9],D=8191&j,B=j>>>13,q=0|a[0],z=8191&q,F=q>>>13,H=0|a[1],K=8191&H,G=H>>>13,W=0|a[2],$=8191&W,Y=W>>>13,J=0|a[3],V=8191&J,Q=J>>>13,X=0|a[4],Z=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,gt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(u+(n=Math.imul(l,z))|0)+((8191&(i=(i=Math.imul(l,F))+Math.imul(f,z)|0))<<13)|0;u=((s=Math.imul(f,F))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,F))+Math.imul(g,z)|0,s=Math.imul(g,F);var vt=(u+(n=n+Math.imul(l,K)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,G)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(v,z),i=(i=Math.imul(v,F))+Math.imul(y,z)|0,s=Math.imul(y,F),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,G)|0;var yt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(f,$)|0))<<13)|0;u=((s=s+Math.imul(f,Y)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,F))+Math.imul(_,z)|0,s=Math.imul(_,F),n=n+Math.imul(v,K)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(y,K)|0,s=s+Math.imul(y,G)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,$)|0,s=s+Math.imul(g,Y)|0;var wt=(u+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,Q)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Q)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(A,z),i=(i=Math.imul(A,F))+Math.imul(I,z)|0,s=Math.imul(I,F),n=n+Math.imul(b,K)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,K)|0,s=s+Math.imul(_,G)|0,n=n+Math.imul(v,$)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(y,$)|0,s=s+Math.imul(y,Y)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(g,V)|0,s=s+Math.imul(g,Q)|0;var bt=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Z)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,F))+Math.imul(O,z)|0,s=Math.imul(O,F),n=n+Math.imul(A,K)|0,i=(i=i+Math.imul(A,G)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,G)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,Y)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,Q)|0)+Math.imul(y,V)|0,s=s+Math.imul(y,Q)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Z)|0,s=s+Math.imul(g,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((s=s+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,F))+Math.imul(R,z)|0,s=Math.imul(R,F),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,G)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(I,$)|0,s=s+Math.imul(I,Y)|0,n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(_,V)|0,s=s+Math.imul(_,Q)|0,n=n+Math.imul(v,Z)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(y,Z)|0,s=s+Math.imul(y,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,s=s+Math.imul(g,nt)|0;var Et=(u+(n=n+Math.imul(l,st)|0)|0)+((8191&(i=(i=i+Math.imul(l,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,F))+Math.imul(M,z)|0,s=Math.imul(M,F),n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,G)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(O,$)|0,s=s+Math.imul(O,Y)|0,n=n+Math.imul(A,V)|0,i=(i=i+Math.imul(A,Q)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Q)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Z)|0,s=s+Math.imul(_,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(y,rt)|0,s=s+Math.imul(y,nt)|0,n=n+Math.imul(p,st)|0,i=(i=i+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var At=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,F))+Math.imul(U,z)|0,s=Math.imul(U,F),n=n+Math.imul(C,K)|0,i=(i=i+Math.imul(C,G)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,G)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(R,$)|0,s=s+Math.imul(R,Y)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(O,V)|0,s=s+Math.imul(O,Q)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(I,Z)|0,s=s+Math.imul(I,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(_,rt)|0,s=s+Math.imul(_,nt)|0,n=n+Math.imul(v,st)|0,i=(i=i+Math.imul(v,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(g,ct)|0,s=s+Math.imul(g,ut)|0;var It=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,F))+Math.imul(B,z)|0,s=Math.imul(B,F),n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,G)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,Y)|0,n=n+Math.imul(k,V)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Q)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(O,Z)|0,s=s+Math.imul(O,tt)|0,n=n+Math.imul(A,rt)|0,i=(i=i+Math.imul(A,nt)|0)+Math.imul(I,rt)|0,s=s+Math.imul(I,nt)|0,n=n+Math.imul(b,st)|0,i=(i=i+Math.imul(b,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,n=n+Math.imul(v,ct)|0,i=(i=i+Math.imul(v,ut)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(g,lt)|0,s=s+Math.imul(g,ft)|0;var St=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,gt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,G))+Math.imul(B,K)|0,s=Math.imul(B,G),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(U,$)|0,s=s+Math.imul(U,Y)|0,n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(R,Z)|0,s=s+Math.imul(R,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(O,rt)|0,s=s+Math.imul(O,nt)|0,n=n+Math.imul(A,st)|0,i=(i=i+Math.imul(A,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,n=n+Math.imul(b,ct)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(_,ct)|0,s=s+Math.imul(_,ut)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,ft)|0)+Math.imul(y,lt)|0,s=s+Math.imul(y,ft)|0;var Pt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((s=s+Math.imul(g,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,Y))+Math.imul(B,$)|0,s=Math.imul(B,Y),n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,Q)|0)+Math.imul(U,V)|0,s=s+Math.imul(U,Q)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(M,Z)|0,s=s+Math.imul(M,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(R,rt)|0,s=s+Math.imul(R,nt)|0,n=n+Math.imul(P,st)|0,i=(i=i+Math.imul(P,ot)|0)+Math.imul(O,st)|0,s=s+Math.imul(O,ot)|0,n=n+Math.imul(A,ct)|0,i=(i=i+Math.imul(A,ut)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ut)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(_,lt)|0,s=s+Math.imul(_,ft)|0;var Ot=(u+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(y,pt)|0))<<13)|0;u=((s=s+Math.imul(y,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Q))+Math.imul(B,V)|0,s=Math.imul(B,Q),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(U,Z)|0,s=s+Math.imul(U,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(M,rt)|0,s=s+Math.imul(M,nt)|0,n=n+Math.imul(k,st)|0,i=(i=i+Math.imul(k,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(O,ct)|0,s=s+Math.imul(O,ut)|0,n=n+Math.imul(A,lt)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(I,lt)|0,s=s+Math.imul(I,ft)|0;var Nt=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((s=s+Math.imul(_,gt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,tt))+Math.imul(B,Z)|0,s=Math.imul(B,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(U,rt)|0,s=s+Math.imul(U,nt)|0,n=n+Math.imul(C,st)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,n=n+Math.imul(k,ct)|0,i=(i=i+Math.imul(k,ut)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,ft)|0)+Math.imul(O,lt)|0,s=s+Math.imul(O,ft)|0;var kt=(u+(n=n+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,gt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(B,rt)|0,s=Math.imul(B,nt),n=n+Math.imul(L,st)|0,i=(i=i+Math.imul(L,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ut)|0,n=n+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(R,lt)|0,s=s+Math.imul(R,ft)|0;var Rt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,gt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((s=s+Math.imul(O,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(D,st),i=(i=Math.imul(D,ot))+Math.imul(B,st)|0,s=Math.imul(B,ot),n=n+Math.imul(L,ct)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,ut)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(M,lt)|0,s=s+Math.imul(M,ft)|0;var xt=(u+(n=n+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,gt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,ct),i=(i=Math.imul(D,ut))+Math.imul(B,ct)|0,s=Math.imul(B,ut),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(U,lt)|0,s=s+Math.imul(U,ft)|0;var Ct=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,lt),i=(i=Math.imul(D,ft))+Math.imul(B,lt)|0,s=Math.imul(B,ft);var Mt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,gt)|0)+Math.imul(U,pt)|0))<<13)|0;u=((s=s+Math.imul(U,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Tt=(u+(n=Math.imul(D,pt))|0)+((8191&(i=(i=Math.imul(D,gt))+Math.imul(B,pt)|0))<<13)|0;return u=((s=Math.imul(B,gt))+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,c[0]=mt,c[1]=vt,c[2]=yt,c[3]=wt,c[4]=bt,c[5]=_t,c[6]=Et,c[7]=At,c[8]=It,c[9]=St,c[10]=Pt,c[11]=Ot,c[12]=Nt,c[13]=kt,c[14]=Rt,c[15]=xt,c[16]=Ct,c[17]=Mt,c[18]=Tt,0!==u&&(c[19]=u,r.length++),r};function v(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var h=s-u,l=(0|t.words[h])*(0|e.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(o=(o=o+(l/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function y(t,e,r){return v(t,e,r)}function w(t,e){this.x=t,this.y=e}Math.imul||(m=g),s.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,e):r<63?g(this,t,e):r<1024?v(this,t,e):y(this,t,e)},w.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},w.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},w.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},w.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,f=u,d=0;d<o;d++){var p=r[h+d],g=n[h+d],m=r[h+d+o],v=n[h+d+o],y=l*m-f*v;v=l*v+f*m,m=y,r[h+d]=p+m,n[h+d]=g+v,r[h+d+o]=p-m,n[h+d+o]=g-v,d!==a&&(y=c*l-u*f,f=c*f+u*l,l=y)}},w.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},w.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},w.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},w.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0==(-8192&s))},w.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},w.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-c[d]*l[d];c[d]=a[d]*l[d]+c[d]*h[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,s,n,i),this.conjugate(f,s,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),y(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-s|l>>>s,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(i,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0==(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,f=1;0==(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return(i=0===e.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new P(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function O(t){P.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(E,_),E.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(A,_),i(I,_),i(S,_),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new E;else if("p224"===t)e=new A;else if("p192"===t)e=new I;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return b[t]=e,e},P.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},P.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},P.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},P.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},P.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},P.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},P.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},P.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},P.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},P.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},P.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},P.prototype.isqr=function(t){return this.imul(t,t.clone())},P.prototype.sqr=function(t){return this.mul(t,t)},P.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=o;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var v=this.pow(l,new s(1).iushln(p-m-1));f=f.redMul(v),l=v.redSqr(),d=d.redMul(l),p=m}return f},P.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},P.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4==++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},P.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},P.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new O(t)},i(O,P),O.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},O.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},O.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},O.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},4098:function(t,e){var r="undefined"!=typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,r,n=d(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,r=p(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=u(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,e){this.map[u(t)]=h(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),l(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),l(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var r,n,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),y.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];_.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,s){var o=new w(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new _(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=f,t.Request=w,t.Response=_),e.Headers=f,e.Request=w,e.Response=_,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},4020:t=>{"use strict";var e="%[a-f0-9]{2}",r=new RegExp("("+e+")|([^%]+?)","gi"),n=new RegExp("("+e+")+","gi");function i(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],i(r),i(n))}function s(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(r)||[],n=1;n<e.length;n++)e=(t=i(e,n).join("")).match(r)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"","%FF%FE":""},r=n.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var i=s(r[0]);i!==r[0]&&(e[r[0]]=i)}r=n.exec(t)}e["%C2"]="";for(var o=Object.keys(e),a=0;a<o.length;a++){var c=o[a];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},6729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||t,o),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,s),!0;case 6:return h.fn.call(h.context,e,n,i,s,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var f,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;case 4:h[u].fn.call(h[u].context,e,n,i);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==e||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},7187:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,r,n){var i,s,o,u;if(a(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),void 0===o)o=s[e]=r,++t._eventsCount;else if("function"==typeof o?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,u=h,console&&console.warn&&console.warn(u)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function f(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)n(c,this,e);else{var u=c.length,h=p(c,u);for(r=0;r<u;++r)n(h[r],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,l(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,l(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,s,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},2806:t=>{"use strict";t.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?-1!==e.indexOf(o):e(o,a,t))&&(r[o]=a)}return r}},3715:(t,e,r)=>{var n=e;n.utils=r(6436),n.common=r(5772),n.sha=r(9041),n.ripemd=r(2949),n.hmac=r(2344),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},5772:(t,e,r)=>{"use strict";var n=r(6436),i=r(9746);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},2344:(t,e,r)=>{"use strict";var n=r(6436),i=r(9746);function s(t,e,r){if(!(this instanceof s))return new s(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},2949:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=n.rotl32,o=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(h,u),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],h=this.h[4],y=r,w=n,b=i,_=u,E=h,A=0;A<80;A++){var I=o(s(c(r,l(A,n,i,u),t[p[A]+e],f(A)),m[A]),h);r=h,h=u,u=s(i,10),i=n,n=I,I=o(s(c(y,l(79-A,w,b,_),t[g[A]+e],d(A)),v[A]),E),y=E,E=_,_=s(b,10),b=w,w=I}I=a(this.h[1],i,_),this.h[1]=a(this.h[2],u,E),this.h[2]=a(this.h[3],h,y),this.h[3]=a(this.h[4],r,w),this.h[4]=a(this.h[0],n,b),this.h[0]=I},h.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9041:(t,e,r)=>{"use strict";e.sha1=r(4761),e.sha224=r(799),e.sha256=r(9344),e.sha384=r(772),e.sha512=r(5900)},4761:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(7038),o=n.rotl32,a=n.sum32,c=n.sum32_5,u=s.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],h=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),g=c(o(i,5),u(p,s,h,f),d,r[n],l[p]);d=f,f=h,h=o(s,30),s=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},799:(t,e,r)=>{"use strict";var n=r(6436),i=r(9344);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},9344:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(7038),o=r(9746),a=n.sum32,c=n.sum32_4,u=n.sum32_5,h=s.ch32,l=s.maj32,f=s.s0_256,d=s.s1_256,p=s.g0_256,g=s.g1_256,m=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}n.inherits(y,m),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=c(g(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],m=this.h[2],v=this.h[3],y=this.h[4],w=this.h[5],b=this.h[6],_=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var E=u(_,d(y),h(y,w,b),this.k[n],r[n]),A=a(f(i),l(i,s,m));_=b,b=w,w=y,y=a(v,E),v=m,m=s,s=i,i=a(E,A)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],w),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],_)},y.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},772:(t,e,r)=>{"use strict";var n=r(6436),i=r(5900);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},5900:(t,e,r)=>{"use strict";var n=r(6436),i=r(5772),s=r(9746),o=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,h=n.sum64,l=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function b(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function _(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function E(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function A(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function I(t,e){var r=o(t,e,28)^o(e,t,2)^o(e,t,7);return r<0&&(r+=4294967296),r}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function P(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function O(t,e){var r=o(t,e,1)^o(t,e,8)^c(t,e,7);return r<0&&(r+=4294967296),r}function N(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function k(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(w,v),t.exports=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=(m=r[n-4],v=r[n-3],y=void 0,(y=o(m,v,19)^o(v,m,29)^c(m,v,6))<0&&(y+=4294967296),y),s=k(r[n-4],r[n-3]),a=r[n-14],u=r[n-13],h=O(r[n-30],r[n-29]),l=N(r[n-30],r[n-29]),f=r[n-32],g=r[n-31];r[n]=d(i,s,a,u,h,l,f,g),r[n+1]=p(i,s,a,u,h,l,f,g)}var m,v,y},w.prototype._update=function(t,e){this._prepareBlock(t,e);var r,n,i,a=this.W,c=this.h[0],u=this.h[1],d=this.h[2],p=this.h[3],v=this.h[4],y=this.h[5],w=this.h[6],O=this.h[7],N=this.h[8],k=this.h[9],R=this.h[10],x=this.h[11],C=this.h[12],M=this.h[13],T=this.h[14],L=this.h[15];s(this.k.length===a.length);for(var U=0;U<a.length;U+=2){var j=T,D=L,B=(i=void 0,(i=o(r=N,n=k,14)^o(r,n,18)^o(n,r,9))<0&&(i+=4294967296),i),q=P(N,k),z=b(N,0,R,0,C),F=_(0,k,0,x,0,M),H=this.k[U],K=this.k[U+1],G=a[U],W=a[U+1],$=g(j,D,B,q,z,F,H,K,G,W),Y=m(j,D,B,q,z,F,H,K,G,W);j=I(c,u),D=S(c,u),B=E(c,0,d,0,v),q=A(0,u,0,p,0,y);var J=l(j,D,B,q),V=f(j,D,B,q);T=C,L=M,C=R,M=x,R=N,x=k,N=l(w,O,$,Y),k=f(O,O,$,Y),w=v,O=y,v=d,y=p,d=c,p=u,c=l($,Y,J,V),u=f($,Y,J,V)}h(this.h,0,c,u),h(this.h,2,d,p),h(this.h,4,v,y),h(this.h,6,w,O),h(this.h,8,N,k),h(this.h,10,R,x),h(this.h,12,C,M),h(this.h,14,T,L)},w.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7038:(t,e,r)=>{"use strict";var n=r(6436).rotr32;function i(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}function o(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?o(e,r,n):2===t?s(e,r,n):void 0},e.ch32=i,e.maj32=s,e.p32=o,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},6436:(t,e,r)=>{"use strict";var n=r(9746),i=r(5717);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function c(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):s(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=o(i)),r+=c(i.toString(16))}return r},e.zero2=a,e.zero8=c,e.join32=function(t,e,r,i){var s=r-e;n(s%4==0);for(var o=new Array(s/4),a=0,c=e;a<o.length;a++,c+=4){var u;u="big"===i?t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],o[a]=u>>>0}return o},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];"big"===e?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],s=n+t[e+1]>>>0,o=(s<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,s,o,a){var c=0,u=e;return c+=(u=u+n>>>0)<e?1:0,c+=(u=u+s>>>0)<s?1:0,t+r+i+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,s,o,a){return e+n+s+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,s,o,a,c,u){var h=0,l=e;return h+=(l=l+n>>>0)<e?1:0,h+=(l=l+s>>>0)<s?1:0,h+=(l=l+a>>>0)<a?1:0,t+r+i+o+c+(h+=(l=l+u>>>0)<u?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,s,o,a,c,u){return e+n+s+a+u>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},1094:(t,e,r)=>{var n;!function(){"use strict";var i="input is invalid type",s="object"==typeof window,o=s?window:{};o.JS_SHA3_NO_WINDOW&&(s=!1);var a=!s&&"object"==typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?o=r.g:a&&(o=self);var c=!o.JS_SHA3_NO_COMMON_JS&&t.exports,u=r.amdO,h=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),f=[4,1024,262144,67108864],d=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!h||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var w=function(t,e,r){return function(n){return new T(t,e,t).update(n)[r]()}},b=function(t,e,r){return function(n,i){return new T(t,e,i).update(n)[r]()}},_=function(t,e,r){return function(e,n,i,s){return P["cshake"+t].update(e,n,i,s)[r]()}},E=function(t,e,r){return function(e,n,i,s){return P["kmac"+t].update(e,n,i,s)[r]()}},A=function(t,e,r,n){for(var i=0;i<v.length;++i){var s=v[i];t[s]=e(r,n,s)}return t},I=function(t,e){var r=w(t,e,"hex");return r.create=function(){return new T(t,e,t)},r.update=function(t){return r.create().update(t)},A(r,w,t,e)},S=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:I},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:I},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(t,e){var r=b(t,e,"hex");return r.create=function(r){return new T(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},A(r,b,t,e)}},{name:"cshake",padding:f,bits:m,createMethod:function(t,e){var r=y[t],n=_(t,0,"hex");return n.create=function(n,i,s){return i||s?new T(t,e,n).bytepad([i,s],r):P["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},A(n,_,t,e)}},{name:"kmac",padding:f,bits:m,createMethod:function(t,e){var r=y[t],n=E(t,0,"hex");return n.create=function(n,i,s){return new L(t,e,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},A(n,E,t,e)}}],P={},O=[],N=0;N<S.length;++N)for(var k=S[N],R=k.bits,x=0;x<R.length;++x){var C=k.name+"_"+R[x];if(O.push(C),P[C]=k.createMethod(R[x],k.padding),"sha3"!==k.name){var M=k.name+R[x];O.push(M),P[M]=P[C]}}function T(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function L(t,e,r){T.call(this,t,e,r)}T.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(i);if(null===t)throw new Error(i);if(h&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||h&&ArrayBuffer.isView(t)))throw new Error(i);e=!0}for(var n,s,o=this.blocks,a=this.byteCount,c=t.length,u=this.blockCount,l=0,f=this.s;l<c;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<u+1;++n)o[n]=0;if(e)for(n=this.start;l<c&&n<a;++l)o[n>>2]|=t[l]<<d[3&n++];else for(n=this.start;l<c&&n<a;++l)(s=t.charCodeAt(l))<128?o[n>>2]|=s<<d[3&n++]:s<2048?(o[n>>2]|=(192|s>>6)<<d[3&n++],o[n>>2]|=(128|63&s)<<d[3&n++]):s<55296||s>=57344?(o[n>>2]|=(224|s>>12)<<d[3&n++],o[n>>2]|=(128|s>>6&63)<<d[3&n++],o[n>>2]|=(128|63&s)<<d[3&n++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++l)),o[n>>2]|=(240|s>>18)<<d[3&n++],o[n>>2]|=(128|s>>12&63)<<d[3&n++],o[n>>2]|=(128|s>>6&63)<<d[3&n++],o[n>>2]|=(128|63&s)<<d[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=o[u],n=0;n<u;++n)f[n]^=o[n];U(f),this.reset=!0}else this.start=n}return this},T.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},T.prototype.encodeString=function(t){var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(i);if(null===t)throw new Error(i);if(h&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||h&&ArrayBuffer.isView(t)))throw new Error(i);e=!0}var n=0,s=t.length;if(e)n=s;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),n+=4)}return n+=this.encode(8*n),this.update(t),n},T.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,s=[];return s.length=i,this.update(s),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];U(n)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";o<n;){for(s=0;s<e&&o<n;++s,++o)t=r[s],a+=l[t>>4&15]+l[15&t]+l[t>>12&15]+l[t>>8&15]+l[t>>20&15]+l[t>>16&15]+l[t>>28&15]+l[t>>24&15];o%e==0&&(U(r),s=0)}return i&&(t=r[s],a+=l[t>>4&15]+l[15&t],i>1&&(a+=l[t>>12&15]+l[t>>8&15]),i>2&&(a+=l[t>>20&15]+l[t>>16&15])),a},T.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(t);o<n;){for(s=0;s<e&&o<n;++s,++o)c[o]=r[s];o%e==0&&U(r)}return i&&(c[s]=r[s],t=t.slice(0,a)),t},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];a<i;){for(o=0;o<r&&a<i;++o,++a)t=a<<2,e=n[o],c[t]=255&e,c[t+1]=e>>8&255,c[t+2]=e>>16&255,c[t+3]=e>>24&255;a%r==0&&U(n)}return s&&(t=a<<2,e=n[o],c[t]=255&e,s>1&&(c[t+1]=e>>8&255),s>2&&(c[t+2]=e>>16&255)),c},L.prototype=new T,L.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var U=function(t){var e,r,n,i,s,o,a,c,u,h,l,f,d,g,m,v,y,w,b,_,E,A,I,S,P,O,N,k,R,x,C,M,T,L,U,j,D,B,q,z,F,H,K,G,W,$,Y,J,V,Q,X,Z,tt,et,rt,nt,it,st,ot,at,ct,ut,ht;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],c=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(o<<1|a>>>31),r=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|o>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(c<<1|u>>>31),r=s^(u<<1|c>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=o^(h<<1|l>>>31),r=a^(l<<1|h>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=c^(f<<1|d>>>31),r=u^(d<<1|f>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=h^(i<<1|s>>>31),r=l^(s<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,g=t[0],m=t[1],$=t[11]<<4|t[10]>>>28,Y=t[10]<<4|t[11]>>>28,k=t[20]<<3|t[21]>>>29,R=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ct=t[30]<<9|t[31]>>>23,H=t[40]<<18|t[41]>>>14,K=t[41]<<18|t[40]>>>14,L=t[2]<<1|t[3]>>>31,U=t[3]<<1|t[2]>>>31,v=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,J=t[22]<<10|t[23]>>>22,V=t[23]<<10|t[22]>>>22,x=t[33]<<13|t[32]>>>19,C=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,j=t[14]<<6|t[15]>>>26,D=t[15]<<6|t[14]>>>26,w=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,Q=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,M=t[45]<<29|t[44]>>>3,T=t[44]<<29|t[45]>>>3,S=t[6]<<28|t[7]>>>4,P=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,B=t[26]<<25|t[27]>>>7,q=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,G=t[8]<<27|t[9]>>>5,W=t[9]<<27|t[8]>>>5,O=t[18]<<20|t[19]>>>12,N=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,z=t[38]<<8|t[39]>>>24,F=t[39]<<8|t[38]>>>24,A=t[48]<<14|t[49]>>>18,I=t[49]<<14|t[48]>>>18,t[0]=g^~v&w,t[1]=m^~y&b,t[10]=S^~O&k,t[11]=P^~N&R,t[20]=L^~j&B,t[21]=U^~D&q,t[30]=G^~$&J,t[31]=W^~Y&V,t[40]=et^~nt&st,t[41]=rt^~it&ot,t[2]=v^~w&_,t[3]=y^~b&E,t[12]=O^~k&x,t[13]=N^~R&C,t[22]=j^~B&z,t[23]=D^~q&F,t[32]=$^~J&Q,t[33]=Y^~V&X,t[42]=nt^~st&at,t[43]=it^~ot&ct,t[4]=w^~_&A,t[5]=b^~E&I,t[14]=k^~x&M,t[15]=R^~C&T,t[24]=B^~z&H,t[25]=q^~F&K,t[34]=J^~Q&Z,t[35]=V^~X&tt,t[44]=st^~at&ut,t[45]=ot^~ct&ht,t[6]=_^~A&g,t[7]=E^~I&m,t[16]=x^~M&S,t[17]=C^~T&P,t[26]=z^~H&L,t[27]=F^~K&U,t[36]=Q^~Z&G,t[37]=X^~tt&W,t[46]=at^~ut&et,t[47]=ct^~ht&rt,t[8]=A^~g&v,t[9]=I^~m&y,t[18]=M^~S&O,t[19]=T^~P&N,t[28]=H^~L&j,t[29]=K^~U&D,t[38]=Z^~G&$,t[39]=tt^~W&Y,t[48]=ut^~et&nt,t[49]=ht^~rt&it,t[0]^=p[n],t[1]^=p[n+1]};if(c)t.exports=P;else{for(N=0;N<O.length;++N)o[O[N]]=P[O[N]];u&&(void 0===(n=function(){return P}.call(e,r,e,t))||(t.exports=n))}}()},2307:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",l="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",v="[object Null]",y="[object Object]",w="[object Promise]",b="[object Proxy]",_="[object RegExp]",E="[object Set]",A="[object String]",I="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",N=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[a]=R[c]=R[P]=R[h]=R[O]=R[l]=R[f]=R[d]=R[g]=R[m]=R[y]=R[_]=R[E]=R[A]=R[S]=!1;var x="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,C="object"==typeof self&&self&&self.Object===Object&&self,M=x||C||Function("return this")(),T=e&&!e.nodeType&&e,L=T&&t&&!t.nodeType&&t,U=L&&L.exports===T,j=U&&x.process,D=function(){try{return j&&j.binding&&j.binding("util")}catch(t){}}(),B=D&&D.isTypedArray;function q(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function z(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function F(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var H,K,G,W=Array.prototype,$=Function.prototype,Y=Object.prototype,J=M["__core-js_shared__"],V=$.toString,Q=Y.hasOwnProperty,X=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",Z=Y.toString,tt=RegExp("^"+V.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=U?M.Buffer:void 0,rt=M.Symbol,nt=M.Uint8Array,it=Y.propertyIsEnumerable,st=W.splice,ot=rt?rt.toStringTag:void 0,at=Object.getOwnPropertySymbols,ct=et?et.isBuffer:void 0,ut=(K=Object.keys,G=Object,function(t){return K(G(t))}),ht=Lt(M,"DataView"),lt=Lt(M,"Map"),ft=Lt(M,"Promise"),dt=Lt(M,"Set"),pt=Lt(M,"WeakMap"),gt=Lt(Object,"create"),mt=Bt(ht),vt=Bt(lt),yt=Bt(ft),wt=Bt(dt),bt=Bt(pt),_t=rt?rt.prototype:void 0,Et=_t?_t.valueOf:void 0;function At(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new St;++e<r;)this.add(t[e])}function Ot(t){var e=this.__data__=new It(t);this.size=e.size}function Nt(t,e){for(var r=t.length;r--;)if(qt(t[r][0],e))return r;return-1}function kt(t){return null==t?void 0===t?I:v:ot&&ot in Object(t)?function(t){var e=Q.call(t,ot),r=t[ot];try{t[ot]=void 0;var n=!0}catch(t){}var i=Z.call(t);return n&&(e?t[ot]=r:delete t[ot]),i}(t):function(t){return Z.call(t)}(t)}function Rt(t){return $t(t)&&kt(t)==a}function xt(t,e,r,n,o){return t===e||(null==t||null==e||!$t(t)&&!$t(e)?t!=t&&e!=e:function(t,e,r,n,o,u){var d=Ft(t),p=Ft(e),v=d?c:jt(t),w=p?c:jt(e),b=(v=v==a?y:v)==y,I=(w=w==a?y:w)==y,S=v==w;if(S&&Ht(t)){if(!Ht(e))return!1;d=!0,b=!1}if(S&&!b)return u||(u=new Ot),d||Yt(t)?Ct(t,e,r,n,o,u):function(t,e,r,n,o,a,c){switch(r){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!a(new nt(t),new nt(e)));case h:case l:case m:return qt(+t,+e);case f:return t.name==e.name&&t.message==e.message;case _:case A:return t==e+"";case g:var u=z;case E:var d=n&i;if(u||(u=F),t.size!=e.size&&!d)return!1;var p=c.get(t);if(p)return p==e;n|=s,c.set(t,e);var v=Ct(u(t),u(e),n,o,a,c);return c.delete(t),v;case"[object Symbol]":if(Et)return Et.call(t)==Et.call(e)}return!1}(t,e,v,r,n,o,u);if(!(r&i)){var N=b&&Q.call(t,"__wrapped__"),k=I&&Q.call(e,"__wrapped__");if(N||k){var R=N?t.value():t,x=k?e.value():e;return u||(u=new Ot),o(R,x,r,n,u)}}return!!S&&(u||(u=new Ot),function(t,e,r,n,s,o){var a=r&i,c=Mt(t),u=c.length;if(u!=Mt(e).length&&!a)return!1;for(var h=u;h--;){var l=c[h];if(!(a?l in e:Q.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);for(var p=a;++h<u;){var g=t[l=c[h]],m=e[l];if(n)var v=a?n(m,g,l,e,t,o):n(g,m,l,t,e,o);if(!(void 0===v?g===m||s(g,m,r,n,o):v)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,r,n,o,u))}(t,e,r,n,xt,o))}function Ct(t,e,r,n,o,a){var c=r&i,u=t.length,h=e.length;if(u!=h&&!(c&&h>u))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,d=!0,p=r&s?new Pt:void 0;for(a.set(t,e),a.set(e,t);++f<u;){var g=t[f],m=e[f];if(n)var v=c?n(m,g,f,e,t,a):n(g,m,f,t,e,a);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!q(e,(function(t,e){if(i=e,!p.has(i)&&(g===t||o(g,t,r,n,a)))return p.push(e);var i}))){d=!1;break}}else if(g!==m&&!o(g,m,r,n,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Mt(t){return function(t,e,r){var n=e(t);return Ft(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Jt,Ut)}function Tt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Lt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Wt(t)||function(t){return!!X&&X in t}(t))&&(Kt(t)?tt:N).test(Bt(t))}(r)?r:void 0}At.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},At.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},At.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===n?void 0:r}return Q.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:Q.call(e,t)},At.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=gt&&void 0===e?n:e,this},It.prototype.clear=function(){this.__data__=[],this.size=0},It.prototype.delete=function(t){var e=this.__data__,r=Nt(e,t);return!(r<0||(r==e.length-1?e.pop():st.call(e,r,1),--this.size,0))},It.prototype.get=function(t){var e=this.__data__,r=Nt(e,t);return r<0?void 0:e[r][1]},It.prototype.has=function(t){return Nt(this.__data__,t)>-1},It.prototype.set=function(t,e){var r=this.__data__,n=Nt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},St.prototype.clear=function(){this.size=0,this.__data__={hash:new At,map:new(lt||It),string:new At}},St.prototype.delete=function(t){var e=Tt(this,t).delete(t);return this.size-=e?1:0,e},St.prototype.get=function(t){return Tt(this,t).get(t)},St.prototype.has=function(t){return Tt(this,t).has(t)},St.prototype.set=function(t,e){var r=Tt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Pt.prototype.add=Pt.prototype.push=function(t){return this.__data__.set(t,n),this},Pt.prototype.has=function(t){return this.__data__.has(t)},Ot.prototype.clear=function(){this.__data__=new It,this.size=0},Ot.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ot.prototype.get=function(t){return this.__data__.get(t)},Ot.prototype.has=function(t){return this.__data__.has(t)},Ot.prototype.set=function(t,e){var r=this.__data__;if(r instanceof It){var n=r.__data__;if(!lt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new St(n)}return r.set(t,e),this.size=r.size,this};var Ut=at?function(t){return null==t?[]:(t=Object(t),function(e,r){for(var n=-1,i=null==e?0:e.length,s=0,o=[];++n<i;){var a=e[n];c=a,it.call(t,c)&&(o[s++]=a)}var c;return o}(at(t)))}:function(){return[]},jt=kt;function Dt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function Bt(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qt(t,e){return t===e||t!=t&&e!=e}(ht&&jt(new ht(new ArrayBuffer(1)))!=O||lt&&jt(new lt)!=g||ft&&jt(ft.resolve())!=w||dt&&jt(new dt)!=E||pt&&jt(new pt)!=S)&&(jt=function(t){var e=kt(t),r=e==y?t.constructor:void 0,n=r?Bt(r):"";if(n)switch(n){case mt:return O;case vt:return g;case yt:return w;case wt:return E;case bt:return S}return e});var zt=Rt(function(){return arguments}())?Rt:function(t){return $t(t)&&Q.call(t,"callee")&&!it.call(t,"callee")},Ft=Array.isArray,Ht=ct||function(){return!1};function Kt(t){if(!Wt(t))return!1;var e=kt(t);return e==d||e==p||e==u||e==b}function Gt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Wt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function $t(t){return null!=t&&"object"==typeof t}var Yt=B?function(t){return function(e){return t(e)}}(B):function(t){return $t(t)&&Gt(t.length)&&!!R[kt(t)]};function Jt(t){return null!=(e=t)&&Gt(e.length)&&!Kt(e)?function(t,e){var r=Ft(t),n=!r&&zt(t),i=!r&&!n&&Ht(t),s=!r&&!n&&!i&&Yt(t),o=r||n||i||s,a=o?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=a.length;for(var u in t)!e&&!Q.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Dt(u,c))||a.push(u);return a}(t):function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||Y))return ut(t);var e,r,n=[];for(var i in Object(t))Q.call(t,i)&&"constructor"!=i&&n.push(i);return n}(t);var e}t.exports=function(t,e){return xt(t,e)}},9746:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},7563:(t,e,r)=>{"use strict";const n=r(610),i=r(4020),s=r(500),o=r(2806),a=Symbol("encodeFragmentIdentifier");function c(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function u(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function h(t,e){return e.decode?i(t):t}function l(t){return Array.isArray(t)?t.sort():"object"==typeof t?l(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function f(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function d(t){const e=(t=f(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function p(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function g(t,e){c((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"colon-list-separator":return(t,r,n)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":case"separator":return(e,r,n)=>{const i="string"==typeof r&&r.includes(t.arrayFormatSeparator),s="string"==typeof r&&!i&&h(r,t).includes(t.arrayFormatSeparator);r=s?h(r,t):r;const o=i||s?r.split(t.arrayFormatSeparator).map((e=>h(e,t))):null===r?r:h(r,t);n[e]=o};case"bracket-separator":return(e,r,n)=>{const i=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!i)return void(n[e]=r?h(r,t):r);const s=null===r?[]:r.split(t.arrayFormatSeparator).map((e=>h(e,t)));void 0!==n[e]?n[e]=[].concat(n[e],s):n[e]=s};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const i of t.split("&")){if(""===i)continue;let[t,o]=s(e.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:h(o,e),r(h(t,e),o,n)}for(const t of Object.keys(n)){const r=n[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=p(r[t],e);else n[t]=p(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=l(r):t[e]=r,t}),Object.create(null))}e.extract=d,e.parse=g,e.stringify=(t,e)=>{if(!t)return"";c((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const r=r=>e.skipNull&&null==t[r]||e.skipEmptyString&&""===t[r],n=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const i=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[u(e,t),"[",i,"]"].join("")]:[...r,[u(e,t),"[",u(i,t),"]=",u(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[u(e,t),"[]"].join("")]:[...r,[u(e,t),"[]=",u(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[u(e,t),":list="].join("")]:[...r,[u(e,t),":list=",u(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length?[[u(r,t),e,u(i,t)].join("")]:[[n,u(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,u(e,t)]:[...r,[u(e,t),"=",u(n,t)].join("")]}}(e),i={};for(const e of Object.keys(t))r(e)||(i[e]=t[e]);const s=Object.keys(i);return!1!==e.sort&&s.sort(e.sort),s.map((r=>{const i=t[r];return void 0===i?"":null===i?u(r,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?u(r,e)+"[]":i.reduce(n(r),[]).join("&"):u(r,e)+"="+u(i,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[r,n]=s(t,"#");return Object.assign({url:r.split("?")[0]||"",query:g(d(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:h(n,e)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[a]:!0},r);const n=f(t.url).split("?")[0]||"",i=e.extract(t.url),s=e.parse(i,{sort:!1}),o=Object.assign(s,t.query);let c=e.stringify(o,r);c&&(c=`?${c}`);let h=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(h=`#${r[a]?u(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${n}${c}${h}`},e.pick=(t,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[a]:!1},n);const{url:i,query:s,fragmentIdentifier:c}=e.parseUrl(t,n);return e.stringifyUrl({url:i,query:o(s,r),fragmentIdentifier:c},n)},e.exclude=(t,r,n)=>{const i=Array.isArray(r)?t=>!r.includes(t):(t,e)=>!r(t,e);return e.pick(t,i,n)}},5346:t=>{"use strict";function e(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}t.exports=function(t,r,n){var i=n&&n.stringify||e;if("object"==typeof t&&null!==t){var s=r.length+1;if(1===s)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof t)return t;var c=r.length;if(0===c)return t;for(var u="",h=0,l=-1,f=t&&t.length||0,d=0;d<f;){if(37===t.charCodeAt(d)&&d+1<f){switch(l=l>-1?l:0,t.charCodeAt(d+1)){case 100:case 102:if(h>=c)break;if(null==r[h])break;l<d&&(u+=t.slice(l,d)),u+=Number(r[h]),l=d+2,d++;break;case 105:if(h>=c)break;if(null==r[h])break;l<d&&(u+=t.slice(l,d)),u+=Math.floor(Number(r[h])),l=d+2,d++;break;case 79:case 111:case 106:if(h>=c)break;if(void 0===r[h])break;l<d&&(u+=t.slice(l,d));var p=typeof r[h];if("string"===p){u+="'"+r[h]+"'",l=d+2,d++;break}if("function"===p){u+=r[h].name||"<anonymous>",l=d+2,d++;break}u+=i(r[h]),l=d+2,d++;break;case 115:if(h>=c)break;l<d&&(u+=t.slice(l,d)),u+=String(r[h]),l=d+2,d++;break;case 37:l<d&&(u+=t.slice(l,d)),u+="%",l=d+2,d++,h--}++h}++d}return-1===l?t:(l<f&&(u+=t.slice(l)),u)}},3954:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.safeJsonParse=function(t){if("string"!=typeof t)throw new Error("Cannot safe json parse value of type "+typeof t);try{return JSON.parse(t)}catch(e){return t}},e.safeJsonStringify=function(t){return"string"==typeof t?t:JSON.stringify(t,((t,e)=>void 0===e?null:e))}},500:t=>{"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},610:t=>{"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},5793:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GateWalletConnector=e.GateWallet=void 0;const n=r(7985),i=r(3974),s=r(9699);var o=r(3974);Object.defineProperty(e,"GateWallet",{enumerable:!0,get:function(){return o.GateWallet}});class a{constructor(){}static getInstance(){return this.instance||(this.instance=(0,n.initializeConnector)((t=>new i.GateWallet({actions:t})))),this.instance}static getConnection(){const[t,e]=a.getInstance();return{connector:t,hooks:e,type:s.ConnectionType.GATEWALLET}}}e.GateWalletConnector=a},2295:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.connect=e.disconnect=e.connectWallet=e.useEagerlyConnect=e.getConnection=e.getConnectionMap=e.initConnector=e.getConnectors=void 0;const i=r(2244),s=r(2538),o=r(9699),a=r(7912),c=r(7592),u=r(6661),h=r(6584),l=r(8013),f=r(3442),d=r(5793);function p(){const[t,e]=c.MetaMaskConnector.getInstance(),[r,n]=d.GateWalletConnector.getInstance(),[i,s]=u.PhantomConnector.getInstance(),[o,a]=h.WalletConnectConnector.getInstance(),[f,p]=l.WalletConnectNotQrConnector.getInstance();return[[t,e],[o,a],[f,p],[i,s],[r,n]]}function g(){const t=u.PhantomConnector.getConnection(),e=c.MetaMaskConnector.getConnection(),r=d.GateWalletConnector.getConnection();return[e,t,h.WalletConnectConnector.getConnection(),l.WalletConnectNotQrConnector.getConnection(),r]}function m(t){const e=g();if(t instanceof s.Connector){const r=e.find((e=>e.connector===t));if(!r)throw Error("unsupported connector");return r}return e.filter((e=>e.type===t))[0]}function v(){return(0,a.createStorage)({storage:"undefined"!=typeof window?window.localStorage:a.noopStorage})}e.getConnectors=function(t){return p()},e.initConnector=p,e.getConnectionMap=g,e.getConnection=m;const y="selectedWallet";function w(t){return n(this,void 0,void 0,(function*(){try{t.connectEagerly?yield t.connectEagerly():yield t.activate()}catch(t){console.debug(`web3-connector eager connection error: ${t}`)}}))}e.useEagerlyConnect=function(t){let e;const r=v();let n;if("undefined"!=typeof window&&(e=r.getItem(y)),e)try{n=m(e)}catch(e){t&&t()}(0,i.useEffect)((()=>{n&&w(n.connector)}),[])},e.connectWallet=function(t,e,r){var n,i,s;const a=v();let c=m(t);if(c&&(null===(i=null===(n=c.connector)||void 0===n?void 0:n.activate())||void 0===i||i.then((()=>{a.setItem(y,t)})).catch((t=>{r&&r(t)})),t===o.ConnectionType.WALLET_CONNECT_NOTQR)){function u(t){var r;t&&(e&&e(t),null===(r=c.connector)||void 0===r||r.events.removeListener(f.URI_AVAILABLE,u))}null===(s=c.connector)||void 0===s||s.events.on(f.URI_AVAILABLE,u)}},e.disconnect=function(t){const e=v();t&&(null==t?void 0:t.deactivate)&&t.deactivate(),t.resetState(),e.removeItem(y)},e.connect=w},7592:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetaMaskConnector=e.MetaMask=void 0;const n=r(7985),i=r(4299),s=r(9699);var o=r(4299);Object.defineProperty(e,"MetaMask",{enumerable:!0,get:function(){return o.MetaMask}});class a{constructor(){}static getInstance(){return this.instance||(this.instance=(0,n.initializeConnector)((t=>new i.MetaMask({actions:t})))),this.instance}static getConnection(){const[t,e]=a.getInstance();return{connector:t,hooks:e,type:s.ConnectionType.INJECTED}}}e.MetaMaskConnector=a},6661:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhantomConnector=e.Phantom=void 0;const n=r(7985),i=r(6177),s=r(9699);var o=r(6177);Object.defineProperty(e,"Phantom",{enumerable:!0,get:function(){return o.Phantom}});class a{constructor(){}static getInstance(){return this.instance||(this.instance=(0,n.initializeConnector)((t=>new i.Phantom({actions:t})))),this.instance}static getConnection(){const[t,e]=a.getInstance();return{connector:t,hooks:e,type:s.ConnectionType.PHANTOM}}}e.PhantomConnector=a},6584:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectConnector=void 0;const n=r(7985),i=r(9699),s=r(4698);class o{constructor(){}static getInstance(){return this.instance||(this.instance=(0,n.initializeConnector)((t=>new s.WalletConnectV2({actions:t,defaultChainId:1})))),this.instance}static getConnection(){const[t,e]=o.getInstance();return{connector:t,hooks:e,type:i.ConnectionType.WALLET_CONNECT}}}e.WalletConnectConnector=o},8013:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnectNotQrConnector=void 0;const n=r(7985),i=r(9699),s=r(4698);class o{constructor(){}static getInstance(){return this.instance||(this.instance=(0,n.initializeConnector)((t=>new s.GatewalletConnect({actions:t,defaultChainId:1})))),this.instance}static getConnection(){const[t,e]=o.getInstance();return{connector:t,hooks:e,type:i.ConnectionType.WALLET_CONNECT_NOTQR}}}e.WalletConnectNotQrConnector=o},3682:t=>{"use strict";t.exports=function({mustBeMetaMask:t=!1,silent:e=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof t)throw new Error("detect-provider: Expected option 'mustBeGateWallet' to be a boolean.");if("boolean"!=typeof e)throw new Error("detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((i=>{function s(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",s);const{gatewallet:r}=window;if(r&&r.isWeb3Wallet)i(r);else{const n=t&&r?"Non-GateWallet window.gatewallet detected.":"Unable to detect window.gatewallet.";!e&&console.error("detect-provider:",n),i(null)}}window.gatewallet?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout((()=>{s()}),r))}))}},3974:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.GateWallet=e.NoMetaMaskError=void 0;const a=r(2538);class c extends Error{constructor(){super("MetaMask not installed"),this.name=c.name,Object.setPrototypeOf(this,c.prototype)}}function u(t){return Number.parseInt(t,16)}e.NoMetaMaskError=c;class h extends a.Connector{constructor({actions:t,options:e,onError:r}){super(t,r),this._switchingChains=!0,this.options=e}isomorphicInitialize(){return o(this,void 0,void 0,(function*(){if(!this.eagerConnection)return this.eagerConnection=Promise.resolve().then((()=>s(r(3682)))).then((t=>o(this,void 0,void 0,(function*(){var e,r;console.log("m",t);const n=yield t.default(this.options);console.log(n,"provider"),n&&(this.provider=n,console.log(this.provider.providers,"this.provider.providers"),(null===(e=this.provider.providers)||void 0===e?void 0:e.length)&&(this.provider=null!==(r=this.provider.providers.find((t=>t.isWeb3Wallet)))&&void 0!==r?r:this.provider.providers[0]),this.provider.on("connect",(({chainId:t})=>{this.actions.update({chainId:u(t)})})),this.provider.on("chainChanged",(t=>{console.log("chainChanged"),this._switchingChains=!0,this.actions.update({chainId:u(t)})})),this.provider.on("disconnect",(t=>{var e;console.log("disconnect"),this._switchingChains?this._switchingChains=!1:(this.actions.resetState(),null===(e=this.onError)||void 0===e||e.call(this,t))})),this.provider.on("accountsChanged",(t=>{console.log("accountsChanged"),0===t.length?this.actions.resetState():this.actions.update({accounts:t})})),this.provider.on("gateAccountChange",(()=>{var t;console.log("gateAccountChange");const e=null===(t=this.provider)||void 0===t?void 0:t.selectedAddress;e?this.actions.update({accounts:[e]}):this.actions.resetState()})))}))))}))}connectEagerly(){var t,e;return o(this,void 0,void 0,(function*(){const r=this.actions.startActivation();return yield this.isomorphicInitialize(),this.provider?(yield null===(e=(t=this.provider).getAccount)||void 0===e?void 0:e.call(t).then((t=>{var e;return console.log(t,"connectEagerly gc",this.provider),null===(e=this.provider)||void 0===e?void 0:e.connect()})).catch((t=>{throw t})),Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_accounts"})]).then((([t,e])=>{if(!e.length)throw new Error("No accounts returned");this.actions.update({chainId:u(t),accounts:e})})).catch((t=>{console.debug("Could not connect eagerly",t),r()}))):r()}))}activate(t){var e,r;return o(this,void 0,void 0,(function*(){let n;return(null===(r=null===(e=this.provider)||void 0===e?void 0:e.isConnected)||void 0===r?void 0:r.call(e))||(n=this.actions.startActivation()),this.isomorphicInitialize().then((()=>o(this,void 0,void 0,(function*(){var e;if(!this.provider)throw new c;const r=yield null===(e=this.provider)||void 0===e?void 0:e.connect().catch((t=>{throw t}));return console.log("result",r),Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_requestAccounts"})]).then((([e,r])=>{console.log("ffdfsdf",e,r);const n=u(e),i="number"==typeof t?t:null==t?void 0:t.chainId;if(!i||n===i)return this.actions.update({chainId:n,accounts:r});const s=`0x${i.toString(16)}`;return this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}).catch((e=>{if(4902===e.code&&"number"!=typeof t)return this.provider.request({method:"wallet_addEthereumChain",params:[Object.assign(Object.assign({},t),{chainId:s})]});throw e})).then((()=>this.activate(i)))}))})))).catch((t=>{throw null==n||n(),t}))}))}watchAsset({address:t,symbol:e,decimals:r,image:n}){return o(this,void 0,void 0,(function*(){if(!this.provider)throw new Error("No provider");return this.provider.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t,symbol:e,decimals:r,image:n}}}).then((t=>{if(!t)throw new Error("Rejected");return!0}))}))}}e.GateWallet=h},2153:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({mustBePhantom:t=!1,silent:e=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof t)throw new Error("Phantom/detect-provider: Expected option 'mustBephantom' to be a boolean.");if("boolean"!=typeof e)throw new Error("Phantom/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("Phantom/detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((i=>{var s;function o(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",o);const{phantom:r}=window,{ethereum:s}=r;if(!s||t&&!s.isPhantom){const r=t&&s?"Non-phantom window.ethereum detected.":"Unable to detect window.ethereum.";!e&&console.error("Phantom/detect-provider:",r),i(null)}else i(s)}(null===(s=window.phantom)||void 0===s?void 0:s.ethereum)?o():(window.addEventListener("ethereum#initialized",o,{once:!0}),setTimeout((()=>{o()}),r))}))}},6177:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Phantom=e.NoPhantomError=void 0;const a=r(2538);class c extends Error{constructor(){super("Phantom not installed"),this.name=c.name,Object.setPrototypeOf(this,c.prototype)}}function u(t){return Number.parseInt(t,16)}e.NoPhantomError=c;class h extends a.Connector{constructor({actions:t,options:e,onError:r}){super(t,r),this.options=e}isomorphicInitialize(){return o(this,void 0,void 0,(function*(){if(!this.eagerConnection)return this.eagerConnection=Promise.resolve().then((()=>s(r(2153)))).then((t=>o(this,void 0,void 0,(function*(){const e=yield t.default(Object.assign({mustBePhantom:!1},this.options));e.isPhantom&&(this.provider=e,this.provider.on("connect",(({chainId:t})=>{this.actions.update({chainId:u(t)})})),this.provider.on("disconnect",(t=>{var e;this.actions.resetState(),null===(e=this.onError)||void 0===e||e.call(this,t)})),this.provider.on("chainChanged",(t=>{this.actions.update({chainId:u(t)})})),this.provider.on("accountsChanged",(t=>{0===t.length?this.actions.resetState():this.actions.update({accounts:t})})))}))))}))}connectEagerly(){return o(this,void 0,void 0,(function*(){const t=this.actions.startActivation();return yield this.isomorphicInitialize(),this.provider?Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_accounts"})]).then((([t,e])=>{if(!e.length)throw new Error("No accounts returned");this.actions.update({chainId:u(t),accounts:e})})).catch((e=>{console.debug("Could not connect eagerly",e),t()})):t()}))}activate(t){var e,r;return o(this,void 0,void 0,(function*(){let n;return(null===(r=null===(e=this.provider)||void 0===e?void 0:e.isConnected)||void 0===r?void 0:r.call(e))||(n=this.actions.startActivation()),this.isomorphicInitialize().then((()=>o(this,void 0,void 0,(function*(){if(!this.provider)throw new c;return Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_requestAccounts"})]).then((([e,r])=>{const n=u(e),i="number"==typeof t?t:null==t?void 0:t.chainId;if(!i||n===i)return this.actions.update({chainId:n,accounts:r});const s=`0x${i.toString(16)}`;return this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}).catch((e=>{if(4902===e.code&&"number"!=typeof t)return this.provider.request({method:"wallet_addEthereumChain",params:[Object.assign(Object.assign({},t),{chainId:s})]});throw e})).then((()=>this.activate(i)))}))})))).catch((t=>{throw null==n||n(),t}))}))}}e.Phantom=h},4698:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GatewalletConnect=e.WalletConnectV2=void 0;const n=r(3442);class i extends n.WalletConnect{constructor({actions:t,defaultChainId:e,qrcode:r=!0,onError:n}){super({actions:t,options:{projectId:"49cf6ec6179f8d21bf525adc78d6900a",chains:[e||1],optionalChains:[56],showQrModal:r,optionalMethods:["eth_signTypedData","eth_signTypedData_v4","eth_sign"],qrModalOptions:{explorerRecommendedWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96","1ae92b26df02f0abca6304df07debccd18262fdf5fe82daa81593582dac9a369","ef333840daf915aafdc4a004525502d6d49d77bd9c65e0642dbaefb3c2893bef","20459438007b75f4f4acb98bf29aa3b800550309646d375da5fd4aac6c2a2c66"],themeVariables:{"--wcm-z-index":"10000"}}},onError:n}),this.ANALYTICS_EVENT="Wallet Connect QR Scan"}}e.WalletConnectV2=i;class s extends i{constructor({actions:t,onError:e}){super({actions:t,defaultChainId:1,qrcode:!1,onError:e}),this.ANALYTICS_EVENT="Gate Wallet QR Scan",this.events.once(n.URI_AVAILABLE,(()=>{var t;null===(t=this.provider)||void 0===t||t.events.on("disconnect",this.deactivate)})),this.events.on(n.URI_AVAILABLE,(t=>{t&&this.events.emit(s.GATE_URI_AVAILABLE,`hello_gatewallet:${t}`)}))}}e.GatewalletConnect=s,s.GATE_URI_AVAILABLE="gate_uri_available"},3607:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(7985),e),i(r(2538),e),i(r(2295),e),i(r(9699),e),i(r(8593),e)},7912:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createStorage=e.noopStorage=void 0,e.noopStorage={getItem:t=>"",setItem:(t,e)=>null,removeItem:t=>null},e.createStorage=function({storage:t,key:e="web3"}){return Object.assign(Object.assign({},t),{getItem:(r,n=null)=>{const i=t.getItem(`${e}.${r}`);try{return i?JSON.parse(i):n}catch(t){return console.warn(t),n}},setItem:(r,n)=>{if(null===n)t.removeItem(`${e}.${r}`);else try{t.setItem(`${e}.${r}`,JSON.stringify(n))}catch(t){console.error(t)}},removeItem:r=>t.removeItem(`${e}.${r}`)})}},9699:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionType=void 0,function(t){t.INJECTED="INJECTED",t.GATEWALLET="GATEWALLET",t.PHANTOM="PHANTOM",t.WALLET_CONNECT="WALLET_CONNECT",t.WALLET_CONNECT_NOTQR="WALLET_CONNECT_NOTQR"}(r||(e.ConnectionType=r={}))},8593:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=e.isWallet=void 0,e.isWallet=t=>{const e=null===window||void 0===window?void 0:window.ethereum;return"MetaMask"===t?(null==e?void 0:e.isMetaMask)||!1:"TokenPocket"===t&&(null==e?void 0:e.isTokenPocket)||!1},e.delay=t=>new Promise((e=>setTimeout(e,t)))},655:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__assign:()=>s,__asyncDelegator:()=>b,__asyncGenerator:()=>w,__asyncValues:()=>_,__await:()=>y,__awaiter:()=>h,__classPrivateFieldGet:()=>S,__classPrivateFieldSet:()=>P,__createBinding:()=>f,__decorate:()=>a,__exportStar:()=>d,__extends:()=>i,__generator:()=>l,__importDefault:()=>I,__importStar:()=>A,__makeTemplateObject:()=>E,__metadata:()=>u,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>v,__values:()=>p});var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var s=function(){return s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},s.apply(this,arguments)};function o(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function a(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function c(t,e){return function(r,n){e(r,n,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))}function l(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function d(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function v(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function w(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof y?Promise.resolve(r.value.v).then(c,u):h(s[0][2],r)}catch(t){h(s[0][3],t)}var r}function c(t){a("next",t)}function u(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:y(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=p(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){!function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}(n,i,(e=t[r](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function A(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function I(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function P(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},3250:(t,e,r)=>{"use strict";var n=r(2244),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=n.useState,o=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!i(t,r)}catch(t){return!0}}var h="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),n=s({inst:{value:r,getSnapshot:e}}),i=n[0].inst,h=n[1];return a((function(){i.value=r,i.getSnapshot=e,u(i)&&h({inst:i})}),[t,r,e]),o((function(){return u(i)&&h({inst:i}),t((function(){u(i)&&h({inst:i})}))}),[t]),c(r),r};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:h},139:(t,e,r)=>{"use strict";var n=r(2244),i=r(1688),s="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=i.useSyncExternalStore,a=n.useRef,c=n.useEffect,u=n.useMemo,h=n.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var l=a(null);if(null===l.current){var f={hasValue:!1,value:null};l.current=f}else f=l.current;l=u((function(){function t(t){if(!c){if(c=!0,o=t,t=n(t),void 0!==i&&f.hasValue){var e=f.value;if(i(e,t))return a=e}return a=t}if(e=a,s(o,t))return e;var r=n(t);return void 0!==i&&i(e,r)?e:(o=t,a=r)}var o,a,c=!1,u=void 0===r?null:r;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,r,n,i]);var d=o(t,l[0],l[1]);return c((function(){f.hasValue=!0,f.value=d}),[d]),h(d),d}},1688:(t,e,r)=>{"use strict";t.exports=r(3250)},2798:(t,e,r)=>{"use strict";t.exports=r(139)},7026:t=>{"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},4604:(t,e,r)=>{"use strict";r.r(e),r.d(e,{create:()=>h,createStore:()=>i,default:()=>l,useStore:()=>c});const n=t=>{let e;const r=new Set,n=(t,n)=>{const i="function"==typeof t?t(e):t;if(!Object.is(i,e)){const t=e;e=(null!=n?n:"object"!=typeof i)?i:Object.assign({},e,i),r.forEach((r=>r(e,t)))}},i=()=>e,s={setState:n,getState:i,subscribe:t=>(r.add(t),()=>r.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return e=t(n,i,s),s},i=t=>t?n(t):n;var s=r(2244),o=r(2798);const{useSyncExternalStoreWithSelector:a}=o;function c(t,e=t.getState,r){const n=a(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return(0,s.useDebugValue)(n),n}const u=t=>{const e="function"==typeof t?i(t):t,r=(t,r)=>c(e,t,r);return Object.assign(r,e),r},h=t=>t?u(t):u;var l=t=>h(t)},2244:e=>{"use strict";e.exports=t},5883:()=>{},6601:()=>{},8805:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getPriorityConnector=e.getSelectedConnector=e.initializeConnector=void 0;const a=r(3848),c=r(2244),u=r(4604);let h;function l(...t){function e(e){const r=t.findIndex((([t])=>e===t));if(-1===r)throw new Error("Connector not found");return r}return{useSelectedStore:function(r){const n=t[e(r)][2];if(!n)throw new Error("Stores not passed");return n},useSelectedChainId:function(r){return t.map((([,{useChainId:t}])=>t()))[e(r)]},useSelectedAccounts:function(r){return t.map((([,{useAccounts:t}])=>t()))[e(r)]},useSelectedIsActivating:function(r){return t.map((([,{useIsActivating:t}])=>t()))[e(r)]},useSelectedAccount:function(r){return t.map((([,{useAccount:t}])=>t()))[e(r)]},useSelectedIsActive:function(r){return t.map((([,{useIsActive:t}])=>t()))[e(r)]},useSelectedProvider:function(r,n){const i=e(r);return t.map((([,{useProvider:t}],e)=>t(n,e===i)))[i]},useSelectedENSNames:function(r,n){const i=e(r);return t.map((([,{useENSNames:t}],e)=>t(e===i?n:void 0)))[i]},useSelectedENSName:function(r,n){const i=e(r);return t.map((([,{useENSName:t}],e)=>t(e===i?n:void 0)))[i]}}}e.initializeConnector=function(t){const[e,n]=(0,a.createWeb3ReactStoreAndActions)(),i=t(n),l=function(t){return{useChainId:function(){return(0,u.useStore)(t,f)},useAccounts:function(){return(0,u.useStore)(t,d,g)},useIsActivating:function(){return(0,u.useStore)(t,p)}}}(e),v=function({useChainId:t,useAccounts:e,useIsActivating:r}){return{useAccount:function(){var t;return null===(t=e())||void 0===t?void 0:t[0]},useIsActive:function(){return function({chainId:t,accounts:e,activating:r}){return Boolean(t&&e&&!r)}({chainId:t(),accounts:e(),activating:r()})}}}(l),y=function(t,{useAccounts:e,useChainId:n},{useAccount:i,useIsActive:a}){return{useProvider:function(e,i=!0){const u=a(),l=n(),[f,d]=(0,c.useState)(void 0!==h);return(0,c.useEffect)((()=>{if(f)return;let t=!1;return function(){return o(this,void 0,void 0,(function*(){if(void 0===h)try{const{Web3Provider:t}=yield Promise.resolve().then((()=>s(r(2803))));h=t}catch(t){console.debug("@ethersproject/providers not available"),h=null}}))}().then((()=>{t||d(!0)})),()=>{t=!0}}),[f]),(0,c.useMemo)((()=>{if(i){if(t.customProvider)return t.customProvider;if(h&&t.provider)return new h(t.provider,e)}}),[f,i,u,l,e])},useENSNames:function(t){return m(t,e())},useENSName:function(t){var e;const r=i();return null===(e=m(t,(0,c.useMemo)((()=>void 0===r?void 0:[r]),[r])))||void 0===e?void 0:e[0]}}}(i,l,v);return[i,Object.assign(Object.assign(Object.assign({},l),v),y),e]},e.getSelectedConnector=l,e.getPriorityConnector=function(...t){const{useSelectedStore:e,useSelectedChainId:r,useSelectedAccounts:n,useSelectedIsActivating:i,useSelectedAccount:s,useSelectedIsActive:o,useSelectedProvider:a,useSelectedENSNames:c,useSelectedENSName:u}=l(...t);function h(){const e=t.map((([,{useIsActive:t}])=>t())).findIndex((t=>t));return t[-1===e?0:e][0]}return{useSelectedStore:e,useSelectedChainId:r,useSelectedAccounts:n,useSelectedIsActivating:i,useSelectedAccount:s,useSelectedIsActive:o,useSelectedProvider:a,useSelectedENSNames:c,useSelectedENSName:u,usePriorityConnector:h,usePriorityStore:function(){return e(h())},usePriorityChainId:function(){return r(h())},usePriorityAccounts:function(){return n(h())},usePriorityIsActivating:function(){return i(h())},usePriorityAccount:function(){return s(h())},usePriorityIsActive:function(){return o(h())},usePriorityProvider:function(t){return a(h(),t)},usePriorityENSNames:function(t){return c(h(),t)},usePriorityENSName:function(t){return u(h(),t)}}};const f=({chainId:t})=>t,d=({accounts:t})=>t,p=({activating:t})=>t,g=(t,e)=>void 0===t&&void 0===e||void 0!==t&&t.length===(null==e?void 0:e.length)&&t.every(((t,r)=>t===e[r]));function m(t,e=[]){const[r,n]=(0,c.useState)();return(0,c.useEffect)((()=>{if(t&&e.length){let r=!1;return Promise.all(e.map((e=>t.lookupAddress(e)))).then((t=>{r||n(t)})).catch((t=>{r||(console.debug("Could not fetch ENS names",t),n(new Array(e.length).fill(null)))})),()=>{r=!0,n(void 0)}}}),[t,e]),null!=r?r:new Array(e.length).fill(void 0)}},7985:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(8805),e),i(r(8334),e),i(r(4456),e)},8334:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MockEIP1193Provider=void 0;const n=r(6729);class i extends n.EventEmitter{constructor(){super(...arguments),this.eth_chainId=jest.fn((t=>t)),this.eth_accounts=jest.fn((t=>t)),this.eth_requestAccounts=jest.fn((t=>t))}request(t){if(!this.chainId)return Promise.reject(new Error);switch(t.method){case"eth_chainId":return Promise.resolve(this.eth_chainId(this.chainId));case"eth_accounts":return Promise.resolve(this.eth_accounts(this.accounts));case"eth_requestAccounts":return Promise.resolve(this.eth_requestAccounts(this.accounts));default:throw new Error(`Method not supported on mock: ${JSON.stringify(t)}`)}}emitConnect(t){this.emit("connect",{chainId:t})}emitDisconnect(t){this.emit("disconnect",t)}emitChainChanged(t){this.emit("chainChanged",t)}emitAccountsChanged(t){this.emit("accountsChanged",t)}}e.MockEIP1193Provider=i},4456:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.useWeb3React=e.Web3ReactProvider=void 0;const o=s(r(2244)),a=r(8805),c=(0,o.createContext)(void 0);e.Web3ReactProvider=function({children:t,connectors:e,connectorOverride:r,network:n,lookupENS:i=!0}){const s=(0,o.useRef)(e);if(e.length!=s.current.length||e.some(((t,e)=>{const r=s.current[e];return t[0]!==r[0]})))throw new Error("The connectors prop passed to Web3ReactProvider must be referentially static. If connectors is changing, try providing a key prop to Web3ReactProvider that changes every time connectors changes.");const u=(0,a.getPriorityConnector)(...e),{usePriorityConnector:h,useSelectedChainId:l,useSelectedAccounts:f,useSelectedIsActivating:d,useSelectedAccount:p,useSelectedIsActive:g,useSelectedProvider:m,useSelectedENSNames:v,useSelectedENSName:y}=u,w=h(),b=null!=r?r:w,_=l(b),E=f(b),A=d(b),I=p(b),S=g(b),P=m(b,n),O=v(b,i?P:void 0),N=y(b,i?P:void 0);return o.default.createElement(c.Provider,{value:{connector:b,chainId:_,accounts:E,isActivating:A,account:I,isActive:S,provider:P,ENSNames:O,ENSName:N,hooks:u}},t)},e.useWeb3React=function(){const t=(0,o.useContext)(c);if(!t)throw Error("useWeb3React can only be used within the Web3ReactProvider component");return t}},4299:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.MetaMask=e.NoMetaMaskError=void 0;const a=r(2538);class c extends Error{constructor(){super("MetaMask not installed"),this.name=c.name,Object.setPrototypeOf(this,c.prototype)}}function u(t){return Number.parseInt(t,16)}e.NoMetaMaskError=c;class h extends a.Connector{constructor({actions:t,options:e,onError:r}){super(t,r),this.options=e}isomorphicInitialize(){return o(this,void 0,void 0,(function*(){if(!this.eagerConnection)return this.eagerConnection=Promise.resolve().then((()=>s(r(2003)))).then((t=>o(this,void 0,void 0,(function*(){var e,r;const n=yield t.default(this.options);n&&(this.provider=n,(null===(e=this.provider.providers)||void 0===e?void 0:e.length)&&(this.provider=null!==(r=this.provider.providers.find((t=>t.isMetaMask)))&&void 0!==r?r:this.provider.providers[0]),this.provider.on("connect",(({chainId:t})=>{this.actions.update({chainId:u(t)})})),this.provider.on("disconnect",(t=>{var e;1013!==t.code?(this.actions.resetState(),null===(e=this.onError)||void 0===e||e.call(this,t)):console.debug('MetaMask logged connection error 1013: "Try again later"')})),this.provider.on("chainChanged",(t=>{this.actions.update({chainId:u(t)})})),this.provider.on("accountsChanged",(t=>{0===t.length?this.actions.resetState():this.actions.update({accounts:t})})))}))))}))}connectEagerly(){return o(this,void 0,void 0,(function*(){const t=this.actions.startActivation();try{if(yield this.isomorphicInitialize(),!this.provider)return t();const e=yield this.provider.request({method:"eth_accounts"});if(!e.length)throw new Error("No accounts returned");const r=yield this.provider.request({method:"eth_chainId"});this.actions.update({chainId:u(r),accounts:e})}catch(t){console.debug("Could not connect eagerly",t),this.actions.resetState()}}))}activate(t){var e,r;return o(this,void 0,void 0,(function*(){let n;return(null===(r=null===(e=this.provider)||void 0===e?void 0:e.isConnected)||void 0===r?void 0:r.call(e))||(n=this.actions.startActivation()),this.isomorphicInitialize().then((()=>o(this,void 0,void 0,(function*(){if(!this.provider)throw new c;const e=yield this.provider.request({method:"eth_requestAccounts"}),r=u(yield this.provider.request({method:"eth_chainId"})),n="number"==typeof t?t:null==t?void 0:t.chainId;if(!n||r===n)return this.actions.update({chainId:r,accounts:e});const i=`0x${n.toString(16)}`;return this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]}).catch((e=>{var r,n;if(4902===((null===(n=null===(r=e.data)||void 0===r?void 0:r.originalError)||void 0===n?void 0:n.code)||e.code)&&"number"!=typeof t){if(!this.provider)throw new Error("No provider");return this.provider.request({method:"wallet_addEthereumChain",params:[Object.assign(Object.assign({},t),{chainId:i})]})}throw e})).then((()=>this.activate(n)))})))).catch((t=>{throw null==n||n(),t}))}))}watchAsset({address:t,symbol:e,decimals:r,image:n}){return o(this,void 0,void 0,(function*(){if(!this.provider)throw new Error("No provider");return this.provider.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t,symbol:e,decimals:r,image:n}}}).then((t=>{if(!t)throw new Error("Rejected");return!0}))}))}}e.MetaMask=h},3848:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWeb3ReactStoreAndActions=e.MAX_SAFE_CHAIN_ID=void 0;const n=r(4594),i=r(4604);e.MAX_SAFE_CHAIN_ID=0xfffffffffffec;const s={chainId:void 0,accounts:void 0,activating:!1};e.createWeb3ReactStoreAndActions=function(){const t=(0,i.createStore)()((()=>s));let r=0;return[t,{startActivation:function(){const e=++r;return t.setState(Object.assign(Object.assign({},s),{activating:!0})),()=>{r===e&&t.setState({activating:!1})}},update:function(i){if(void 0!==i.chainId&&function(t){if(!Number.isInteger(t)||t<=0||t>e.MAX_SAFE_CHAIN_ID)throw new Error(`Invalid chainId ${t}`)}(i.chainId),void 0!==i.accounts)for(let t=0;t<i.accounts.length;t++)i.accounts[t]=(s=i.accounts[t],(0,n.getAddress)(s));var s;r++,t.setState((t=>{var e,r;const n=null!==(e=i.chainId)&&void 0!==e?e:t.chainId,s=null!==(r=i.accounts)&&void 0!==r?r:t.accounts;let o=t.activating;return o&&n&&s&&(o=!1),{chainId:n,accounts:s,activating:o}}))},resetState:function(){r++,t.setState(s)}}]}},2538:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connector=void 0,e.Connector=class{constructor(t,e){this.actions=t,this.onError=e}resetState(){this.actions.resetState()}}},3442:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))},a=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnect=e.URI_AVAILABLE=void 0;const u=r(2538),h=c(r(6729)),l=r(1915);e.URI_AVAILABLE="URI_AVAILABLE";class f extends u.Connector{constructor({actions:t,options:r,defaultChainId:n,timeout:i=5e3,onError:s}){super(t,s),this.events=new h.default,this.disconnectListener=t=>{var e;this.actions.resetState(),t&&(null===(e=this.onError)||void 0===e||e.call(this,t))},this.chainChangedListener=t=>{this.actions.update({chainId:Number.parseInt(t,16)})},this.accountsChangedListener=t=>{this.actions.update({accounts:t})},this.URIListener=t=>{this.events.emit(e.URI_AVAILABLE,t)};const{rpcMap:o,rpc:c,chains:u}=r,l=a(r,["rpcMap","rpc","chains"]);this.options=l,this.chains=u,this.defaultChainId=n,this.rpcMap=o||c,this.timeout=i}isomorphicInitialize(t=this.defaultChainId){if(this.eagerConnection)return this.eagerConnection;const e=this.rpcMap?(0,l.getBestUrlMap)(this.rpcMap,this.timeout):void 0,n=t?(0,l.getChainsWithDefault)(this.chains,t):this.chains;return this.eagerConnection=Promise.resolve().then((()=>s(r(639)))).then((t=>o(this,void 0,void 0,(function*(){return(this.provider=yield t.default.init(Object.assign(Object.assign({},this.options),{chains:n,rpcMap:yield e}))).on("disconnect",this.disconnectListener).on("chainChanged",this.chainChangedListener).on("accountsChanged",this.accountsChangedListener).on("display_uri",this.URIListener)}))))}connectEagerly(){return o(this,void 0,void 0,(function*(){const t=this.actions.startActivation();try{const t=yield this.isomorphicInitialize();if(!t.session)throw new Error("No active session found. Connect your wallet first.");this.actions.update({accounts:t.accounts,chainId:t.chainId})}catch(e){throw yield this.deactivate(),t(),e}}))}activate(t){var e;return o(this,void 0,void 0,(function*(){const r=yield this.isomorphicInitialize(t);if(r.session){if(!t||t===r.chainId)return;if(!r.session.namespaces.eip155.accounts.some((e=>e.startsWith(`eip155:${t}:`)))){if(null===(e=this.options.optionalChains)||void 0===e?void 0:e.includes(t))throw new Error(`Cannot activate an optional chain (${t}), as the wallet is not connected to it.\n\tYou should handle this error in application code, as there is no guarantee that a wallet is connected to a chain configured in "optionalChains".`);throw new Error(`Unknown chain (${t}). Make sure to include any chains you might connect to in the "chains" or "optionalChains" parameters when initializing WalletConnect.`)}return r.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${t.toString(16)}`}]})}const n=this.actions.startActivation();try{yield r.enable(),this.actions.update({chainId:r.chainId,accounts:r.accounts})}catch(t){throw yield this.deactivate(),n(),t}}))}deactivate(){var t;return o(this,void 0,void 0,(function*(){null===(t=this.provider)||void 0===t||t.removeListener("disconnect",this.disconnectListener).removeListener("chainChanged",this.chainChangedListener).removeListener("accountsChanged",this.accountsChangedListener).removeListener("display_uri",this.URIListener).disconnect(),this.provider=void 0,this.eagerConnection=void 0,this.actions.resetState()}))}}e.WalletConnect=f},1915:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};function a(t,e){return o(this,void 0,void 0,(function*(){if("string"==typeof t)return t;if(1===t.length)return t[0];const[n,i]=yield Promise.all([Promise.resolve().then((()=>s(r(4497)))).then((({HttpConnection:t})=>t)),Promise.resolve().then((()=>s(r(9303)))).then((({JsonRpcProvider:t})=>t))]);return new Promise((r=>{let s=!1;const o={};t.forEach(((a,c)=>{const u=new i(new n(a)),h=new Promise(((t,r)=>{u.request({method:"eth_chainId"}).then((()=>t())).catch((()=>r())),setTimeout((()=>{r()}),e)}));h.then((()=>!0)).catch((()=>!1)).then((e=>{if(!s){if(o[c]=e,Object.keys(o).length===t.length){const e=Object.keys(o).findIndex((t=>o[Number(t)]));return r(t[-1===e?0:e])}new Array(t.length).fill(0).forEach(((e,n)=>{o[n]&&new Array(n).fill(0).every(((t,e)=>!1===o[e]))&&(s=!0,r(t[n]))}))}}))}))}))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.getChainsWithDefault=e.getBestUrlMap=void 0,e.getBestUrlMap=function(t,e){return o(this,void 0,void 0,(function*(){return Object.fromEntries(yield Promise.all(Object.entries(t).map((([t,r])=>o(this,void 0,void 0,(function*(){return[t,yield a(r,e)]}))))))}))},e.getChainsWithDefault=function(t,e){const r=t.indexOf(e);if(-1===r)throw new Error(`Invalid chainId ${e}. Make sure default chain is included in "chains" - chains specified in "optionalChains" may not be selected as the default, as they may not be supported by the wallet.`);const n=[...t];return n.splice(r,1),[e,...n]}},6559:(t,e,r)=>{"use strict";const n=r(5346);t.exports=o;const i=function(){function t(t){return void 0!==t&&t}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return t(self)||t(window)||t(this)||{}}}().console||{},s={mapHttpRequest:f,mapHttpResponse:f,wrapRequestSerializer:d,wrapResponseSerializer:d,wrapErrorSerializer:d,req:f,res:f,err:function(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)void 0===e[r]&&(e[r]=t[r]);return e}};function o(t){(t=t||{}).browser=t.browser||{};const e=t.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const r=t.browser.write||i;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},s=function(t,e){return Array.isArray(t)?t.filter((function(t){return"!stdSerializers.err"!==t})):!0===t&&Object.keys(e)}(t.browser.serialize,n);let f=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(f=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===t.enabled&&(t.level="silent");const d=t.level||"info",g=Object.create(r);g.log||(g.log=p),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(t){if("silent"!==t&&!this.levels.values[t])throw Error("unknown level "+t);this._level=t,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:e,serialize:s,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:l(t)};return g.levels=o.levels,g.level=d,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=p,g.serializers=n,g._serialize=s,g._stdErrSerialize=f,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),l=!0===t.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],l,a,this._stdErrSerialize)}function f(t){this._childLevel=1+(0|t._childLevel),this.error=u(t,r,"error"),this.fatal=u(t,r,"fatal"),this.warn=u(t,r,"warn"),this.info=u(t,r,"info"),this.debug=u(t,r,"debug"),this.trace=u(t,r,"trace"),a&&(this.serializers=a,this._serialize=l),e&&(this._logEvent=h([].concat(t._logEvent.bindings,r)))}return f.prototype=this,new f(this)},e&&(g._logEvent=h()),g}function a(t,e,r,s){const a=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?p:a[r]?a[r]:i[r]||i[s]||p,function(t,e,r){var s;(t.transmit||e[r]!==p)&&(e[r]=(s=e[r],function(){const a=t.timestamp(),u=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var f=0;f<u.length;f++)u[f]=arguments[f];if(t.serialize&&!t.asObject&&c(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?s.call(l,function(t,e,r,i){t._serialize&&c(r,t._serialize,t.serializers,t._stdErrSerialize);const s=r.slice();let a=s[0];const u={};i&&(u.time=i),u.level=o.levels.values[e];let h=1+(0|t._childLevel);if(h<1&&(h=1),null!==a&&"object"==typeof a){for(;h--&&"object"==typeof s[0];)Object.assign(u,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(u.msg=a),u}(this,r,u,a)):s.apply(l,u),t.transmit){const n=t.transmit.level||e.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,u=t._logEvent.bindings;c(r,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter((function(t){return-1===u.indexOf(t)})),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=h(u)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},u)}}))}(t,e,r)}function c(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=o.stdSerializers.err(t[i]);else if("object"==typeof t[i]&&!Array.isArray(t[i]))for(const n in t[i])e&&e.indexOf(n)>-1&&n in r&&(t[i][n]=r[n](t[i][n]))}function u(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function h(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function l(t){return"function"==typeof t.timestamp?t.timestamp:!1===t.timestamp?g:m}function f(){return{}}function d(t){return t}function p(){}function g(){return!1}function m(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,loaded:!1,exports:{}};return n[t].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}return s.m=n,s.amdO={},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,r)=>(s.f[r](t,e),e)),[])),s.u=t=>t+".web3-connector.v3.2.3.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},r="web3Connector:",s.l=(t,n,i,o)=>{if(e[t])e[t].push(n);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var l=u[h];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==r+i){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",r+i),a.src=t),e[t]=[n];var f=(r,n)=>{a.onerror=a.onload=null,clearTimeout(d);var i=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(n))),r)return r(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.p="https://webpro.gateweb3.cc/lib/",(()=>{var t={179:0};s.f.j=(e,r)=>{var n=s.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=t[e]=[r,i]));r.push(n[2]=i);var o=s.p+s.u(e),a=new Error;s.l(o,(r=>{if(s.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var n,i,[o,a,c]=r,u=0;if(o.some((e=>0!==t[e]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);c&&c(s)}for(e&&e(r);u<o.length;u++)i=o[u],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0},r=self.webpackChunkweb3Connector=self.webpackChunkweb3Connector||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),s(3607)})()));